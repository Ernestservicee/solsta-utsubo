const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/renderer.xwAlwluV.js","_astro/vendor.BS1T9Mq3.js","_astro/loader.BFul6Ml5.js","_astro/hoisted.6dEUJDVK.js","_astro/site.Cz3JGs3N.js"])))=>i.map(i=>d[i]);
import{k as En,cN as kn,ad as sn,t as _n,u as ae,cZ as ve,V as ct,ae as Cn,a6 as Ft,c_ as In,ac as Ye,b as Ke,c$ as dt,d0 as on,d1 as Ln,d2 as An,aZ as Un,av as Rt,C as On,d3 as Et,a7 as Pn,d4 as Mn,d5 as Bt,d6 as Nn,d7 as Fn,d8 as xn,d9 as rn,da as Dn,db as _e}from"./vendor.BS1T9Mq3.js";import"./hoisted.6dEUJDVK.js";const Ii=1/0,Ct=new En(1,1);Ct.texture.name="rtt";Ct.depthTexture=new kn;Ct.depthTexture.name="rttDepth";const V={fourthAnimBreakPointStart:.7,fourthAnimBreakPointEnd:.95,spBreakPoint:1024,websiteStarted:!1,fboParticles:Ct,fboScene:new sn,tempFurMaterial:null,timer:_n,scroll:0,virtualScroll:0,inSubpage:!1,useAlphaCoverage:!0,globalTimer:ae(0).label("globalTimer").setGroup(ve),globalElapsed:ae(0).label("globalElapsed").setGroup(ve),introEyeAnimProgress:ae(0),introAnimProgress:ae(0),introTotalAnimProgress:ae(0),lightBlendProgress:ae(.1),cameraFov:ae(40),pointerDelta:ae("float").label("pointerDelta").setGroup(ve),aspectRatio:ae("float").label("aspectRatio").setGroup(ve),normalizedPointer:ae(new ct).label("normalizedPointer").setGroup(ve),screenSpaceMatrix:ae(new Cn).label("screenSpaceMatrix").setGroup(ve),introTotalAnimProgressAfter:{value:0},introTrackingEnabled:{value:0}};V.sections={oneProgress:ae(0).label("oneProgress").setGroup(ve),twoProgress:ae(0).label("twoProgress").setGroup(ve),oneEndProgress:ae(0).label("oneEndProgress").setGroup(ve),twoEndProgress:ae(0).label("twoEndProgress").setGroup(ve),threeProgress:ae(0).label("threeProgress").setGroup(ve),fourthProgress:ae(0).label("fourthProgress").setGroup(ve),fiveProgress:ae(0).label("fiveProgress").setGroup(ve),oneMagnetProgress:ae(0).label("oneMagnetProgress").setGroup(ve),endMagnetProgress:ae(0).label("endMagnetProgress").setGroup(ve),twoIntroProgress:ae(0).label("twoIntroProgress").setGroup(ve),current:"section1"};let xt={dpr:1,anchorScrolling:!1,speed:ae(1).label("speed").setGroup(ve),slowMoLerp:ae(1).label("slowMoLerp").setGroup(ve),transitionSlowMo:ae(0),interactionHighlight:ae(0),slowMo:!1,zoomInteraction:!1,scene:null,menuOpen:!1,pageTransition:!1,animMenu:ae(0),sceneMenu:new sn,camera:null,gl:null,isWebGPU:!0,resetActivityRatio:1,orthographicLayer:3,perspectiveLayer:2,pointerRef:new ct(-9999,-9999),pointerLerp:new ct(-9999,-9999),pointerLerpPrev:new ct(-9999,-9999),pointerLerpDelta:new ct,mouseVelocityRef:new Ft,mouseDirectionRef:new Ft};function Ae(h){xt={...xt,...h}}function ie(){return xt}class Rn{constructor(){this.data={},this.listeners={},this.fireAtStart={},this.instances=[],this.handlerMap={},this.triggeredEvents=new Set,this.smoothProgress=0,this.globalLastUpdateTime=0,this.is}on(e,a){this.listeners[e]=this.listeners[e]||[],this.handlerMap[e]||(this.handlerMap[e]=new Set),this.handlerMap[e].has(a)||(this.handlerMap[e].add(a),this.listeners[e].push(a)),this.listeners[e].push(a)}isHandlerRegistered(e,a){return this.handlerMap[e]?.has(a)}off(e,a){e in this.listeners&&(this.listeners[e].splice(this.listeners[e].indexOf(a),1),this.handlerMap[e]&&this.handlerMap[e].delete(a))}register(e){this.instances.push(e);for(const a in this.fireAtStart)this.fireMethod(e,a)}unregister(e){const a=this.instances.indexOf(e);a>-1&&this.instances.splice(a,1)}nameToMethod(e){return`on${e.charAt(0).toUpperCase()+e.slice(1)}`}fireMethod(e,a){const l=e[this.nameToMethod(a)];typeof l=="function"&&l.call(e,this.data[a])}sortInstances(){const e=this.instances.length;return e!==this.lastInstanceCount&&(this.sortedInstances=Array.from(this.instances).sort((a,l)=>a.raf.renderPriority-l.raf.renderPriority),this.lastInstanceCount=e),this.sortedInstances}async triggerOnRaf({elapsedTime:e,startTime:a}){const n=self.performance.now(),{gl:t,scene:s,camera:o}=ie();this.sortInstances();for(const c of this.sortedInstances)typeof c.onBeforeRaf=="function"&&c.onBeforeRaf({gl:t,scene:s,camera:o});let i=10;const r=Math.min((n-this.globalLastUpdateTime)/1e3,i);this.globalLastUpdateTime=n;for(const c of this.sortedInstances){const u=typeof c.onRaf=="function",d=typeof c.onThrottle=="function";if(u||d){d&&(i=1/c.raf.fps);const f=Math.min(n-(c.lastUpdateTime||n),i*1e3),p=1e3/c.raf.fps;let m=f%p/p;if(c.raf.fps===1/0)m=0;else if(d&&Math.floor(f)>=Math.floor(p)){m=1;const v=f/1e3;c.onThrottle({delta:v,elapsedTime:e,startTime:a,gl:t,progress:this.smoothProgress}),c.lastUpdateTime=n}await c.onRaf({delta:r,throttleInterpolation:m,elapsedTime:e,startTime:a,gl:t,scene:s,camera:o,progress:this.smoothProgress})}}for(const c of this.sortedInstances)typeof c.onAfterRaf=="function"&&await c.onAfterRaf({gl:t,scene:s,camera:o})}trigger({name:e,fireAtStart:a=!1,log:l=!1},n={}){if(this.data[e]=n,e!=="newEventRegistered"&&typeof window>"u"&&this.trigger({name:"newEventRegistered"},{newEvent:e}),a&&(this.fireAtStart[e]=!0),l&&console.log(`👨‍🏫 ${e} – ${n}`),e in this.listeners)for(let t=0;t<this.listeners[e].length;t++)this.listeners[e][t].call(this,n);this.instances.forEach(t=>this.fireMethod(t,e))}}const q=new Rn,Bn="modulepreload",Gn=function(h){return"/"+h},Gt={},rt=function(e,a,l){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");n=Promise.allSettled(a.map(i=>{if(i=Gn(i),i in Gt)return;Gt[i]=!0;const r=i.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${c}`))return;const u=document.createElement("link");if(u.rel=r?"stylesheet":Bn,r||(u.as="script"),u.crossOrigin="",u.href=i,o&&u.setAttribute("nonce",o),document.head.appendChild(u),r)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))}function t(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return n.then(s=>{for(const o of s||[])o.status==="rejected"&&t(o.reason);return e().catch(t)})};function Hn(h){return document.createElementNS("http://www.w3.org/1999/xhtml",h)}function qn(){const h=Hn("canvas");return h.style.display="block",h}const Vn={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Wn(h,e){Object.values(Vn).forEach(([l,n])=>{document.addEventListener(l,t=>{const s={eventName:l,type:l,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,x:t.x,y:t.y,touches:t.touches,changedTouches:t.changedTouches,pointerType:t.pointerType,button:t.button,pointerId:t.pointerId,deltaY:t.deltaY,deltaX:t.deltaX,pageX:t.pageX,pageY:t.pageY,pressure:t.pressure,width:t.width,height:t.height,tiltX:t.tiltX,tiltY:t.tiltY,isPrimary:t.isPrimary,pointer:t.pointer};h.trigger({name:l,fireAtStart:!0,fireVirtualEvents:!0},s)})});const a=()=>{const l={width:window.innerWidth,height:window.innerHeight,dpr:Math.min(ie().dpr,window.devicePixelRatio),ratio:window.innerWidth/window.innerHeight};Ae({canvasSize:l}),h.trigger({name:"resize",fireAtStart:!0},l)};window.addEventListener("resize",a),a()}class ht{constructor(){if(ht._instance)return ht._instance;ht._instance=this,this.rafId=null,this.callbacks=new Set}addCallback(e){this.callbacks.add(e),this.rafId||this.startLoop()}removeCallback(e){this.callbacks.delete(e),this.callbacks.size===0&&this.stopLoop()}startLoop(){const e=a=>{this.callbacks.forEach(l=>l(a)),this.rafId=requestAnimationFrame(e)};this.rafId=requestAnimationFrame(e)}stopLoop(){cancelAnimationFrame(this.rafId),this.rafId=null}}const jn=new ht,$n=()=>{const h=navigator.userAgent;return h.indexOf("Safari")!==-1&&h.indexOf("Chrome")===-1&&h.indexOf("Chromium")===-1&&h.indexOf("Android")===-1&&h.indexOf("CriOS")===-1&&h.indexOf("FxiOS")===-1},zn=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent)||an(),st=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||/android/i.test(navigator.userAgent)||an(),an=()=>/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document,ft=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,Yn=h=>{const e=new In({syncTouch:!0,smoothWheel:!0,wheelMultiplier:.5,touchMultiplier:.8,syncTouchLerp:.02,lerp:.1,wrapper:document.body,virtualScroll:n=>{V.virtualScroll=n.deltaY}});V.lenis=e,e.on("scroll",n=>{const t=n.progress;V.scroll=t,h.trigger({name:"scroll"},{progress:t,direction:n.direction,scroll:n.targetScroll})}),q.on("lenis:scrollTo",({target:n,options:t})=>{e.scrollTo(n,t)}),q.on("lenis:stop",()=>{e.stop(),e.start()}),Ye.ticker.lagSmoothing(0),Ye.ticker.remove(Ye.updateRoot),e.scrollTo(0,{immediate:!0});let a=0,l=0;jn.addCallback(n=>{const t=(n-a)/1e3;if(a=n,Ye.updateRoot(n/1e3),e.raf(n),V.autoscroll?.started&&V.autoscroll.onRaf({delta:t}),l===V.scroll)return;l=Ke.damp(l,V.scroll,12,t),document.dispatchEvent(new CustomEvent("lenis:scroll",{detail:l})),Math.abs(l-V.scroll)<1e-4&&(l=V.scroll)})};class Kn{constructor(){this.time=self.performance.now(),this.start=this.start.bind(this),this.pause=this.pause.bind(this),this.animate=this.animate.bind(this)}start(){this.startTime=self.performance.now(),this.oldTime=this.startTime,this.isPaused=!1,this.animate(this.startTime);const{gl:e}=ie();e.setAnimationLoop(this.animate)}pause(){this.isPaused=!0}async animate(e,a){const{recording:l}=ie();this.time=e;const n=this.time-this.startTime,{gl:t,stats:s}=ie();l||(this.isPaused||await q.triggerOnRaf({elapsedTime:n/1e3,startTime:this.startTime}),s&&s.update())}}const Xn=new Kn;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Jn(){return typeof window>"u"&&(self.window=self),function(h){var e={parse:function(n){var t=e._bin,s=new Uint8Array(n);if(t.readASCII(s,0,4)=="ttcf"){var o=4;t.readUshort(s,o),o+=2,t.readUshort(s,o),o+=2;var i=t.readUint(s,o);o+=4;for(var r=[],c=0;c<i;c++){var u=t.readUint(s,o);o+=4,r.push(e._readFont(s,u))}return r}return[e._readFont(s,0)]},_readFont:function(n,t){var s=e._bin,o=t;s.readFixed(n,t),t+=4;var i=s.readUshort(n,t);t+=2,s.readUshort(n,t),t+=2,s.readUshort(n,t),t+=2,s.readUshort(n,t),t+=2;for(var r=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],c={_data:n,_offset:o},u={},d=0;d<i;d++){var f=s.readASCII(n,t,4);t+=4,s.readUint(n,t),t+=4;var p=s.readUint(n,t);t+=4;var m=s.readUint(n,t);t+=4,u[f]={offset:p,length:m}}for(d=0;d<r.length;d++){var v=r[d];u[v]&&(c[v.trim()]=e[v.trim()].parse(n,u[v].offset,u[v].length,c))}return c},_tabOffset:function(n,t,s){for(var o=e._bin,i=o.readUshort(n,s+4),r=s+12,c=0;c<i;c++){var u=o.readASCII(n,r,4);r+=4,o.readUint(n,r),r+=4;var d=o.readUint(n,r);if(r+=4,o.readUint(n,r),r+=4,u==t)return d}return 0}};e._bin={readFixed:function(n,t){return(n[t]<<8|n[t+1])+(n[t+2]<<8|n[t+3])/65540},readF2dot14:function(n,t){return e._bin.readShort(n,t)/16384},readInt:function(n,t){return e._bin._view(n).getInt32(t)},readInt8:function(n,t){return e._bin._view(n).getInt8(t)},readShort:function(n,t){return e._bin._view(n).getInt16(t)},readUshort:function(n,t){return e._bin._view(n).getUint16(t)},readUshorts:function(n,t,s){for(var o=[],i=0;i<s;i++)o.push(e._bin.readUshort(n,t+2*i));return o},readUint:function(n,t){return e._bin._view(n).getUint32(t)},readUint64:function(n,t){return 4294967296*e._bin.readUint(n,t)+e._bin.readUint(n,t+4)},readASCII:function(n,t,s){for(var o="",i=0;i<s;i++)o+=String.fromCharCode(n[t+i]);return o},readUnicode:function(n,t,s){for(var o="",i=0;i<s;i++){var r=n[t++]<<8|n[t++];o+=String.fromCharCode(r)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(n,t,s){var o=e._bin._tdec;return o&&t==0&&s==n.length?o.decode(n):e._bin.readASCII(n,t,s)},readBytes:function(n,t,s){for(var o=[],i=0;i<s;i++)o.push(n[t+i]);return o},readASCIIArray:function(n,t,s){for(var o=[],i=0;i<s;i++)o.push(String.fromCharCode(n[t+i]));return o},_view:function(n){return n._dataView||(n._dataView=n.buffer?new DataView(n.buffer,n.byteOffset,n.byteLength):new DataView(new Uint8Array(n).buffer))}},e._lctf={},e._lctf.parse=function(n,t,s,o,i){var r=e._bin,c={},u=t;r.readFixed(n,t),t+=4;var d=r.readUshort(n,t);t+=2;var f=r.readUshort(n,t);t+=2;var p=r.readUshort(n,t);return t+=2,c.scriptList=e._lctf.readScriptList(n,u+d),c.featureList=e._lctf.readFeatureList(n,u+f),c.lookupList=e._lctf.readLookupList(n,u+p,i),c},e._lctf.readLookupList=function(n,t,s){var o=e._bin,i=t,r=[],c=o.readUshort(n,t);t+=2;for(var u=0;u<c;u++){var d=o.readUshort(n,t);t+=2;var f=e._lctf.readLookupTable(n,i+d,s);r.push(f)}return r},e._lctf.readLookupTable=function(n,t,s){var o=e._bin,i=t,r={tabs:[]};r.ltype=o.readUshort(n,t),t+=2,r.flag=o.readUshort(n,t),t+=2;var c=o.readUshort(n,t);t+=2;for(var u=r.ltype,d=0;d<c;d++){var f=o.readUshort(n,t);t+=2;var p=s(n,u,i+f,r);r.tabs.push(p)}return r},e._lctf.numOfOnes=function(n){for(var t=0,s=0;s<32;s++)n>>>s&1&&t++;return t},e._lctf.readClassDef=function(n,t){var s=e._bin,o=[],i=s.readUshort(n,t);if(t+=2,i==1){var r=s.readUshort(n,t);t+=2;var c=s.readUshort(n,t);t+=2;for(var u=0;u<c;u++)o.push(r+u),o.push(r+u),o.push(s.readUshort(n,t)),t+=2}if(i==2){var d=s.readUshort(n,t);for(t+=2,u=0;u<d;u++)o.push(s.readUshort(n,t)),t+=2,o.push(s.readUshort(n,t)),t+=2,o.push(s.readUshort(n,t)),t+=2}return o},e._lctf.getInterval=function(n,t){for(var s=0;s<n.length;s+=3){var o=n[s],i=n[s+1];if(n[s+2],o<=t&&t<=i)return s}return-1},e._lctf.readCoverage=function(n,t){var s=e._bin,o={};o.fmt=s.readUshort(n,t),t+=2;var i=s.readUshort(n,t);return t+=2,o.fmt==1&&(o.tab=s.readUshorts(n,t,i)),o.fmt==2&&(o.tab=s.readUshorts(n,t,3*i)),o},e._lctf.coverageIndex=function(n,t){var s=n.tab;if(n.fmt==1)return s.indexOf(t);if(n.fmt==2){var o=e._lctf.getInterval(s,t);if(o!=-1)return s[o+2]+(t-s[o])}return-1},e._lctf.readFeatureList=function(n,t){var s=e._bin,o=t,i=[],r=s.readUshort(n,t);t+=2;for(var c=0;c<r;c++){var u=s.readASCII(n,t,4);t+=4;var d=s.readUshort(n,t);t+=2;var f=e._lctf.readFeatureTable(n,o+d);f.tag=u.trim(),i.push(f)}return i},e._lctf.readFeatureTable=function(n,t){var s=e._bin,o=t,i={},r=s.readUshort(n,t);t+=2,r>0&&(i.featureParams=o+r);var c=s.readUshort(n,t);t+=2,i.tab=[];for(var u=0;u<c;u++)i.tab.push(s.readUshort(n,t+2*u));return i},e._lctf.readScriptList=function(n,t){var s=e._bin,o=t,i={},r=s.readUshort(n,t);t+=2;for(var c=0;c<r;c++){var u=s.readASCII(n,t,4);t+=4;var d=s.readUshort(n,t);t+=2,i[u.trim()]=e._lctf.readScriptTable(n,o+d)}return i},e._lctf.readScriptTable=function(n,t){var s=e._bin,o=t,i={},r=s.readUshort(n,t);t+=2,r>0&&(i.default=e._lctf.readLangSysTable(n,o+r));var c=s.readUshort(n,t);t+=2;for(var u=0;u<c;u++){var d=s.readASCII(n,t,4);t+=4;var f=s.readUshort(n,t);t+=2,i[d.trim()]=e._lctf.readLangSysTable(n,o+f)}return i},e._lctf.readLangSysTable=function(n,t){var s=e._bin,o={};s.readUshort(n,t),t+=2,o.reqFeature=s.readUshort(n,t),t+=2;var i=s.readUshort(n,t);return t+=2,o.features=s.readUshorts(n,t,i),o},e.CFF={},e.CFF.parse=function(n,t,s){var o=e._bin;(n=new Uint8Array(n.buffer,t,s))[t=0],n[++t],n[++t],n[++t],t++;var i=[];t=e.CFF.readIndex(n,t,i);for(var r=[],c=0;c<i.length-1;c++)r.push(o.readASCII(n,t+i[c],i[c+1]-i[c]));t+=i[i.length-1];var u=[];t=e.CFF.readIndex(n,t,u);var d=[];for(c=0;c<u.length-1;c++)d.push(e.CFF.readDict(n,t+u[c],t+u[c+1]));t+=u[u.length-1];var f=d[0],p=[];t=e.CFF.readIndex(n,t,p);var m=[];for(c=0;c<p.length-1;c++)m.push(o.readASCII(n,t+p[c],p[c+1]-p[c]));if(t+=p[p.length-1],e.CFF.readSubrs(n,t,f),f.CharStrings){t=f.CharStrings,p=[],t=e.CFF.readIndex(n,t,p);var v=[];for(c=0;c<p.length-1;c++)v.push(o.readBytes(n,t+p[c],p[c+1]-p[c]));f.CharStrings=v}if(f.ROS){t=f.FDArray;var I=[];for(t=e.CFF.readIndex(n,t,I),f.FDArray=[],c=0;c<I.length-1;c++){var E=e.CFF.readDict(n,t+I[c],t+I[c+1]);e.CFF._readFDict(n,E,m),f.FDArray.push(E)}t+=I[I.length-1],t=f.FDSelect,f.FDSelect=[];var b=n[t];if(t++,b!=3)throw b;var S=o.readUshort(n,t);for(t+=2,c=0;c<S+1;c++)f.FDSelect.push(o.readUshort(n,t),n[t+2]),t+=3}return f.Encoding&&(f.Encoding=e.CFF.readEncoding(n,f.Encoding,f.CharStrings.length)),f.charset&&(f.charset=e.CFF.readCharset(n,f.charset,f.CharStrings.length)),e.CFF._readFDict(n,f,m),f},e.CFF._readFDict=function(n,t,s){var o;for(var i in t.Private&&(o=t.Private[1],t.Private=e.CFF.readDict(n,o,o+t.Private[0]),t.Private.Subrs&&e.CFF.readSubrs(n,o+t.Private.Subrs,t.Private)),t)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(i)!=-1&&(t[i]=s[t[i]-426+35])},e.CFF.readSubrs=function(n,t,s){var o=e._bin,i=[];t=e.CFF.readIndex(n,t,i);var r,c=i.length;r=c<1240?107:c<33900?1131:32768,s.Bias=r,s.Subrs=[];for(var u=0;u<i.length-1;u++)s.Subrs.push(o.readBytes(n,t+i[u],i[u+1]-i[u]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(n,t){for(var s=0;s<n.charset.length;s++)if(n.charset[s]==t)return s;return-1},e.CFF.glyphBySE=function(n,t){return t<0||t>255?-1:e.CFF.glyphByUnicode(n,e.CFF.tableSE[t])},e.CFF.readEncoding=function(n,t,s){e._bin;var o=[".notdef"],i=n[t];if(t++,i!=0)throw"error: unknown encoding format: "+i;var r=n[t];t++;for(var c=0;c<r;c++)o.push(n[t+c]);return o},e.CFF.readCharset=function(n,t,s){var o=e._bin,i=[".notdef"],r=n[t];if(t++,r==0)for(var c=0;c<s;c++){var u=o.readUshort(n,t);t+=2,i.push(u)}else{if(r!=1&&r!=2)throw"error: format: "+r;for(;i.length<s;){u=o.readUshort(n,t),t+=2;var d=0;for(r==1?(d=n[t],t++):(d=o.readUshort(n,t),t+=2),c=0;c<=d;c++)i.push(u),u++}}return i},e.CFF.readIndex=function(n,t,s){var o=e._bin,i=o.readUshort(n,t)+1,r=n[t+=2];if(t++,r==1)for(var c=0;c<i;c++)s.push(n[t+c]);else if(r==2)for(c=0;c<i;c++)s.push(o.readUshort(n,t+2*c));else if(r==3)for(c=0;c<i;c++)s.push(16777215&o.readUint(n,t+3*c-1));else if(i!=1)throw"unsupported offset size: "+r+", count: "+i;return(t+=i*r)-1},e.CFF.getCharString=function(n,t,s){var o=e._bin,i=n[t],r=n[t+1];n[t+2],n[t+3],n[t+4];var c=1,u=null,d=null;i<=20&&(u=i,c=1),i==12&&(u=100*i+r,c=2),21<=i&&i<=27&&(u=i,c=1),i==28&&(d=o.readShort(n,t+1),c=3),29<=i&&i<=31&&(u=i,c=1),32<=i&&i<=246&&(d=i-139,c=1),247<=i&&i<=250&&(d=256*(i-247)+r+108,c=2),251<=i&&i<=254&&(d=256*-(i-251)-r-108,c=2),i==255&&(d=o.readInt(n,t+1)/65535,c=5),s.val=d??"o"+u,s.size=c},e.CFF.readCharString=function(n,t,s){for(var o=t+s,i=e._bin,r=[];t<o;){var c=n[t],u=n[t+1];n[t+2],n[t+3],n[t+4];var d=1,f=null,p=null;c<=20&&(f=c,d=1),c==12&&(f=100*c+u,d=2),c!=19&&c!=20||(f=c,d=2),21<=c&&c<=27&&(f=c,d=1),c==28&&(p=i.readShort(n,t+1),d=3),29<=c&&c<=31&&(f=c,d=1),32<=c&&c<=246&&(p=c-139,d=1),247<=c&&c<=250&&(p=256*(c-247)+u+108,d=2),251<=c&&c<=254&&(p=256*-(c-251)-u-108,d=2),c==255&&(p=i.readInt(n,t+1)/65535,d=5),r.push(p??"o"+f),t+=d}return r},e.CFF.readDict=function(n,t,s){for(var o=e._bin,i={},r=[];t<s;){var c=n[t],u=n[t+1];n[t+2],n[t+3],n[t+4];var d=1,f=null,p=null;if(c==28&&(p=o.readShort(n,t+1),d=3),c==29&&(p=o.readInt(n,t+1),d=5),32<=c&&c<=246&&(p=c-139,d=1),247<=c&&c<=250&&(p=256*(c-247)+u+108,d=2),251<=c&&c<=254&&(p=256*-(c-251)-u-108,d=2),c==255)throw p=o.readInt(n,t+1)/65535,d=5,"unknown number";if(c==30){var m=[];for(d=1;;){var v=n[t+d];d++;var I=v>>4,E=15&v;if(I!=15&&m.push(I),E!=15&&m.push(E),E==15)break}for(var b="",S=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<m.length;T++)b+=S[m[T]];p=parseFloat(b)}c<=21&&(f=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],d=1,c==12&&(f=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][u],d=2)),f!=null?(i[f]=r.length==1?r[0]:r,r=[]):r.push(p),t+=d}return i},e.cmap={},e.cmap.parse=function(n,t,s){n=new Uint8Array(n.buffer,t,s),t=0;var o=e._bin,i={};o.readUshort(n,t),t+=2;var r=o.readUshort(n,t);t+=2;var c=[];i.tables=[];for(var u=0;u<r;u++){var d=o.readUshort(n,t);t+=2;var f=o.readUshort(n,t);t+=2;var p=o.readUint(n,t);t+=4;var m="p"+d+"e"+f,v=c.indexOf(p);if(v==-1){var I;v=i.tables.length,c.push(p);var E=o.readUshort(n,p);E==0?I=e.cmap.parse0(n,p):E==4?I=e.cmap.parse4(n,p):E==6?I=e.cmap.parse6(n,p):E==12?I=e.cmap.parse12(n,p):console.debug("unknown format: "+E,d,f,p),i.tables.push(I)}if(i[m]!=null)throw"multiple tables for one platform+encoding";i[m]=v}return i},e.cmap.parse0=function(n,t){var s=e._bin,o={};o.format=s.readUshort(n,t),t+=2;var i=s.readUshort(n,t);t+=2,s.readUshort(n,t),t+=2,o.map=[];for(var r=0;r<i-6;r++)o.map.push(n[t+r]);return o},e.cmap.parse4=function(n,t){var s=e._bin,o=t,i={};i.format=s.readUshort(n,t),t+=2;var r=s.readUshort(n,t);t+=2,s.readUshort(n,t),t+=2;var c=s.readUshort(n,t);t+=2;var u=c/2;i.searchRange=s.readUshort(n,t),t+=2,i.entrySelector=s.readUshort(n,t),t+=2,i.rangeShift=s.readUshort(n,t),t+=2,i.endCount=s.readUshorts(n,t,u),t+=2*u,t+=2,i.startCount=s.readUshorts(n,t,u),t+=2*u,i.idDelta=[];for(var d=0;d<u;d++)i.idDelta.push(s.readShort(n,t)),t+=2;for(i.idRangeOffset=s.readUshorts(n,t,u),t+=2*u,i.glyphIdArray=[];t<o+r;)i.glyphIdArray.push(s.readUshort(n,t)),t+=2;return i},e.cmap.parse6=function(n,t){var s=e._bin,o={};o.format=s.readUshort(n,t),t+=2,s.readUshort(n,t),t+=2,s.readUshort(n,t),t+=2,o.firstCode=s.readUshort(n,t),t+=2;var i=s.readUshort(n,t);t+=2,o.glyphIdArray=[];for(var r=0;r<i;r++)o.glyphIdArray.push(s.readUshort(n,t)),t+=2;return o},e.cmap.parse12=function(n,t){var s=e._bin,o={};o.format=s.readUshort(n,t),t+=2,t+=2,s.readUint(n,t),t+=4,s.readUint(n,t),t+=4;var i=s.readUint(n,t);t+=4,o.groups=[];for(var r=0;r<i;r++){var c=t+12*r,u=s.readUint(n,c+0),d=s.readUint(n,c+4),f=s.readUint(n,c+8);o.groups.push([u,d,f])}return o},e.glyf={},e.glyf.parse=function(n,t,s,o){for(var i=[],r=0;r<o.maxp.numGlyphs;r++)i.push(null);return i},e.glyf._parseGlyf=function(n,t){var s=e._bin,o=n._data,i=e._tabOffset(o,"glyf",n._offset)+n.loca[t];if(n.loca[t]==n.loca[t+1])return null;var r={};if(r.noc=s.readShort(o,i),i+=2,r.xMin=s.readShort(o,i),i+=2,r.yMin=s.readShort(o,i),i+=2,r.xMax=s.readShort(o,i),i+=2,r.yMax=s.readShort(o,i),i+=2,r.xMin>=r.xMax||r.yMin>=r.yMax)return null;if(r.noc>0){r.endPts=[];for(var c=0;c<r.noc;c++)r.endPts.push(s.readUshort(o,i)),i+=2;var u=s.readUshort(o,i);if(i+=2,o.length-i<u)return null;r.instructions=s.readBytes(o,i,u),i+=u;var d=r.endPts[r.noc-1]+1;for(r.flags=[],c=0;c<d;c++){var f=o[i];if(i++,r.flags.push(f),(8&f)!=0){var p=o[i];i++;for(var m=0;m<p;m++)r.flags.push(f),c++}}for(r.xs=[],c=0;c<d;c++){var v=(2&r.flags[c])!=0,I=(16&r.flags[c])!=0;v?(r.xs.push(I?o[i]:-o[i]),i++):I?r.xs.push(0):(r.xs.push(s.readShort(o,i)),i+=2)}for(r.ys=[],c=0;c<d;c++)v=(4&r.flags[c])!=0,I=(32&r.flags[c])!=0,v?(r.ys.push(I?o[i]:-o[i]),i++):I?r.ys.push(0):(r.ys.push(s.readShort(o,i)),i+=2);var E=0,b=0;for(c=0;c<d;c++)E+=r.xs[c],b+=r.ys[c],r.xs[c]=E,r.ys[c]=b}else{var S;r.parts=[];do{S=s.readUshort(o,i),i+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(r.parts.push(T),T.glyphIndex=s.readUshort(o,i),i+=2,1&S){var k=s.readShort(o,i);i+=2;var y=s.readShort(o,i);i+=2}else k=s.readInt8(o,i),i++,y=s.readInt8(o,i),i++;2&S?(T.m.tx=k,T.m.ty=y):(T.p1=k,T.p2=y),8&S?(T.m.a=T.m.d=s.readF2dot14(o,i),i+=2):64&S?(T.m.a=s.readF2dot14(o,i),i+=2,T.m.d=s.readF2dot14(o,i),i+=2):128&S&&(T.m.a=s.readF2dot14(o,i),i+=2,T.m.b=s.readF2dot14(o,i),i+=2,T.m.c=s.readF2dot14(o,i),i+=2,T.m.d=s.readF2dot14(o,i),i+=2)}while(32&S);if(256&S){var w=s.readUshort(o,i);for(i+=2,r.instr=[],c=0;c<w;c++)r.instr.push(o[i]),i++}}return r},e.GDEF={},e.GDEF.parse=function(n,t,s,o){var i=t;t+=4;var r=e._bin.readUshort(n,t);return{glyphClassDef:r===0?null:e._lctf.readClassDef(n,i+r)}},e.GPOS={},e.GPOS.parse=function(n,t,s,o){return e._lctf.parse(n,t,s,o,e.GPOS.subt)},e.GPOS.subt=function(n,t,s,o){var i=e._bin,r=s,c={};if(c.fmt=i.readUshort(n,s),s+=2,t==1||t==2||t==3||t==7||t==8&&c.fmt<=2){var u=i.readUshort(n,s);s+=2,c.coverage=e._lctf.readCoverage(n,u+r)}if(t==1&&c.fmt==1){var d=i.readUshort(n,s);s+=2,d!=0&&(c.pos=e.GPOS.readValueRecord(n,s,d))}else if(t==2&&c.fmt>=1&&c.fmt<=2){d=i.readUshort(n,s),s+=2;var f=i.readUshort(n,s);s+=2;var p=e._lctf.numOfOnes(d),m=e._lctf.numOfOnes(f);if(c.fmt==1){c.pairsets=[];var v=i.readUshort(n,s);s+=2;for(var I=0;I<v;I++){var E=r+i.readUshort(n,s);s+=2;var b=i.readUshort(n,E);E+=2;for(var S=[],T=0;T<b;T++){var k=i.readUshort(n,E);E+=2,d!=0&&(g=e.GPOS.readValueRecord(n,E,d),E+=2*p),f!=0&&(L=e.GPOS.readValueRecord(n,E,f),E+=2*m),S.push({gid2:k,val1:g,val2:L})}c.pairsets.push(S)}}if(c.fmt==2){var y=i.readUshort(n,s);s+=2;var w=i.readUshort(n,s);s+=2;var O=i.readUshort(n,s);s+=2;var C=i.readUshort(n,s);for(s+=2,c.classDef1=e._lctf.readClassDef(n,r+y),c.classDef2=e._lctf.readClassDef(n,r+w),c.matrix=[],I=0;I<O;I++){var x=[];for(T=0;T<C;T++){var g=null,L=null;d!=0&&(g=e.GPOS.readValueRecord(n,s,d),s+=2*p),f!=0&&(L=e.GPOS.readValueRecord(n,s,f),s+=2*m),x.push({val1:g,val2:L})}c.matrix.push(x)}}}else if(t==4&&c.fmt==1)c.markCoverage=e._lctf.readCoverage(n,i.readUshort(n,s)+r),c.baseCoverage=e._lctf.readCoverage(n,i.readUshort(n,s+2)+r),c.markClassCount=i.readUshort(n,s+4),c.markArray=e.GPOS.readMarkArray(n,i.readUshort(n,s+6)+r),c.baseArray=e.GPOS.readBaseArray(n,i.readUshort(n,s+8)+r,c.markClassCount);else if(t==6&&c.fmt==1)c.mark1Coverage=e._lctf.readCoverage(n,i.readUshort(n,s)+r),c.mark2Coverage=e._lctf.readCoverage(n,i.readUshort(n,s+2)+r),c.markClassCount=i.readUshort(n,s+4),c.mark1Array=e.GPOS.readMarkArray(n,i.readUshort(n,s+6)+r),c.mark2Array=e.GPOS.readBaseArray(n,i.readUshort(n,s+8)+r,c.markClassCount);else{if(t==9&&c.fmt==1){var _=i.readUshort(n,s);s+=2;var N=i.readUint(n,s);if(s+=4,o.ltype==9)o.ltype=_;else if(o.ltype!=_)throw"invalid extension substitution";return e.GPOS.subt(n,o.ltype,r+N)}console.debug("unsupported GPOS table LookupType",t,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(n,t,s){var o=e._bin,i=[];return i.push(1&s?o.readShort(n,t):0),t+=1&s?2:0,i.push(2&s?o.readShort(n,t):0),t+=2&s?2:0,i.push(4&s?o.readShort(n,t):0),t+=4&s?2:0,i.push(8&s?o.readShort(n,t):0),t+=8&s?2:0,i},e.GPOS.readBaseArray=function(n,t,s){var o=e._bin,i=[],r=t,c=o.readUshort(n,t);t+=2;for(var u=0;u<c;u++){for(var d=[],f=0;f<s;f++)d.push(e.GPOS.readAnchorRecord(n,r+o.readUshort(n,t))),t+=2;i.push(d)}return i},e.GPOS.readMarkArray=function(n,t){var s=e._bin,o=[],i=t,r=s.readUshort(n,t);t+=2;for(var c=0;c<r;c++){var u=e.GPOS.readAnchorRecord(n,s.readUshort(n,t+2)+i);u.markClass=s.readUshort(n,t),o.push(u),t+=4}return o},e.GPOS.readAnchorRecord=function(n,t){var s=e._bin,o={};return o.fmt=s.readUshort(n,t),o.x=s.readShort(n,t+2),o.y=s.readShort(n,t+4),o},e.GSUB={},e.GSUB.parse=function(n,t,s,o){return e._lctf.parse(n,t,s,o,e.GSUB.subt)},e.GSUB.subt=function(n,t,s,o){var i=e._bin,r=s,c={};if(c.fmt=i.readUshort(n,s),s+=2,t!=1&&t!=2&&t!=4&&t!=5&&t!=6)return null;if(t==1||t==2||t==4||t==5&&c.fmt<=2||t==6&&c.fmt<=2){var u=i.readUshort(n,s);s+=2,c.coverage=e._lctf.readCoverage(n,r+u)}if(t==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=i.readShort(n,s),s+=2;else if(c.fmt==2){var d=i.readUshort(n,s);s+=2,c.newg=i.readUshorts(n,s,d),s+=2*c.newg.length}}else if(t==2&&c.fmt==1){d=i.readUshort(n,s),s+=2,c.seqs=[];for(var f=0;f<d;f++){var p=i.readUshort(n,s)+r;s+=2;var m=i.readUshort(n,p);c.seqs.push(i.readUshorts(n,p+2,m))}}else if(t==4)for(c.vals=[],d=i.readUshort(n,s),s+=2,f=0;f<d;f++){var v=i.readUshort(n,s);s+=2,c.vals.push(e.GSUB.readLigatureSet(n,r+v))}else if(t==5&&c.fmt==2){if(c.fmt==2){var I=i.readUshort(n,s);s+=2,c.cDef=e._lctf.readClassDef(n,r+I),c.scset=[];var E=i.readUshort(n,s);for(s+=2,f=0;f<E;f++){var b=i.readUshort(n,s);s+=2,c.scset.push(b==0?null:e.GSUB.readSubClassSet(n,r+b))}}}else if(t==6&&c.fmt==3){if(c.fmt==3){for(f=0;f<3;f++){d=i.readUshort(n,s),s+=2;for(var S=[],T=0;T<d;T++)S.push(e._lctf.readCoverage(n,r+i.readUshort(n,s+2*T)));s+=2*d,f==0&&(c.backCvg=S),f==1&&(c.inptCvg=S),f==2&&(c.ahedCvg=S)}d=i.readUshort(n,s),s+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(n,s,d)}}else{if(t==7&&c.fmt==1){var k=i.readUshort(n,s);s+=2;var y=i.readUint(n,s);if(s+=4,o.ltype==9)o.ltype=k;else if(o.ltype!=k)throw"invalid extension substitution";return e.GSUB.subt(n,o.ltype,r+y)}console.debug("unsupported GSUB table LookupType",t,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(n,t){var s=e._bin.readUshort,o=t,i=[],r=s(n,t);t+=2;for(var c=0;c<r;c++){var u=s(n,t);t+=2,i.push(e.GSUB.readSubClassRule(n,o+u))}return i},e.GSUB.readSubClassRule=function(n,t){var s=e._bin.readUshort,o={},i=s(n,t),r=s(n,t+=2);t+=2,o.input=[];for(var c=0;c<i-1;c++)o.input.push(s(n,t)),t+=2;return o.substLookupRecords=e.GSUB.readSubstLookupRecords(n,t,r),o},e.GSUB.readSubstLookupRecords=function(n,t,s){for(var o=e._bin.readUshort,i=[],r=0;r<s;r++)i.push(o(n,t),o(n,t+2)),t+=4;return i},e.GSUB.readChainSubClassSet=function(n,t){var s=e._bin,o=t,i=[],r=s.readUshort(n,t);t+=2;for(var c=0;c<r;c++){var u=s.readUshort(n,t);t+=2,i.push(e.GSUB.readChainSubClassRule(n,o+u))}return i},e.GSUB.readChainSubClassRule=function(n,t){for(var s=e._bin,o={},i=["backtrack","input","lookahead"],r=0;r<i.length;r++){var c=s.readUshort(n,t);t+=2,r==1&&c--,o[i[r]]=s.readUshorts(n,t,c),t+=2*o[i[r]].length}return c=s.readUshort(n,t),t+=2,o.subst=s.readUshorts(n,t,2*c),t+=2*o.subst.length,o},e.GSUB.readLigatureSet=function(n,t){var s=e._bin,o=t,i=[],r=s.readUshort(n,t);t+=2;for(var c=0;c<r;c++){var u=s.readUshort(n,t);t+=2,i.push(e.GSUB.readLigature(n,o+u))}return i},e.GSUB.readLigature=function(n,t){var s=e._bin,o={chain:[]};o.nglyph=s.readUshort(n,t),t+=2;var i=s.readUshort(n,t);t+=2;for(var r=0;r<i-1;r++)o.chain.push(s.readUshort(n,t)),t+=2;return o},e.head={},e.head.parse=function(n,t,s){var o=e._bin,i={};return o.readFixed(n,t),t+=4,i.fontRevision=o.readFixed(n,t),t+=4,o.readUint(n,t),t+=4,o.readUint(n,t),t+=4,i.flags=o.readUshort(n,t),t+=2,i.unitsPerEm=o.readUshort(n,t),t+=2,i.created=o.readUint64(n,t),t+=8,i.modified=o.readUint64(n,t),t+=8,i.xMin=o.readShort(n,t),t+=2,i.yMin=o.readShort(n,t),t+=2,i.xMax=o.readShort(n,t),t+=2,i.yMax=o.readShort(n,t),t+=2,i.macStyle=o.readUshort(n,t),t+=2,i.lowestRecPPEM=o.readUshort(n,t),t+=2,i.fontDirectionHint=o.readShort(n,t),t+=2,i.indexToLocFormat=o.readShort(n,t),t+=2,i.glyphDataFormat=o.readShort(n,t),t+=2,i},e.hhea={},e.hhea.parse=function(n,t,s){var o=e._bin,i={};return o.readFixed(n,t),t+=4,i.ascender=o.readShort(n,t),t+=2,i.descender=o.readShort(n,t),t+=2,i.lineGap=o.readShort(n,t),t+=2,i.advanceWidthMax=o.readUshort(n,t),t+=2,i.minLeftSideBearing=o.readShort(n,t),t+=2,i.minRightSideBearing=o.readShort(n,t),t+=2,i.xMaxExtent=o.readShort(n,t),t+=2,i.caretSlopeRise=o.readShort(n,t),t+=2,i.caretSlopeRun=o.readShort(n,t),t+=2,i.caretOffset=o.readShort(n,t),t+=2,t+=8,i.metricDataFormat=o.readShort(n,t),t+=2,i.numberOfHMetrics=o.readUshort(n,t),t+=2,i},e.hmtx={},e.hmtx.parse=function(n,t,s,o){for(var i=e._bin,r={aWidth:[],lsBearing:[]},c=0,u=0,d=0;d<o.maxp.numGlyphs;d++)d<o.hhea.numberOfHMetrics&&(c=i.readUshort(n,t),t+=2,u=i.readShort(n,t),t+=2),r.aWidth.push(c),r.lsBearing.push(u);return r},e.kern={},e.kern.parse=function(n,t,s,o){var i=e._bin,r=i.readUshort(n,t);if(t+=2,r==1)return e.kern.parseV1(n,t-2,s,o);var c=i.readUshort(n,t);t+=2;for(var u={glyph1:[],rval:[]},d=0;d<c;d++){t+=2,s=i.readUshort(n,t),t+=2;var f=i.readUshort(n,t);t+=2;var p=f>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;t=e.kern.readFormat0(n,t,u)}return u},e.kern.parseV1=function(n,t,s,o){var i=e._bin;i.readFixed(n,t),t+=4;var r=i.readUint(n,t);t+=4;for(var c={glyph1:[],rval:[]},u=0;u<r;u++){i.readUint(n,t),t+=4;var d=i.readUshort(n,t);t+=2,i.readUshort(n,t),t+=2;var f=d>>>8;if((f&=15)!=0)throw"unknown kern table format: "+f;t=e.kern.readFormat0(n,t,c)}return c},e.kern.readFormat0=function(n,t,s){var o=e._bin,i=-1,r=o.readUshort(n,t);t+=2,o.readUshort(n,t),t+=2,o.readUshort(n,t),t+=2,o.readUshort(n,t),t+=2;for(var c=0;c<r;c++){var u=o.readUshort(n,t);t+=2;var d=o.readUshort(n,t);t+=2;var f=o.readShort(n,t);t+=2,u!=i&&(s.glyph1.push(u),s.rval.push({glyph2:[],vals:[]}));var p=s.rval[s.rval.length-1];p.glyph2.push(d),p.vals.push(f),i=u}return t},e.loca={},e.loca.parse=function(n,t,s,o){var i=e._bin,r=[],c=o.head.indexToLocFormat,u=o.maxp.numGlyphs+1;if(c==0)for(var d=0;d<u;d++)r.push(i.readUshort(n,t+(d<<1))<<1);if(c==1)for(d=0;d<u;d++)r.push(i.readUint(n,t+(d<<2)));return r},e.maxp={},e.maxp.parse=function(n,t,s){var o=e._bin,i={},r=o.readUint(n,t);return t+=4,i.numGlyphs=o.readUshort(n,t),t+=2,r==65536&&(i.maxPoints=o.readUshort(n,t),t+=2,i.maxContours=o.readUshort(n,t),t+=2,i.maxCompositePoints=o.readUshort(n,t),t+=2,i.maxCompositeContours=o.readUshort(n,t),t+=2,i.maxZones=o.readUshort(n,t),t+=2,i.maxTwilightPoints=o.readUshort(n,t),t+=2,i.maxStorage=o.readUshort(n,t),t+=2,i.maxFunctionDefs=o.readUshort(n,t),t+=2,i.maxInstructionDefs=o.readUshort(n,t),t+=2,i.maxStackElements=o.readUshort(n,t),t+=2,i.maxSizeOfInstructions=o.readUshort(n,t),t+=2,i.maxComponentElements=o.readUshort(n,t),t+=2,i.maxComponentDepth=o.readUshort(n,t),t+=2),i},e.name={},e.name.parse=function(n,t,s){var o=e._bin,i={};o.readUshort(n,t),t+=2;var r=o.readUshort(n,t);t+=2,o.readUshort(n,t);for(var c,u=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=t+=2,f=0;f<r;f++){var p=o.readUshort(n,t);t+=2;var m=o.readUshort(n,t);t+=2;var v=o.readUshort(n,t);t+=2;var I=o.readUshort(n,t);t+=2;var E=o.readUshort(n,t);t+=2;var b=o.readUshort(n,t);t+=2;var S,T=u[I],k=d+12*r+b;if(p==0)S=o.readUnicode(n,k,E/2);else if(p==3&&m==0)S=o.readUnicode(n,k,E/2);else if(m==0)S=o.readASCII(n,k,E);else if(m==1)S=o.readUnicode(n,k,E/2);else if(m==3)S=o.readUnicode(n,k,E/2);else{if(p!=1)throw"unknown encoding "+m+", platformID: "+p;S=o.readASCII(n,k,E),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var y="p"+p+","+v.toString(16);i[y]==null&&(i[y]={}),i[y][T!==void 0?T:I]=S,i[y]._lang=v}for(var w in i)if(i[w].postScriptName!=null&&i[w]._lang==1033)return i[w];for(var w in i)if(i[w].postScriptName!=null&&i[w]._lang==0)return i[w];for(var w in i)if(i[w].postScriptName!=null&&i[w]._lang==3084)return i[w];for(var w in i)if(i[w].postScriptName!=null)return i[w];for(var w in i){c=w;break}return console.debug("returning name table with languageID "+i[c]._lang),i[c]},e["OS/2"]={},e["OS/2"].parse=function(n,t,s){var o=e._bin.readUshort(n,t);t+=2;var i={};if(o==0)e["OS/2"].version0(n,t,i);else if(o==1)e["OS/2"].version1(n,t,i);else if(o==2||o==3||o==4)e["OS/2"].version2(n,t,i);else{if(o!=5)throw"unknown OS/2 table version: "+o;e["OS/2"].version5(n,t,i)}return i},e["OS/2"].version0=function(n,t,s){var o=e._bin;return s.xAvgCharWidth=o.readShort(n,t),t+=2,s.usWeightClass=o.readUshort(n,t),t+=2,s.usWidthClass=o.readUshort(n,t),t+=2,s.fsType=o.readUshort(n,t),t+=2,s.ySubscriptXSize=o.readShort(n,t),t+=2,s.ySubscriptYSize=o.readShort(n,t),t+=2,s.ySubscriptXOffset=o.readShort(n,t),t+=2,s.ySubscriptYOffset=o.readShort(n,t),t+=2,s.ySuperscriptXSize=o.readShort(n,t),t+=2,s.ySuperscriptYSize=o.readShort(n,t),t+=2,s.ySuperscriptXOffset=o.readShort(n,t),t+=2,s.ySuperscriptYOffset=o.readShort(n,t),t+=2,s.yStrikeoutSize=o.readShort(n,t),t+=2,s.yStrikeoutPosition=o.readShort(n,t),t+=2,s.sFamilyClass=o.readShort(n,t),t+=2,s.panose=o.readBytes(n,t,10),t+=10,s.ulUnicodeRange1=o.readUint(n,t),t+=4,s.ulUnicodeRange2=o.readUint(n,t),t+=4,s.ulUnicodeRange3=o.readUint(n,t),t+=4,s.ulUnicodeRange4=o.readUint(n,t),t+=4,s.achVendID=[o.readInt8(n,t),o.readInt8(n,t+1),o.readInt8(n,t+2),o.readInt8(n,t+3)],t+=4,s.fsSelection=o.readUshort(n,t),t+=2,s.usFirstCharIndex=o.readUshort(n,t),t+=2,s.usLastCharIndex=o.readUshort(n,t),t+=2,s.sTypoAscender=o.readShort(n,t),t+=2,s.sTypoDescender=o.readShort(n,t),t+=2,s.sTypoLineGap=o.readShort(n,t),t+=2,s.usWinAscent=o.readUshort(n,t),t+=2,s.usWinDescent=o.readUshort(n,t),t+=2},e["OS/2"].version1=function(n,t,s){var o=e._bin;return t=e["OS/2"].version0(n,t,s),s.ulCodePageRange1=o.readUint(n,t),t+=4,s.ulCodePageRange2=o.readUint(n,t),t+=4},e["OS/2"].version2=function(n,t,s){var o=e._bin;return t=e["OS/2"].version1(n,t,s),s.sxHeight=o.readShort(n,t),t+=2,s.sCapHeight=o.readShort(n,t),t+=2,s.usDefault=o.readUshort(n,t),t+=2,s.usBreak=o.readUshort(n,t),t+=2,s.usMaxContext=o.readUshort(n,t),t+=2},e["OS/2"].version5=function(n,t,s){var o=e._bin;return t=e["OS/2"].version2(n,t,s),s.usLowerOpticalPointSize=o.readUshort(n,t),t+=2,s.usUpperOpticalPointSize=o.readUshort(n,t),t+=2},e.post={},e.post.parse=function(n,t,s){var o=e._bin,i={};return i.version=o.readFixed(n,t),t+=4,i.italicAngle=o.readFixed(n,t),t+=4,i.underlinePosition=o.readShort(n,t),t+=2,i.underlineThickness=o.readShort(n,t),t+=2,i},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(n,t){var s=n.cmap,o=-1;if(s.p0e4!=null?o=s.p0e4:s.p3e1!=null?o=s.p3e1:s.p1e0!=null?o=s.p1e0:s.p0e3!=null&&(o=s.p0e3),o==-1)throw"no familiar platform and encoding!";var i=s.tables[o];if(i.format==0)return t>=i.map.length?0:i.map[t];if(i.format==4){for(var r=-1,c=0;c<i.endCount.length;c++)if(t<=i.endCount[c]){r=c;break}return r==-1||i.startCount[r]>t?0:65535&(i.idRangeOffset[r]!=0?i.glyphIdArray[t-i.startCount[r]+(i.idRangeOffset[r]>>1)-(i.idRangeOffset.length-r)]:t+i.idDelta[r])}if(i.format==12){if(t>i.groups[i.groups.length-1][1])return 0;for(c=0;c<i.groups.length;c++){var u=i.groups[c];if(u[0]<=t&&t<=u[1])return u[2]+(t-u[0])}return 0}throw"unknown cmap table format "+i.format},e.U.glyphToPath=function(n,t){var s={cmds:[],crds:[]};if(n.SVG&&n.SVG.entries[t]){var o=n.SVG.entries[t];return o==null?s:(typeof o=="string"&&(o=e.SVG.toPath(o),n.SVG.entries[t]=o),o)}if(n.CFF){var i={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:n.CFF.Private?n.CFF.Private.defaultWidthX:0,open:!1},r=n.CFF,c=n.CFF.Private;if(r.ROS){for(var u=0;r.FDSelect[u+2]<=t;)u+=2;c=r.FDArray[r.FDSelect[u+1]].Private}e.U._drawCFF(n.CFF.CharStrings[t],i,r,c,s)}else n.glyf&&e.U._drawGlyf(t,n,s);return s},e.U._drawGlyf=function(n,t,s){var o=t.glyf[n];o==null&&(o=t.glyf[n]=e.glyf._parseGlyf(t,n)),o!=null&&(o.noc>-1?e.U._simpleGlyph(o,s):e.U._compoGlyph(o,t,s))},e.U._simpleGlyph=function(n,t){for(var s=0;s<n.noc;s++){for(var o=s==0?0:n.endPts[s-1]+1,i=n.endPts[s],r=o;r<=i;r++){var c=r==o?i:r-1,u=r==i?o:r+1,d=1&n.flags[r],f=1&n.flags[c],p=1&n.flags[u],m=n.xs[r],v=n.ys[r];if(r==o)if(d){if(!f){e.U.P.moveTo(t,m,v);continue}e.U.P.moveTo(t,n.xs[c],n.ys[c])}else f?e.U.P.moveTo(t,n.xs[c],n.ys[c]):e.U.P.moveTo(t,(n.xs[c]+m)/2,(n.ys[c]+v)/2);d?f&&e.U.P.lineTo(t,m,v):p?e.U.P.qcurveTo(t,m,v,n.xs[u],n.ys[u]):e.U.P.qcurveTo(t,m,v,(m+n.xs[u])/2,(v+n.ys[u])/2)}e.U.P.closePath(t)}},e.U._compoGlyph=function(n,t,s){for(var o=0;o<n.parts.length;o++){var i={cmds:[],crds:[]},r=n.parts[o];e.U._drawGlyf(r.glyphIndex,t,i);for(var c=r.m,u=0;u<i.crds.length;u+=2){var d=i.crds[u],f=i.crds[u+1];s.crds.push(d*c.a+f*c.b+c.tx),s.crds.push(d*c.c+f*c.d+c.ty)}for(u=0;u<i.cmds.length;u++)s.cmds.push(i.cmds[u])}},e.U._getGlyphClass=function(n,t){var s=e._lctf.getInterval(t,n);return s==-1?0:t[s+2]},e.U._applySubs=function(n,t,s,o){for(var i=n.length-t-1,r=0;r<s.tabs.length;r++)if(s.tabs[r]!=null){var c,u=s.tabs[r];if(!u.coverage||(c=e._lctf.coverageIndex(u.coverage,n[t]))!=-1){if(s.ltype==1)n[t],u.fmt==1?n[t]=n[t]+u.delta:n[t]=u.newg[c];else if(s.ltype==4)for(var d=u.vals[c],f=0;f<d.length;f++){var p=d[f],m=p.chain.length;if(!(m>i)){for(var v=!0,I=0,E=0;E<m;E++){for(;n[t+I+(1+E)]==-1;)I++;p.chain[E]!=n[t+I+(1+E)]&&(v=!1)}if(v){for(n[t]=p.nglyph,E=0;E<m+I;E++)n[t+E+1]=-1;break}}}else if(s.ltype==5&&u.fmt==2)for(var b=e._lctf.getInterval(u.cDef,n[t]),S=u.cDef[b+2],T=u.scset[S],k=0;k<T.length;k++){var y=T[k],w=y.input;if(!(w.length>i)){for(v=!0,E=0;E<w.length;E++){var O=e._lctf.getInterval(u.cDef,n[t+1+E]);if(b==-1&&u.cDef[O+2]!=w[E]){v=!1;break}}if(v){var C=y.substLookupRecords;for(f=0;f<C.length;f+=2)C[f],C[f+1]}}}else if(s.ltype==6&&u.fmt==3){if(!e.U._glsCovered(n,u.backCvg,t-u.backCvg.length)||!e.U._glsCovered(n,u.inptCvg,t)||!e.U._glsCovered(n,u.ahedCvg,t+u.inptCvg.length))continue;var x=u.lookupRec;for(k=0;k<x.length;k+=2){b=x[k];var g=o[x[k+1]];e.U._applySubs(n,t+b,g,o)}}}}},e.U._glsCovered=function(n,t,s){for(var o=0;o<t.length;o++)if(e._lctf.coverageIndex(t[o],n[s+o])==-1)return!1;return!0},e.U.glyphsToPath=function(n,t,s){for(var o={cmds:[],crds:[]},i=0,r=0;r<t.length;r++){var c=t[r];if(c!=-1){for(var u=r<t.length-1&&t[r+1]!=-1?t[r+1]:0,d=e.U.glyphToPath(n,c),f=0;f<d.crds.length;f+=2)o.crds.push(d.crds[f]+i),o.crds.push(d.crds[f+1]);for(s&&o.cmds.push(s),f=0;f<d.cmds.length;f++)o.cmds.push(d.cmds[f]);s&&o.cmds.push("X"),i+=n.hmtx.aWidth[c],r<t.length-1&&(i+=e.U.getPairAdjustment(n,c,u))}}return o},e.U.P={},e.U.P.moveTo=function(n,t,s){n.cmds.push("M"),n.crds.push(t,s)},e.U.P.lineTo=function(n,t,s){n.cmds.push("L"),n.crds.push(t,s)},e.U.P.curveTo=function(n,t,s,o,i,r,c){n.cmds.push("C"),n.crds.push(t,s,o,i,r,c)},e.U.P.qcurveTo=function(n,t,s,o,i){n.cmds.push("Q"),n.crds.push(t,s,o,i)},e.U.P.closePath=function(n){n.cmds.push("Z")},e.U._drawCFF=function(n,t,s,o,i){for(var r=t.stack,c=t.nStems,u=t.haveWidth,d=t.width,f=t.open,p=0,m=t.x,v=t.y,I=0,E=0,b=0,S=0,T=0,k=0,y=0,w=0,O=0,C=0,x={val:0,size:0};p<n.length;){e.CFF.getCharString(n,p,x);var g=x.val;if(p+=x.size,g=="o1"||g=="o18")r.length%2!=0&&!u&&(d=r.shift()+o.nominalWidthX),c+=r.length>>1,r.length=0,u=!0;else if(g=="o3"||g=="o23")r.length%2!=0&&!u&&(d=r.shift()+o.nominalWidthX),c+=r.length>>1,r.length=0,u=!0;else if(g=="o4")r.length>1&&!u&&(d=r.shift()+o.nominalWidthX,u=!0),f&&e.U.P.closePath(i),v+=r.pop(),e.U.P.moveTo(i,m,v),f=!0;else if(g=="o5")for(;r.length>0;)m+=r.shift(),v+=r.shift(),e.U.P.lineTo(i,m,v);else if(g=="o6"||g=="o7")for(var L=r.length,_=g=="o6",N=0;N<L;N++){var A=r.shift();_?m+=A:v+=A,_=!_,e.U.P.lineTo(i,m,v)}else if(g=="o8"||g=="o24"){L=r.length;for(var F=0;F+6<=L;)I=m+r.shift(),E=v+r.shift(),b=I+r.shift(),S=E+r.shift(),m=b+r.shift(),v=S+r.shift(),e.U.P.curveTo(i,I,E,b,S,m,v),F+=6;g=="o24"&&(m+=r.shift(),v+=r.shift(),e.U.P.lineTo(i,m,v))}else{if(g=="o11")break;if(g=="o1234"||g=="o1235"||g=="o1236"||g=="o1237")g=="o1234"&&(E=v,b=(I=m+r.shift())+r.shift(),C=S=E+r.shift(),k=S,w=v,m=(y=(T=(O=b+r.shift())+r.shift())+r.shift())+r.shift(),e.U.P.curveTo(i,I,E,b,S,O,C),e.U.P.curveTo(i,T,k,y,w,m,v)),g=="o1235"&&(I=m+r.shift(),E=v+r.shift(),b=I+r.shift(),S=E+r.shift(),O=b+r.shift(),C=S+r.shift(),T=O+r.shift(),k=C+r.shift(),y=T+r.shift(),w=k+r.shift(),m=y+r.shift(),v=w+r.shift(),r.shift(),e.U.P.curveTo(i,I,E,b,S,O,C),e.U.P.curveTo(i,T,k,y,w,m,v)),g=="o1236"&&(I=m+r.shift(),E=v+r.shift(),b=I+r.shift(),C=S=E+r.shift(),k=S,y=(T=(O=b+r.shift())+r.shift())+r.shift(),w=k+r.shift(),m=y+r.shift(),e.U.P.curveTo(i,I,E,b,S,O,C),e.U.P.curveTo(i,T,k,y,w,m,v)),g=="o1237"&&(I=m+r.shift(),E=v+r.shift(),b=I+r.shift(),S=E+r.shift(),O=b+r.shift(),C=S+r.shift(),T=O+r.shift(),k=C+r.shift(),y=T+r.shift(),w=k+r.shift(),Math.abs(y-m)>Math.abs(w-v)?m=y+r.shift():v=w+r.shift(),e.U.P.curveTo(i,I,E,b,S,O,C),e.U.P.curveTo(i,T,k,y,w,m,v));else if(g=="o14"){if(r.length>0&&!u&&(d=r.shift()+s.nominalWidthX,u=!0),r.length==4){var H=r.shift(),X=r.shift(),D=r.shift(),U=r.shift(),M=e.CFF.glyphBySE(s,D),P=e.CFF.glyphBySE(s,U);e.U._drawCFF(s.CharStrings[M],t,s,o,i),t.x=H,t.y=X,e.U._drawCFF(s.CharStrings[P],t,s,o,i)}f&&(e.U.P.closePath(i),f=!1)}else if(g=="o19"||g=="o20")r.length%2!=0&&!u&&(d=r.shift()+o.nominalWidthX),c+=r.length>>1,r.length=0,u=!0,p+=c+7>>3;else if(g=="o21")r.length>2&&!u&&(d=r.shift()+o.nominalWidthX,u=!0),v+=r.pop(),m+=r.pop(),f&&e.U.P.closePath(i),e.U.P.moveTo(i,m,v),f=!0;else if(g=="o22")r.length>1&&!u&&(d=r.shift()+o.nominalWidthX,u=!0),m+=r.pop(),f&&e.U.P.closePath(i),e.U.P.moveTo(i,m,v),f=!0;else if(g=="o25"){for(;r.length>6;)m+=r.shift(),v+=r.shift(),e.U.P.lineTo(i,m,v);I=m+r.shift(),E=v+r.shift(),b=I+r.shift(),S=E+r.shift(),m=b+r.shift(),v=S+r.shift(),e.U.P.curveTo(i,I,E,b,S,m,v)}else if(g=="o26")for(r.length%2&&(m+=r.shift());r.length>0;)I=m,E=v+r.shift(),m=b=I+r.shift(),v=(S=E+r.shift())+r.shift(),e.U.P.curveTo(i,I,E,b,S,m,v);else if(g=="o27")for(r.length%2&&(v+=r.shift());r.length>0;)E=v,b=(I=m+r.shift())+r.shift(),S=E+r.shift(),m=b+r.shift(),v=S,e.U.P.curveTo(i,I,E,b,S,m,v);else if(g=="o10"||g=="o29"){var R=g=="o10"?o:s;if(r.length==0)console.debug("error: empty stack");else{var B=r.pop(),$=R.Subrs[B+R.Bias];t.x=m,t.y=v,t.nStems=c,t.haveWidth=u,t.width=d,t.open=f,e.U._drawCFF($,t,s,o,i),m=t.x,v=t.y,c=t.nStems,u=t.haveWidth,d=t.width,f=t.open}}else if(g=="o30"||g=="o31"){var W=r.length,z=(F=0,g=="o31");for(F+=W-(L=-3&W);F<L;)z?(E=v,b=(I=m+r.shift())+r.shift(),v=(S=E+r.shift())+r.shift(),L-F==5?(m=b+r.shift(),F++):m=b,z=!1):(I=m,E=v+r.shift(),b=I+r.shift(),S=E+r.shift(),m=b+r.shift(),L-F==5?(v=S+r.shift(),F++):v=S,z=!0),e.U.P.curveTo(i,I,E,b,S,m,v),F+=4}else{if((g+"").charAt(0)=="o")throw console.debug("Unknown operation: "+g,n),g;r.push(g)}}}t.x=m,t.y=v,t.nStems=c,t.haveWidth=u,t.width=d,t.open=f};var a=e,l={Typr:a};return h.Typr=a,h.default=l,Object.defineProperty(h,"__esModule",{value:!0}),h}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Qn(){return function(h){var e=Uint8Array,a=Uint16Array,l=Uint32Array,n=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),t=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(g,L){for(var _=new a(31),N=0;N<31;++N)_[N]=L+=1<<g[N-1];var A=new l(_[30]);for(N=1;N<30;++N)for(var F=_[N];F<_[N+1];++F)A[F]=F-_[N]<<5|N;return[_,A]},i=o(n,2),r=i[0],c=i[1];r[28]=258,c[258]=28;for(var u=o(t,0)[0],d=new a(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(g,L,_){for(var N=g.length,A=0,F=new a(L);A<N;++A)++F[g[A]-1];var H,X=new a(L);for(A=0;A<L;++A)X[A]=X[A-1]+F[A-1]<<1;{H=new a(1<<L);var D=15-L;for(A=0;A<N;++A)if(g[A])for(var U=A<<4|g[A],M=L-g[A],P=X[g[A]-1]++<<M,R=P|(1<<M)-1;P<=R;++P)H[d[P]>>>D]=U}return H},v=new e(288);for(f=0;f<144;++f)v[f]=8;for(f=144;f<256;++f)v[f]=9;for(f=256;f<280;++f)v[f]=7;for(f=280;f<288;++f)v[f]=8;var I=new e(32);for(f=0;f<32;++f)I[f]=5;var E=m(v,9),b=m(I,5),S=function(g){for(var L=g[0],_=1;_<g.length;++_)g[_]>L&&(L=g[_]);return L},T=function(g,L,_){var N=L/8|0;return(g[N]|g[N+1]<<8)>>(7&L)&_},k=function(g,L){var _=L/8|0;return(g[_]|g[_+1]<<8|g[_+2]<<16)>>(7&L)},y=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],w=function(g,L,_){var N=new Error(L||y[g]);if(N.code=g,Error.captureStackTrace&&Error.captureStackTrace(N,w),!_)throw N;return N},O=function(g,L,_){var N=g.length;if(!N||_&&!_.l&&N<5)return L||new e(0);var A=!L||_,F=!_||_.i;_||(_={}),L||(L=new e(3*N));var H,X=function(Z){var Fe=L.length;if(Z>Fe){var Ie=new e(Math.max(2*Fe,Z));Ie.set(L),L=Ie}},D=_.f||0,U=_.p||0,M=_.b||0,P=_.l,R=_.d,B=_.m,$=_.n,W=8*N;do{if(!P){_.f=D=T(g,U,1);var z=T(g,U+1,3);if(U+=3,!z){var ue=g[(Ne=((H=U)/8|0)+(7&H&&1)+4)-4]|g[Ne-3]<<8,Q=Ne+ue;if(Q>N){F&&w(0);break}A&&X(M+ue),L.set(g.subarray(Ne,Q),M),_.b=M+=ue,_.p=U=8*Q;continue}if(z==1)P=E,R=b,B=9,$=5;else if(z==2){var G=T(g,U,31)+257,se=T(g,U+10,15)+4,Se=G+T(g,U+5,31)+1;U+=14;for(var te=new e(Se),Te=new e(19),fe=0;fe<se;++fe)Te[s[fe]]=T(g,U+3*fe,7);U+=3*se;var Ee=S(Te),At=(1<<Ee)-1,We=m(Te,Ee);for(fe=0;fe<Se;){var Ne,Ce=We[T(g,U,At)];if(U+=15&Ce,(Ne=Ce>>>4)<16)te[fe++]=Ne;else{var ke=0,Ue=0;for(Ne==16?(Ue=3+T(g,U,3),U+=2,ke=te[fe-1]):Ne==17?(Ue=3+T(g,U,7),U+=3):Ne==18&&(Ue=11+T(g,U,127),U+=7);Ue--;)te[fe++]=ke}}var Be=te.subarray(0,G),ye=te.subarray(G);B=S(Be),$=S(ye),P=m(Be,B),R=m(ye,$)}else w(1);if(U>W){F&&w(0);break}}A&&X(M+131072);for(var pt=(1<<B)-1,Y=(1<<$)-1,be=U;;be=U){var ce=(ke=P[k(g,U)&pt])>>>4;if((U+=15&ke)>W){F&&w(0);break}if(ke||w(2),ce<256)L[M++]=ce;else{if(ce==256){be=U,P=null;break}var de=ce-254;if(ce>264){var ge=n[fe=ce-257];de=T(g,U,(1<<ge)-1)+r[fe],U+=ge}var Le=R[k(g,U)&Y],ne=Le>>>4;if(Le||w(3),U+=15&Le,ye=u[ne],ne>3&&(ge=t[ne],ye+=k(g,U)&(1<<ge)-1,U+=ge),U>W){F&&w(0);break}A&&X(M+131072);for(var He=M+de;M<He;M+=4)L[M]=L[M-ye],L[M+1]=L[M+1-ye],L[M+2]=L[M+2-ye],L[M+3]=L[M+3-ye];M=He}}_.l=P,_.p=be,_.b=M,P&&(D=1,_.m=B,_.d=R,_.n=$)}while(!D);return M==L.length?L:function(Z,Fe,Ie){(Ie==null||Ie>Z.length)&&(Ie=Z.length);var Ge=new(Z instanceof a?a:Z instanceof l?l:e)(Ie-Fe);return Ge.set(Z.subarray(Fe,Ie)),Ge}(L,0,M)},C=new e(0),x=typeof TextDecoder<"u"&&new TextDecoder;try{x.decode(C,{stream:!0})}catch{}return h.convert_streams=function(g){var L=new DataView(g),_=0;function N(){var G=L.getUint16(_);return _+=2,G}function A(){var G=L.getUint32(_);return _+=4,G}function F(G){ue.setUint16(Q,G),Q+=2}function H(G){ue.setUint32(Q,G),Q+=4}for(var X={signature:A(),flavor:A(),length:A(),numTables:N(),reserved:N(),totalSfntSize:A(),majorVersion:N(),minorVersion:N(),metaOffset:A(),metaLength:A(),metaOrigLength:A(),privOffset:A(),privLength:A()},D=0;Math.pow(2,D)<=X.numTables;)D++;D--;for(var U=16*Math.pow(2,D),M=16*X.numTables-U,P=12,R=[],B=0;B<X.numTables;B++)R.push({tag:A(),offset:A(),compLength:A(),origLength:A(),origChecksum:A()}),P+=16;var $,W=new Uint8Array(12+16*R.length+R.reduce(function(G,se){return G+se.origLength+4},0)),z=W.buffer,ue=new DataView(z),Q=0;return H(X.flavor),F(X.numTables),F(U),F(D),F(M),R.forEach(function(G){H(G.tag),H(G.origChecksum),H(P),H(G.origLength),G.outOffset=P,(P+=G.origLength)%4!=0&&(P+=4-P%4)}),R.forEach(function(G){var se,Se=g.slice(G.offset,G.offset+G.compLength);if(G.compLength!=G.origLength){var te=new Uint8Array(G.origLength);se=new Uint8Array(Se,2),O(se,te)}else te=new Uint8Array(Se);W.set(te,G.outOffset);var Te=0;(P=G.outOffset+G.origLength)%4!=0&&(Te=4-P%4),W.set(new Uint8Array(Te).buffer,G.outOffset+G.origLength),$=P+Te}),z.slice(0,$)},Object.defineProperty(h,"__esModule",{value:!0}),h}({}).convert_streams}function Zn(h,e){const a={M:2,L:2,Q:4,C:6,Z:0},l={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},n=1,t=2,s=4,o=8,i=16,r=32;let c;function u(y){if(!c){const w={R:t,L:n,D:s,C:i,U:r,T:o};c=new Map;for(let O in l){let C=0;l[O].split(",").forEach(x=>{let[g,L]=x.split("+");g=parseInt(g,36),L=L?parseInt(L,36):0,c.set(C+=g,w[O]);for(let _=L;_--;)c.set(++C,w[O])})}}return c.get(y)||r}const d=1,f=2,p=3,m=4,v=[null,"isol","init","fina","medi"];function I(y){const w=new Uint8Array(y.length);let O=r,C=d,x=-1;for(let g=0;g<y.length;g++){const L=y.codePointAt(g);let _=u(L)|0,N=d;_&o||(O&(n|s|i)?_&(t|s|i)?(N=p,(C===d||C===p)&&w[x]++):_&(n|r)&&(C===f||C===m)&&w[x]--:O&(t|r)&&(C===f||C===m)&&w[x]--,C=w[g]=N,O=_,x=g,L>65535&&g++)}return w}function E(y,w){const O=[];for(let x=0;x<w.length;x++){const g=w.codePointAt(x);g>65535&&x++,O.push(h.U.codeToGlyph(y,g))}const C=y.GSUB;if(C){const{lookupList:x,featureList:g}=C;let L;const _=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,N=[];g.forEach(A=>{if(_.test(A.tag))for(let F=0;F<A.tab.length;F++){if(N[A.tab[F]])continue;N[A.tab[F]]=!0;const H=x[A.tab[F]],X=/^(isol|init|fina|medi)$/.test(A.tag);X&&!L&&(L=I(w));for(let D=0;D<O.length;D++)(!L||!X||v[L[D]]===A.tag)&&h.U._applySubs(O,D,H,x)}})}return O}function b(y,w){const O=new Int16Array(w.length*3);let C=0;for(;C<w.length;C++){const _=w[C];if(_===-1)continue;O[C*3+2]=y.hmtx.aWidth[_];const N=y.GPOS;if(N){const A=N.lookupList;for(let F=0;F<A.length;F++){const H=A[F];for(let X=0;X<H.tabs.length;X++){const D=H.tabs[X];if(H.ltype===1){if(h._lctf.coverageIndex(D.coverage,_)!==-1&&D.pos){L(D.pos,C);break}}else if(H.ltype===2){let U=null,M=x();if(M!==-1){const P=h._lctf.coverageIndex(D.coverage,w[M]);if(P!==-1){if(D.fmt===1){const R=D.pairsets[P];for(let B=0;B<R.length;B++)R[B].gid2===_&&(U=R[B])}else if(D.fmt===2){const R=h.U._getGlyphClass(w[M],D.classDef1),B=h.U._getGlyphClass(_,D.classDef2);U=D.matrix[R][B]}if(U){U.val1&&L(U.val1,M),U.val2&&L(U.val2,C);break}}}}else if(H.ltype===4){const U=h._lctf.coverageIndex(D.markCoverage,_);if(U!==-1){const M=x(g),P=M===-1?-1:h._lctf.coverageIndex(D.baseCoverage,w[M]);if(P!==-1){const R=D.markArray[U],B=D.baseArray[P][R.markClass];O[C*3]=B.x-R.x+O[M*3]-O[M*3+2],O[C*3+1]=B.y-R.y+O[M*3+1];break}}}else if(H.ltype===6){const U=h._lctf.coverageIndex(D.mark1Coverage,_);if(U!==-1){const M=x();if(M!==-1){const P=w[M];if(S(y,P)===3){const R=h._lctf.coverageIndex(D.mark2Coverage,P);if(R!==-1){const B=D.mark1Array[U],$=D.mark2Array[R][B.markClass];O[C*3]=$.x-B.x+O[M*3]-O[M*3+2],O[C*3+1]=$.y-B.y+O[M*3+1];break}}}}}}}}else if(y.kern&&!y.cff){const A=x();if(A!==-1){const F=y.kern.glyph1.indexOf(w[A]);if(F!==-1){const H=y.kern.rval[F].glyph2.indexOf(_);H!==-1&&(O[A*3+2]+=y.kern.rval[F].vals[H])}}}}return O;function x(_){for(let N=C-1;N>=0;N--)if(w[N]!==-1&&(!_||_(w[N])))return N;return-1}function g(_){return S(y,_)===1}function L(_,N){for(let A=0;A<3;A++)O[N*3+A]+=_[A]||0}}function S(y,w){const O=y.GDEF&&y.GDEF.glyphClassDef;return O?h.U._getGlyphClass(w,O):0}function T(...y){for(let w=0;w<y.length;w++)if(typeof y[w]=="number")return y[w]}function k(y){const w=Object.create(null),O=y["OS/2"],C=y.hhea,x=y.head.unitsPerEm,g=T(O&&O.sTypoAscender,C&&C.ascender,x),L={unitsPerEm:x,ascender:g,descender:T(O&&O.sTypoDescender,C&&C.descender,0),capHeight:T(O&&O.sCapHeight,g),xHeight:T(O&&O.sxHeight,g),lineGap:T(O&&O.sTypoLineGap,C&&C.lineGap),supportsCodePoint(_){return h.U.codeToGlyph(y,_)>0},forEachGlyph(_,N,A,F){let H=0;const X=1/L.unitsPerEm*N,D=E(y,_);let U=0;const M=b(y,D);return D.forEach((P,R)=>{if(P!==-1){let B=w[P];if(!B){const{cmds:$,crds:W}=h.U.glyphToPath(y,P);let z="",ue=0;for(let te=0,Te=$.length;te<Te;te++){const fe=a[$[te]];z+=$[te];for(let Ee=1;Ee<=fe;Ee++)z+=(Ee>1?",":"")+W[ue++]}let Q,G,se,Se;if(W.length){Q=G=1/0,se=Se=-1/0;for(let te=0,Te=W.length;te<Te;te+=2){let fe=W[te],Ee=W[te+1];fe<Q&&(Q=fe),Ee<G&&(G=Ee),fe>se&&(se=fe),Ee>Se&&(Se=Ee)}}else Q=se=G=Se=0;B=w[P]={index:P,advanceWidth:y.hmtx.aWidth[P],xMin:Q,yMin:G,xMax:se,yMax:Se,path:z}}F.call(null,B,H+M[R*3]*X,M[R*3+1]*X,U),H+=M[R*3+2]*X,A&&(H+=A*N)}U+=_.codePointAt(U)>65535?2:1}),H}};return L}return function(w){const O=new Uint8Array(w,0,4),C=h._bin.readASCII(O,0,4);if(C==="wOFF")w=e(w);else if(C==="wOF2")throw new Error("woff2 fonts not supported");return k(h.parse(w)[0])}}const es=dt({name:"Typr Font Parser",worker:self,dependencies:[Jn,Qn,Zn],init(h,e,a){const l=h(),n=e();return a(l,n)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function ts(){return function(h){var e=function(){this.buckets=new Map};e.prototype.add=function(b){var S=b>>5;this.buckets.set(S,(this.buckets.get(S)||0)|1<<(31&b))},e.prototype.has=function(b){var S=this.buckets.get(b>>5);return S!==void 0&&(S&1<<(31&b))!=0},e.prototype.serialize=function(){var b=[];return this.buckets.forEach(function(S,T){b.push((+T).toString(36)+":"+S.toString(36))}),b.join(",")},e.prototype.deserialize=function(b){var S=this;this.buckets.clear(),b.split(",").forEach(function(T){var k=T.split(":");S.buckets.set(parseInt(k[0],36),parseInt(k[1],36))})};var a=Math.pow(2,8),l=a-1,n=~l;function t(b){var S=function(k){return k&n}(b).toString(16),T=function(k){return(k&n)+a-1}(b).toString(16);return"codepoint-index/plane"+(b>>16)+"/"+S+"-"+T+".json"}function s(b,S){var T=b&l,k=S.codePointAt(T/6|0);return((k=(k||48)-48)&1<<T%6)!=0}function o(b,S){var T;(T=b,T.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(k){return k.split("-").map(function(y){return parseInt(y.trim(),16)})})).forEach(function(k){var y=k[0],w=k[1];w===void 0&&(w=y),S(y,w)})}function i(b,S){o(b,function(T,k){for(var y=T;y<=k;y++)S(y)})}var r={},c={},u=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function f(b){var S=u.get(b);return S||(S=new e,i(b.ranges,function(T){return S.add(T)}),u.set(b,S)),S}var p,m=new Map;function v(b,S,T){return b[S]?S:b[T]?T:function(k){for(var y in k)return y}(b)}function I(b,S){var T=S;if(!b.includes(T)){T=1/0;for(var k=0;k<b.length;k++)Math.abs(b[k]-S)<Math.abs(T-S)&&(T=b[k])}return T}function E(b){return p||(p=new Set,i("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(S){p.add(S)})),p.has(b)}return h.CodePointSet=e,h.clearCache=function(){r={},c={}},h.getFontsForString=function(b,S){S===void 0&&(S={});var T,k=S.lang;k===void 0&&(k=/\p{Script=Hangul}/u.test(T=b)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(T)?"ja":"en");var y=S.category;y===void 0&&(y="sans-serif");var w=S.style;w===void 0&&(w="normal");var O=S.weight;O===void 0&&(O=400);var C=(S.dataUrl||d).replace(/\/$/g,""),x=new Map,g=new Uint8Array(b.length),L={},_={},N=new Array(b.length),A=new Map,F=!1;function H(U){var M=m.get(U);return M||(M=fetch(C+"/"+U).then(function(P){if(!P.ok)throw new Error(P.statusText);return P.json().then(function(R){if(!Array.isArray(R)||R[0]!==1)throw new Error("Incorrect schema version; need 1, got "+R[0]);return R[1]})}).catch(function(P){if(C!==d)return F||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+C+'", trying default CDN. '+P.message),F=!0),C=d,m.delete(U),H(U);throw P}),m.set(U,M)),M}for(var X=function(U){var M=b.codePointAt(U),P=t(M);N[U]=P,r[P]||A.has(P)||A.set(P,H(P).then(function(R){r[P]=R})),M>65535&&(U++,D=U)},D=0;D<b.length;D++)X(D);return Promise.all(A.values()).then(function(){A.clear();for(var U=function(P){var R=b.codePointAt(P),B=null,$=r[N[P]],W=void 0;for(var z in $){var ue=_[z];if(ue===void 0&&(ue=_[z]=new RegExp(z).test(k||"en")),ue){for(var Q in W=z,$[z])if(s(R,$[z][Q])){B=Q;break}break}}if(!B){e:for(var G in $)if(G!==W){for(var se in $[G])if(s(R,$[G][se])){B=se;break e}}}B||(console.debug("No font coverage for U+"+R.toString(16)),B="latin"),N[P]=B,c[B]||A.has(B)||A.set(B,H("font-meta/"+B+".json").then(function(Se){c[B]=Se})),R>65535&&(P++,M=P)},M=0;M<b.length;M++)U(M);return Promise.all(A.values())}).then(function(){for(var U,M=null,P=0;P<b.length;P++){var R=b.codePointAt(P);if(M&&(E(R)||f(M).has(R)))g[P]=g[P-1];else{M=c[N[P]];var B=L[M.id];if(!B){var $=M.typeforms,W=v($,y,"sans-serif"),z=v($[W],w,"normal"),ue=I((U=$[W])===null||U===void 0?void 0:U[z],O);B=L[M.id]=C+"/font-files/"+M.id+"/"+W+"."+z+"."+ue+".woff"}var Q=x.get(B);Q==null&&(Q=x.size,x.set(B,Q)),g[P]=Q}R>65535&&(P++,g[P]=g[P-1])}return{fontUrls:Array.from(x.keys()),chars:g}})},Object.defineProperty(h,"__esModule",{value:!0}),h}({})}function ns(h,e){const a=Object.create(null),l=Object.create(null);function n(s,o){const i=r=>{console.error(`Failure loading font ${s}`,r)};try{const r=new XMLHttpRequest;r.open("get",s,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)i(new Error(r.statusText));else if(r.status>0)try{const c=h(r.response);c.src=s,o(c)}catch(c){i(c)}},r.onerror=i,r.send()}catch(r){i(r)}}function t(s,o){let i=a[s];i?o(i):l[s]?l[s].push(o):(l[s]=[o],n(s,r=>{r.src=s,a[s]=r,l[s].forEach(c=>c(r)),delete l[s]}))}return function(s,o,{lang:i,fonts:r=[],style:c="normal",weight:u="normal",unicodeFontsURL:d}={}){const f=new Uint8Array(s.length),p=[];s.length||E();const m=new Map,v=[];if(c!=="italic"&&(c="normal"),typeof u!="number"&&(u=u==="bold"?700:400),r&&!Array.isArray(r)&&(r=[r]),r=r.slice().filter(S=>!S.lang||S.lang.test(i)).reverse(),r.length){let y=0;(function w(O=0){for(let C=O,x=s.length;C<x;C++){const g=s.codePointAt(C);if(y===1&&p[f[C-1]].supportsCodePoint(g)||/\s/.test(s[C]))f[C]=f[C-1],y===2&&(v[v.length-1][1]=C);else for(let L=f[C],_=r.length;L<=_;L++)if(L===_){const N=y===2?v[v.length-1]:v[v.length]=[C,C];N[1]=C,y=2}else{f[C]=L;const{src:N,unicodeRange:A}=r[L];if(!A||b(g,A)){const F=a[N];if(!F){t(N,()=>{w(C)});return}if(F.supportsCodePoint(g)){let H=m.get(F);typeof H!="number"&&(H=p.length,p.push(F),m.set(F,H)),f[C]=H,y=1;break}}}g>65535&&C+1<x&&(f[C+1]=f[C],C++,y===2&&(v[v.length-1][1]=C))}I()})()}else v.push([0,s.length-1]),I();function I(){if(v.length){const S=v.map(T=>s.substring(T[0],T[1]+1)).join(`
`);e.getFontsForString(S,{lang:i||void 0,style:c,weight:u,dataUrl:d}).then(({fontUrls:T,chars:k})=>{const y=p.length;let w=0;v.forEach(C=>{for(let x=0,g=C[1]-C[0];x<=g;x++)f[C[0]+x]=k[w++]+y;w++});let O=0;T.forEach((C,x)=>{t(C,g=>{p[x+y]=g,++O===T.length&&E()})})})}else E()}function E(){o({chars:f,fonts:p})}function b(S,T){for(let k=0;k<T.length;k++){const[y,w=y]=T[k];if(y<=S&&S<=w)return!0}return!1}}}const ss=dt({name:"FontResolver",worker:self,dependencies:[ns,es,ts],init(h,e,a){return h(e,a())}}),Qe=()=>(self.performance||Date).now(),It=on();let Ht;function is(h,e,a,l,n,t,s,o,i,r,c=!0){return c?rs(h,e,a,l,n,t,s,o,i,r).then(null,u=>(Ht||(console.warn("WebGL SDF generation failed, falling back to JS",u),Ht=!0),Vt(h,e,a,l,n,t,s,o,i,r))):Vt(h,e,a,l,n,t,s,o,i,r)}const bt=[],os=5;let Dt=0;function cn(){const h=Qe();for(;bt.length&&Qe()-h<os;)bt.shift()();Dt=bt.length?setTimeout(cn,0):0}const rs=(...h)=>new Promise((e,a)=>{bt.push(()=>{const l=Qe();try{It.webgl.generateIntoCanvas(...h),e({timing:Qe()-l})}catch(n){a(n)}}),Dt||(Dt=setTimeout(cn,0))}),as=4,cs=2e3,qt={};let ls=0;function Vt(h,e,a,l,n,t,s,o,i,r){const c="TroikaTextSDFGenerator_JS_"+ls++%as;let u=qt[c];return u||(u=qt[c]={workerModule:dt({name:c,worker:self,workerId:c,dependencies:[on,Qe],init(d,f){const p=d().javascript.generate;return function(...m){const v=f();return{textureData:p(...m),timing:f()-v}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),u.requests++,clearTimeout(u.idleTimer),u.workerModule(h,e,a,l,n,t).then(({textureData:d,timing:f})=>{const p=Qe(),m=new Uint8Array(d.length*4);for(let v=0;v<d.length;v++)m[v*4+r]=d[v];return It.webglUtils.renderImageData(s,m,o,i,h,e,1<<3-r),f+=Qe()-p,--u.requests===0&&(u.idleTimer=setTimeout(()=>{Ln(c)},cs)),{timing:f}})}function hs(h){h._warm||(It.webgl.isSupported(h),h._warm=!0)}const us=It.webglUtils.resizeWebGLCanvasWithoutClearing;function ds(h,e){const l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,n="[^\\S\\u00A0]",t=new RegExp(`${n}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function s({text:p,lang:m,fonts:v,style:I,weight:E,preResolvedFonts:b,unicodeFontsURL:S},T){const k=({chars:y,fonts:w})=>{let O,C;const x=[];for(let g=0;g<y.length;g++)y[g]!==C?(C=y[g],x.push(O={start:g,end:g,fontObj:w[y[g]]})):O.end=g;T(x)};b?k(b):h(p,k,{lang:m,fonts:v,style:I,weight:E,unicodeFontsURL:S})}function o({text:p="",font:m,lang:v,sdfGlyphSize:I=64,fontSize:E=400,fontWeight:b=1,fontStyle:S="normal",letterSpacing:T=0,lineHeight:k="normal",maxWidth:y=1/0,direction:w,textAlign:O="left",textIndent:C=0,whiteSpace:x="normal",overflowWrap:g="normal",anchorX:L=0,anchorY:_=0,metricsOnly:N=!1,unicodeFontsURL:A,preResolvedFonts:F=null,includeCaretPositions:H=!1,chunkedBoundsSize:X=8192,colorRanges:D=null},U){const M=u(),P={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),E=+E,T=+T,y=+y,k=k||"normal",C=+C,s({text:p,lang:v,style:S,weight:b,fonts:typeof m=="string"?[{src:m}]:m,unicodeFontsURL:A,preResolvedFonts:F},R=>{P.fontLoad=u()-M;const B=isFinite(y);let $=null,W=null,z=null,ue=null,Q=null,G=null,se=null,Se=null,te=0,Te=0,fe=x!=="nowrap";const Ee=new Map,At=u();let We=C,Ne=0,Ce=new d;const ke=[Ce];R.forEach(Y=>{const{fontObj:be}=Y,{ascender:ce,descender:de,unitsPerEm:ge,lineGap:Le,capHeight:ne,xHeight:He}=be;let Z=Ee.get(be);if(!Z){const ee=E/ge,oe=k==="normal"?(ce-de+Le)*ee:k*E,ot=(oe-(ce-de)*ee)/2,re=Math.min(oe,(ce-de)*ee),J=(ce+de)/2*ee+re/2;Z={index:Ee.size,src:be.src,fontObj:be,fontSizeMult:ee,unitsPerEm:ge,ascender:ce*ee,descender:de*ee,capHeight:ne*ee,xHeight:He*ee,lineHeight:oe,baseline:-ot-ce*ee,caretTop:(ce+de)/2*ee+re/2,caretBottom:J-re},Ee.set(be,Z)}const{fontSizeMult:Fe}=Z,Ie=p.slice(Y.start,Y.end+1);let Ge,je;be.forEachGlyph(Ie,E,T,(ee,oe,ot,re)=>{oe+=Ne,re+=Y.start,Ge=oe,je=ee;const J=p.charAt(re),Oe=ee.advanceWidth*Fe,Pe=Ce.count;let K;if("isEmpty"in ee||(ee.isWhitespace=!!J&&new RegExp(n).test(J),ee.canBreakAfter=!!J&&t.test(J),ee.isEmpty=ee.xMin===ee.xMax||ee.yMin===ee.yMax||l.test(J)),!ee.isWhitespace&&!ee.isEmpty&&Te++,fe&&B&&!ee.isWhitespace&&oe+Oe+We>y&&Pe){if(Ce.glyphAt(Pe-1).glyphObj.canBreakAfter)K=new d,We=-oe;else for(let xe=Pe;xe--;)if(xe===0&&g==="break-word"){K=new d,We=-oe;break}else if(Ce.glyphAt(xe).glyphObj.canBreakAfter){K=Ce.splitAt(xe+1);const Me=K.glyphAt(0).x;We-=Me;for(let we=K.count;we--;)K.glyphAt(we).x-=Me;break}K&&(Ce.isSoftWrapped=!0,Ce=K,ke.push(Ce),te=y)}let pe=Ce.glyphAt(Ce.count);pe.glyphObj=ee,pe.x=oe+We,pe.y=ot,pe.width=Oe,pe.charIndex=re,pe.fontData=Z,J===`
`&&(Ce=new d,ke.push(Ce),We=-(oe+Oe+T*E)+C)}),Ne=Ge+je.advanceWidth*Fe+T*E});let Ue=0;ke.forEach(Y=>{let be=!0;for(let ce=Y.count;ce--;){const de=Y.glyphAt(ce);be&&!de.glyphObj.isWhitespace&&(Y.width=de.x+de.width,Y.width>te&&(te=Y.width),be=!1);let{lineHeight:ge,capHeight:Le,xHeight:ne,baseline:He}=de.fontData;ge>Y.lineHeight&&(Y.lineHeight=ge);const Z=He-Y.baseline;Z<0&&(Y.baseline+=Z,Y.cap+=Z,Y.ex+=Z),Y.cap=Math.max(Y.cap,Y.baseline+Le),Y.ex=Math.max(Y.ex,Y.baseline+ne)}Y.baseline-=Ue,Y.cap-=Ue,Y.ex-=Ue,Ue+=Y.lineHeight});let Be=0,ye=0;if(L&&(typeof L=="number"?Be=-L:typeof L=="string"&&(Be=-te*(L==="left"?0:L==="center"?.5:L==="right"?1:r(L)))),_&&(typeof _=="number"?ye=-_:typeof _=="string"&&(ye=_==="top"?0:_==="top-baseline"?-ke[0].baseline:_==="top-cap"?-ke[0].cap:_==="top-ex"?-ke[0].ex:_==="middle"?Ue/2:_==="bottom"?Ue:_==="bottom-baseline"?ke[ke.length-1].baseline:r(_)*Ue)),!N){const Y=e.getEmbeddingLevels(p,w);$=new Uint16Array(Te),W=new Uint8Array(Te),z=new Float32Array(Te*2),ue={},se=[1/0,1/0,-1/0,-1/0],Se=[],H&&(G=new Float32Array(p.length*4)),D&&(Q=new Uint8Array(Te*3));let be=0,ce=-1,de=-1,ge,Le;if(ke.forEach((ne,He)=>{let{count:Z,width:Fe}=ne;if(Z>0){let Ie=0;for(let re=Z;re--&&ne.glyphAt(re).glyphObj.isWhitespace;)Ie++;let Ge=0,je=0;if(O==="center")Ge=(te-Fe)/2;else if(O==="right")Ge=te-Fe;else if(O==="justify"&&ne.isSoftWrapped){let re=0;for(let J=Z-Ie;J--;)ne.glyphAt(J).glyphObj.isWhitespace&&re++;je=(te-Fe)/re}if(je||Ge){let re=0;for(let J=0;J<Z;J++){let Oe=ne.glyphAt(J);const Pe=Oe.glyphObj;Oe.x+=Ge+re,je!==0&&Pe.isWhitespace&&J<Z-Ie&&(re+=je,Oe.width+=je)}}const ee=e.getReorderSegments(p,Y,ne.glyphAt(0).charIndex,ne.glyphAt(ne.count-1).charIndex);for(let re=0;re<ee.length;re++){const[J,Oe]=ee[re];let Pe=1/0,K=-1/0;for(let pe=0;pe<Z;pe++)if(ne.glyphAt(pe).charIndex>=J){let xe=pe,Me=pe;for(;Me<Z;Me++){let we=ne.glyphAt(Me);if(we.charIndex>Oe)break;Me<Z-Ie&&(Pe=Math.min(Pe,we.x),K=Math.max(K,we.x+we.width))}for(let we=xe;we<Me;we++){const Je=ne.glyphAt(we);Je.x=K-(Je.x+Je.width-Pe)}break}}let oe;const ot=re=>oe=re;for(let re=0;re<Z;re++){const J=ne.glyphAt(re);oe=J.glyphObj;const Oe=oe.index,Pe=Y.levels[J.charIndex]&1;if(Pe){const K=e.getMirroredCharacter(p[J.charIndex]);K&&J.fontData.fontObj.forEachGlyph(K,0,0,ot)}if(H){const{charIndex:K,fontData:pe}=J,xe=J.x+Be,Me=J.x+J.width+Be;G[K*4]=Pe?Me:xe,G[K*4+1]=Pe?xe:Me,G[K*4+2]=ne.baseline+pe.caretBottom+ye,G[K*4+3]=ne.baseline+pe.caretTop+ye;const we=K-ce;we>1&&c(G,ce,we),ce=K}if(D){const{charIndex:K}=J;for(;K>de;)de++,D.hasOwnProperty(de)&&(Le=D[de])}if(!oe.isWhitespace&&!oe.isEmpty){const K=be++,{fontSizeMult:pe,src:xe,index:Me}=J.fontData,we=ue[xe]||(ue[xe]={});we[Oe]||(we[Oe]={path:oe.path,pathBounds:[oe.xMin,oe.yMin,oe.xMax,oe.yMax]});const Je=J.x+Be,Ut=J.y+ne.baseline+ye;z[K*2]=Je,z[K*2+1]=Ut;const mt=Je+oe.xMin*pe,gt=Ut+oe.yMin*pe,vt=Je+oe.xMax*pe,St=Ut+oe.yMax*pe;mt<se[0]&&(se[0]=mt),gt<se[1]&&(se[1]=gt),vt>se[2]&&(se[2]=vt),St>se[3]&&(se[3]=St),K%X===0&&(ge={start:K,end:K,rect:[1/0,1/0,-1/0,-1/0]},Se.push(ge)),ge.end++;const $e=ge.rect;if(mt<$e[0]&&($e[0]=mt),gt<$e[1]&&($e[1]=gt),vt>$e[2]&&($e[2]=vt),St>$e[3]&&($e[3]=St),$[K]=Oe,W[K]=Me,D){const Ot=K*3;Q[Ot]=Le>>16&255,Q[Ot+1]=Le>>8&255,Q[Ot+2]=Le&255}}}}}),G){const ne=p.length-ce;ne>1&&c(G,ce,ne)}}const pt=[];Ee.forEach(({index:Y,src:be,unitsPerEm:ce,ascender:de,descender:ge,lineHeight:Le,capHeight:ne,xHeight:He})=>{pt[Y]={src:be,unitsPerEm:ce,ascender:de,descender:ge,lineHeight:Le,capHeight:ne,xHeight:He}}),P.typesetting=u()-At,U({glyphIds:$,glyphFontIndices:W,glyphPositions:z,glyphData:ue,fontData:pt,caretPositions:G,glyphColors:Q,chunkedBounds:Se,fontSize:E,topBaseline:ye+ke[0].baseline,blockBounds:[Be,ye-Ue,Be+te,ye],visibleBounds:se,timings:P})})}function i(p,m){o({...p,metricsOnly:!0},v=>{const[I,E,b,S]=v.blockBounds;m({width:b-I,height:S-E})})}function r(p){let m=p.match(/^([\d.]+)%$/),v=m?parseFloat(m[1]):NaN;return isNaN(v)?0:v/100}function c(p,m,v){const I=p[m*4],E=p[m*4+1],b=p[m*4+2],S=p[m*4+3],T=(E-I)/v;for(let k=0;k<v;k++){const y=(m+k)*4;p[y]=I+T*k,p[y+1]=I+T*(k+1),p[y+2]=b,p[y+3]=S}}function u(){return(self.performance||Date).now()}function d(){this.data=[]}const f=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/f.length)},glyphAt(p){let m=d.flyweight;return m.data=this.data,m.index=p,m},splitAt(p){let m=new d;return m.data=this.data.splice(p*f.length),m}},d.flyweight=f.reduce((p,m,v,I)=>(Object.defineProperty(p,m,{get(){return this.data[this.index*f.length+v]},set(E){this.data[this.index*f.length+v]=E}}),p),{data:null,index:0}),{typeset:o,measure:i}}const tt={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},fs=new On;function Ze(){return(self.performance||Date).now()}const Wt=Object.create(null);function ps(){return typeof OffscreenCanvas<"u"}function ms(h,e,a=!1){if(a&&ps())return new OffscreenCanvas(h,e);{const l=document.createElement("canvas");return l.width=h,l.height=e,l}}async function ln(h,e,a){e={...e};const l=Ze(),{defaultFontURL:n}=tt,t=[];if(n&&t.push({label:"default",src:jt(n)}),e.font&&t.push({label:"user",src:jt(e.font)}),e.font=t,e.text=String(e.text),e.sdfGlyphSize=e.sdfGlyphSize||tt.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||tt.unicodeFontsURL,e.colorRanges!=null){const p=Object.entries(e.colorRanges).reduce((m,[v,I])=>({...m,[v]:typeof I=="number"?I:fs.set(I).getHex()}),{});e.colorRanges=p}Object.freeze(e);const{textureWidth:s,sdfExponent:o}=tt,{sdfGlyphSize:i}=e,r=s/i*4;let c=Wt[i];const{isOffscreen:u}=ie();if(!c){const p=ms(s,i*256/r,u);c=Wt[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:p,sdfTexture:new Un(p,void 0,void 0,void 0,Rt,Rt),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,gs(h,u,c)}const{sdfTexture:d,sdfCanvas:f}=c;try{const p=await Ts(e),{glyphIds:m,glyphFontIndices:v,fontData:I,glyphPositions:E,fontSize:b,timings:S}=p,T=[],k=new Float32Array(m.length*4);let y=0,w=0;const O=Ze(),C=I.map(A=>{let F=c.glyphsByFont.get(A.src);return F||(F=new Map,c.glyphsByFont.set(A.src,F)),F});m.forEach((A,F)=>{const H=v[F],{src:X,unitsPerEm:D}=I[H];let U=C[H].get(A);if(!U){const{path:$,pathBounds:W}=p.glyphData[X][A],z=Math.max(W[2]-W[0],W[3]-W[1])/i*(tt.sdfMargin*i+.5),ue=c.glyphCount++,Q=[W[0]-z,W[1]-z,W[2]+z,W[3]+z];U={path:$,atlasIndex:ue,sdfViewBox:Q},C[H].set(A,U),T.push(U)}const{sdfViewBox:M}=U,P=E[w++],R=E[w++],B=b/D;k[y++]=P+M[0]*B,k[y++]=R+M[1]*B,k[y++]=P+M[2]*B,k[y++]=R+M[3]*B,m[F]=U.atlasIndex}),S.quads=(S.quads||0)+(Ze()-O);const x=Ze();S.sdf={};const g=f.height,L=Math.ceil(c.glyphCount/r),_=Math.pow(2,Math.ceil(Math.log2(L*i)));_>g&&(console.info(`Increasing SDF texture size ${g}->${_}`),us(f,s,_),d.dispose());const N=T.map(async A=>{const{timing:F}=await hn(A,c,e.gpuAccelerateSDF);S.sdf[A.atlasIndex]=F});return await Promise.all(N),un(h,u,c),d.needsUpdate=!0,typeof a=="function"&&a(),S.sdfTotal=Ze()-x,S.total=Ze()-l,Object.freeze({parameters:e,sdfTexture:d,sdfGlyphSize:i,sdfExponent:o,glyphBounds:k,glyphAtlasIndices:m,glyphColors:p.glyphColors,caretPositions:p.caretPositions,chunkedBounds:p.chunkedBounds,ascender:p.ascender,descender:p.descender,lineHeight:p.lineHeight,capHeight:p.capHeight,xHeight:p.xHeight,topBaseline:p.topBaseline,blockBounds:p.blockBounds,visibleBounds:p.visibleBounds,timings:p.timings})}catch(p){throw console.error("Error in getTextRenderInfo:",p),p}finally{c.contextLost||await hs(f)}}function hn({path:h,atlasIndex:e,sdfViewBox:a},{sdfGlyphSize:l,sdfCanvas:n,contextLost:t},s){if(t)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:i}=tt,r=Math.max(a[2]-a[0],a[3]-a[1]),c=Math.floor(e/4),u=c%(o/l)*l,d=Math.floor(c/(o/l))*l,f=e%4;return is(l,l,h,a,r,i,n,u,d,f,s)}function gs(h,e,a){const l=a.sdfCanvas;l.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),a.contextLost=!0}),l.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),a.contextLost=!1;const t=[];a.glyphsByFont.forEach(s=>{s.forEach(o=>{t.push(hn(o,a,!0))})}),Promise.all(t).then(()=>{un(h,e,a),a.sdfTexture.needsUpdate=!0})})}async function vs(h,{font:e,characters:a,sdfGlyphSize:l},n){let t=Array.isArray(a)?a.join(`
`):""+a;return await ln(h,{font:e,sdfGlyphSize:l,text:t},n)}let Tt;function jt(h){return Tt||(Tt=typeof document>"u"?{}:document.createElement("a")),Tt.href=h,Tt.href}function un(h,e,a){if(typeof createImageBitmap!="function"||h||e){const{sdfCanvas:l,sdfTexture:n}=a,{width:t,height:s}=l,o=a.sdfCanvas.getContext("webgl");let i=n.image.data;(!i||i.length!==t*s*4)&&(i=new Uint8Array(t*s*4),n.image={width:t,height:s,data:i},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,t,s,o.RGBA,o.UNSIGNED_BYTE,i)}}const Ss=dt({name:"Typesetter",worker:self,dependencies:[ds,ss,An],init(h,e,a){return h(e,a())}}),Ts=dt({name:"Typesetter",worker:self,dependencies:[Ss],init(h){return function(e){return new Promise(a=>{h.typeset(e,a)})}},getTransferables(h){const e=[];for(let a in h)h[a]&&h[a].buffer&&e.push(h[a].buffer);return e}});let yt=!1,at=null;const $t=async h=>{const e=document.createElement("video");e.src="/top/showreel_128.mp4",e.load(),e.loop=!0,e.muted=!0,e.playsInline=!0;const a=async()=>{try{const n=e.play();if(n!==void 0)return await n,!0}catch(n){return console.log("Autoplay failed:",n),!1}return!1};if(!await a()){console.log("Autoplay blocked - waiting for user interaction");const n=async()=>{await a(),document.removeEventListener("click",n),document.removeEventListener("touchstart",n),zt(e,h)};document.addEventListener("click",n),document.addEventListener("touchstart",n);return}await zt(e,h)},zt=async(h,e,a=!0)=>{try{if(typeof MediaStreamTrackProcessor>"u"||a){const l=document.createElement("canvas"),n=l.getContext("2d",{willReadFrequently:!0}),t=()=>{l.width=h.videoWidth,l.height=h.videoHeight};h.videoWidth===0?await new Promise(i=>{h.addEventListener("loadedmetadata",()=>{t(),i()})}):t();const s=async()=>{if(o(),!h.paused&&!h.ended){const i=async()=>{if(!yt){yt=!0;try{n.drawImage(h,0,0);const c=n.getImageData(0,0,l.width,l.height);c&&c.data.buffer&&(e?await e.processVideoFrame(Et(c,[c.data.buffer])):q.trigger({name:"newVideoFrame"},{frame:c}))}finally{yt=!1}}},r=async()=>{await i(),at=h.requestVideoFrameCallback(r)};at=h.requestVideoFrameCallback(r)}},o=()=>{at&&(h.cancelVideoFrameCallback(at),at=null),yt=!1};h.addEventListener("play",s),q.on("videoPause",()=>{h.pause(),h.currentTime=0}),q.on("videoPlay",()=>{h.play()}),s()}else{const l=h.captureStream().getVideoTracks()[0],s=new MediaStreamTrackProcessor({track:l}).readable.getReader(),o=async()=>{try{const{value:i,done:r}=await s.read();if(r)return;await e.processVideoFrame(Et(i,[i])),requestAnimationFrame(o)}catch(i){console.error("Error processing frame:",i)}};requestAnimationFrame(o),window.addEventListener("unload",()=>{s.cancel()}),requestAnimationFrame(o)}}catch(l){console.error("Error processing video:",l)}},ys=()=>{const h=ie().gl.backend.gl,e=h.getExtension("WEBGL_debug_renderer_info"),a=h.getParameter(e.UNMASKED_VENDOR_WEBGL),l=h.getParameter(e.UNMASKED_RENDERER_WEBGL);return{vendor:a,renderer:l}},bs=(h,e)=>!h&&!e||typeof h!="string"&&typeof e!="string"?!1:h?.toLowerCase().includes("intel")||h?.toLowerCase().includes("amd")||e?.toLowerCase().includes("radeon pro rx");async function ws(){if(ie().isWebGPU)try{const h=await navigator.gpu.requestAdapter();if(h===null)return"Unable to create WebGPU adapter";const{vendor:e,architecture:a,device:l,description:n}=h.info;return`
        Vendor: ${e}
        Architecture: ${a}
  ${l?`Device: ${l}`:""}
  ${n?`Description: ${n}`:""}`}catch(h){return`Error getting WebGPU info: ${h.message}`}else try{const{vendor:h,renderer:e}=ys();return`
        Vendor: ${h}
        Renderer: ${e}`}catch(h){return`Error getting WebGL info: ${h.message}`}}const Li=async()=>{const h=typeof window>"u"?"WORKER THREAD (OffScreenCanvas)":"MAIN THREAD",e=ie().isWebGPU?"WebGPU":"WebGL",a=await ws();setTimeout(()=>{q.trigger({name:"debugInfos"},{threadType:h,renderBackend:e,hardwareInfo:a})},1)};Pn.prototype.damp=function(h,e,a){this.slerp(h,1-Math.exp(-e*a))};Ft.prototype.damp=function(h,e,a){this.x=Ke.damp(this.x,h.x,e,a),this.y=Ke.damp(this.y,h.y,e,a),this.z=Ke.damp(this.z,h.z,e,a)};async function Es({record:h=!1,debug:e=!0,smoothScroll:a=!0,offscreen:l=!1}={}){q.trigger({name:"loadProgress"},{progress:0}),document.documentElement.scrollTop=0;const n=qn();n.width=window.innerWidth,n.height=window.innerHeight,n.style="width: 100%; height: 100%;",document.body.appendChild(n);let t="transferControlToOffscreen"in n;const s=zn(),o=$n(),i=st();if(o||s){const u=navigator.userAgent.match(/version\/(\d+)/i);t=(u?parseInt(u[1]):0)>=17}t||(l=!1);let r=q;return await(async()=>{let u=null,d=null;if(e||h){const S=await rt(()=>import("./vendor.BS1T9Mq3.js").then(T=>T.dc),[]).then(T=>T.default);if(u=new S({trackGPU:!1}),document.body.appendChild(u.dom),!l){const T=await rt(()=>import("./vendor.BS1T9Mq3.js").then(k=>k.dd),[]);d=new T.GUI}}const f={powerPreference:"high-performance"};let p=navigator.gpu!==void 0,m=null;p&&(p=await navigator.gpu.requestAdapter(f),m=p?.info?.vendor);const v=await Mn();let I=v.tier===3?1.4:1.2-(p?0:.1);const E=bs(m,v.gpu);E&&(I=1),Ae({dpr:I});let b=n;if(l&&"transferControlToOffscreen"in n){const S=new Worker(new URL("/_astro/offscreen-DFNyRIC_.js",import.meta.url),{type:"module"});self._workerOffscreen=S,b=n.transferControlToOffscreen();async function T(){const k=Nn(S);$t(k),await k.initOffscreen(Et(b,[b]),!!p,!!l,!!s,!!o,!!i,!!E,Number(I)),r=k,k.subscribeToAllEvents(Bt(({name:y,data:w})=>{q.trigger({name:y,fireAtStart:!0},w)}))}await T()}else{const S=(await rt(async()=>{const{default:y}=await import("./renderer.xwAlwluV.js");return{default:y}},__vite__mapDeps([0,1,2,3]))).default,T=(await rt(async()=>{const{default:y}=await import("./site.Cz3JGs3N.js");return{default:y}},__vite__mapDeps([4,2,1,3]))).default,k=new S({canvas:n,isWebGPU:!!p});await k.init(),Ae({isWebGPU:!!p,isIOS:!!s,isSafari:!!o,isMobileOrTablet:!!i,dpr:Number(I)}),new T({gl:k}),$t()}if(!ie().isMobileOrTablet){const T="/fonts/PPMori-Medium.woff";(async()=>{await vs(p,{font:T,characters:"abcdefghijklmnopqrstuvwxyz"},function(){})})(),q.on("getTextRenderInfo",async y=>{const w=await ln(p,y);w&&r.trigger({name:"textRenderInfo",fireAtStart:!0},Et(w))})}if(Ae({api:r}),Wn(r),a&&Yn(r),h){const{Recorder:S,RecorderStatus:T,Encoders:k}=await rt(async()=>{const{Recorder:w,RecorderStatus:O,Encoders:C}=await import("./vendor.BS1T9Mq3.js").then(x=>x.de);return{Recorder:w,RecorderStatus:O,Encoders:C}},[]);let y;q.on("loadEnd",()=>{const w=ie().gl,O={extension:"mp4",encoder:"",duration:4,frameRate:60,target:"in-browser",filename:""},C=3072/2,x=3072/2;r.trigger({name:"resize",fireAtStart:!0},{width:C,height:x,dpr:1,ratio:C/x}),y=new S(w.backend.gl,{name:"canvas-record-example-default",...O,encoder:null,debug:!0,encoderOptions:{}}),Ae({recorder:y});const g=async()=>{const L=y.frame/y.frameTotal||Number.EPSILON;await q.triggerOnRaf({elapsedTime:L,startTime:0}),y.status===T.Recording&&(await y.step(),y.status!==T.Stopped&&requestAnimationFrame(g))};Xn.animate(),d.add({record:async()=>{y.status===T.Recording?(y.stop(),Ae({recording:!1})):(Ae({recording:!0}),await y.start(),await g())}},"record")})}return e&&(d&&(Ae({gui:d}),q.trigger({name:"debug",fireAtStart:!0},{stats:u,gui:d})),r.trigger({name:"initStats",fireAtStart:!0},Bt({stats:u}))),r})()}const ks=h=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"set_user_properties",user_properties:{thread_type:h.threadType,render_backend:h.renderBackend,launch_time:h.launchTime,hardware_info:h.hardwareInfo.trim()}})},_s=h=>{window.dataLayer.push({event:"section_change",event_category:"scroll",section_id:h})},Cs=(h,e)=>{window.dataLayer.push({event:"section_time_spent",section_id:h,section_time_spent:e.toFixed(2)})},Yt=(h,e,a)=>{a!==void 0&&window.dataLayer.push({event:"section_interaction",section_id:h,active:e,duration:a.toFixed(2)})},Is=(h,e)=>{window.dataLayer.push({event:"page_view",page_path:h,page_title:e})},Ls=h=>{window.dataLayer.push({event:"user_fps",user_fps:h})},qe=(h,e,a="click",l="")=>{window.dataLayer.push({event:"button_click",button_name:h,button_event_category:e,button_click_event_action:a,button_click_event_label:l})},As=(h,e,a="")=>{window.dataLayer.push({event:"tab_navigation",tab_category:h,tab_name:e,tab_event_label:a})},Us=(h,e,a="")=>{window.dataLayer.push({event:"microinteraction",mi_event_category:h,mi_event_action:e,mi_event_label:a})},{clamp:Os}=Ke,Ai=(h,e,a)=>{if(h>=e)throw new Error("Start must be less than end");return a=Math.max(0,Math.min(1,a)),a<h?1:Math.max(0,1-(a-h)/(e-h))},dn=(h,e,a)=>e-h===0?1:Os((a-h)/(e-h),0,1),Ui=(h,e,a)=>h*(1-a)+e*a,Oi=h=>h*h*h,Pi=h=>h*h*h*h*h,Mi=h=>1-Math.pow(1-h,3),Ps=h=>h<.5?2*h*h:1-Math.pow(-2*h+2,2)/2,Ni=h=>1+Math.sin(Math.PI/2*h-Math.PI/2),Fi=h=>Math.sin(Math.PI/2*h),xi=h=>Math.sqrt(1-Math.pow(h-1,2)),Pt="https://cdn.utsubo.io/v2/",Mt={sfx:`${Pt}audio/sfx/`,music:`${Pt}audio/music/`,transitions:`${Pt}audio/transitions/`},le={MENU_IN:"menuIn",MENU_OUT:"menuOut",ABOUT_HOVER:"aboutHover",CONTACT_HOVER:"contactHover",SIMPLE_HOVER:"simpleHover",SIMPLE_OUT:"simpleOut",MENU_BTN_HOVER:"menuBtnHover",MENU_BTN_OUT:"menuBtnOut",LOGO_LOOP:"logoLoop",OPEN_WEBSITE:"openWebsite"},Kt=[{name:le.OPEN_WEBSITE,path:"open_website"},{name:le.MENU_IN,path:"ui_menu_click_in",reverb:!0},{name:le.MENU_OUT,path:"ui_menu_click_out",reverb:!0},{name:le.ABOUT_HOVER,path:"ui_about_hover",desktop:!0},{name:le.CONTACT_HOVER,path:"ui_contact_hover",desktop:!0},{name:le.SIMPLE_HOVER,path:"ui_language_in",reverb:!0,desktop:!0},{name:le.SIMPLE_OUT,path:"ui_language_out",reverb:!0,desktop:!0},{name:le.MENU_BTN_HOVER,path:"ui_option_hover_in",reverb:!0,desktop:!0},{name:le.MENU_BTN_OUT,path:"ui_option_hover_out",reverb:!0,desktop:!0},{name:le.LOGO_LOOP,path:"sfx_logo_loop",loop:!0,desktop:!0}],me={SECTION1:"section1",SECTION2:"section2",SECTION3:"section3",SECTION4:"section4",SECTION4_KICK:"section4_kick",SECTION5:"section5"},Xt=[{name:me.SECTION1,path:me.SECTION1,autoplay:!0,preload:!0},{name:me.SECTION2,path:me.SECTION2},{name:me.SECTION3,path:me.SECTION3},{name:me.SECTION4,path:me.SECTION4},{name:me.SECTION4_KICK,path:me.SECTION4_KICK},{name:me.SECTION5,path:me.SECTION5}],j={TRANSITION_SCENE_1_TO_2:"transition_scene_1_to_2",TRANSITION_SCENE_2_TO_3:"transition_scene_2_to_3",TRANSITION_SCENE_3_TO_4:"transition_scene_3_to_4",TRANSITION_SCENE_4_TO_5:"transition_scene_4_to_5",INTERACTION_SCENE_2_IN:"interaction_scene_2_in",INTERACTION_SCENE_2_OUT:"interaction_scene_2_out",INTERACTION_SCENE_2_LOOP:"interaction_scene_2_loop",INTERACTION_SCENE_4_IN:"interaction_scene_4_in",INTERACTION_SCENE_4_OUT:"interaction_scene_4_out",INTERACTION_SCENE_4_LOOP:"interaction_scene_4_loop"},Jt=[{name:j.TRANSITION_SCENE_1_TO_2,path:j.TRANSITION_SCENE_1_TO_2},{name:j.TRANSITION_SCENE_2_TO_3,path:j.TRANSITION_SCENE_2_TO_3,desktop:!0},{name:j.TRANSITION_SCENE_3_TO_4,path:j.TRANSITION_SCENE_3_TO_4,desktop:!0},{name:j.TRANSITION_SCENE_4_TO_5,path:j.TRANSITION_SCENE_4_TO_5,desktop:!0},{name:j.INTERACTION_SCENE_2_IN,path:j.INTERACTION_SCENE_2_IN},{name:j.INTERACTION_SCENE_2_OUT,path:j.INTERACTION_SCENE_2_OUT},{name:j.INTERACTION_SCENE_2_LOOP,path:j.INTERACTION_SCENE_2_LOOP,loop:!0},{name:j.INTERACTION_SCENE_4_IN,path:j.INTERACTION_SCENE_4_IN},{name:j.INTERACTION_SCENE_4_OUT,path:j.INTERACTION_SCENE_4_OUT},{name:j.INTERACTION_SCENE_4_LOOP,path:j.INTERACTION_SCENE_4_LOOP,loop:!0}];class Lt{constructor(){this.sections=Lt.getSections(),this.updateDomHeight()}addToStore(){V.sectionsDom=this.sections}roundToThreeDigits(e){return Math.round(e*1e3)/1e3}updateDomHeight(){let e=0;this.sections.forEach(l=>{l.screenHeight&&(e+=l.screenHeight)}),document.getElementById("app").style.height=`${e*100}vh`;let a=0;this.sections.forEach(l=>{if(l.from===void 0&&(l.from=a),l.fromOffset&&(l.from=this.roundToThreeDigits(a+l.fromOffset/e)),l.to===void 0&&(l.to=this.roundToThreeDigits(l.from+l.screenHeight/e)),typeof l.to=="string"){const n=this.sections.find(t=>t.id===l.to);l.to=Math.max(n?.from,l.from+.01)}if(l.interactionArea&&(l.interactionFrom||(l.interactionFrom=l.to-(l.interactionFromOffset||.01)),l.interactionTo||(l.interactionTo=this.roundToThreeDigits(l.to-(l.interactionToOffset||0)))),l.magnet&&typeof l.scrollTo=="string"){const n=this.sections.find(t=>t.id===l.scrollTo);l.scrollTo=n?.from}if(l.headlineFromPercent!==void 0){const n=l.to-l.from;l.headlineFrom=this.roundToThreeDigits(l.from+l.headlineFromPercent*n),l.headlineTo=this.roundToThreeDigits(l.from+l.headlineToPercent*n)}a=l.to})}updateProgress(e){let a=null;this.sections.forEach((t,s)=>{if(t.id){const o=dn(t.from,t.to,t.relativeTo?V.sections[`${t.relativeTo}Progress`].value:e);V.sections[`${t.progress}Progress`].value=o,s<5&&o>0&&o<=1&&(a=t.id)}}),e===0&&(a="section1"),V.sections.current=a;const l=this.sections.map(t=>({id:`${t.progress}Progress`,progress:V.sections[`${t.progress}Progress`].value})),{api:n}=ie();n.trigger({name:"sectionProgress"},{progressValues:l,currentSection:a})}static getSections(){return[{id:"section1",progress:"one",from:0,screenHeight:1.5,analytics:!0,dom:!0,headlineFromPercent:0,headlineToPercent:.01},{id:"section2",progress:"two",screenHeight:3.5,interactionArea:!0,interactionFromOffset:.16,maxScroll:.38,interactionTo:.32,analytics:!0,dom:!0,headlineFromPercent:.42,headlineToPercent:.715},{id:"section3",progress:"three",screenHeight:2,autoScroll:!0,analytics:!0,dom:!0,main:!0,headlineFromPercent:.04,headlineToPercent:.73},{id:"section4",progress:"fourth",screenHeight:3.5,fromOffset:-.44,interactionArea:!0,interactionFrom:.56,interactionToOffset:.08,maxScroll:.56,analytics:!0,dom:!0,headlineFromPercent:.1,headlineToPercent:.72},{id:"section5",progress:"five",screenHeight:2,to:1,analytics:!0},{id:"section1End",progress:"oneEnd",from:.08,to:.3,relativeTo:"one"},{id:"section2Intro",progress:"twoIntro",from:.12,to:.24},{id:"section2End",progress:"twoEnd",autoScroll:!0,from:.32,to:"section3"},{id:"section1Magnet",progress:"oneMagnet",autoScroll:!0,from:0,to:.24},{id:"sectionEndMagnet",progress:"endMagnet",from:.73,scrollFrom:.7,magnet:!0,scrollTo:1,to:.95,duration:7,backDuration:5,scrollEase:"sine.inOut",transition:j.TRANSITION_SCENE_4_TO_5}]}}const Ms=h=>{const e=st(),a={hasGyroscope:!1,needsPermission:!1};if(!e){h(a);return}if(localStorage.getItem("gyroscopePermissionDenied")==="true"){h(a);return}"DeviceOrientationEvent"in window?typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(n=>{n==="granted"?h({hasGyroscope:!0,needsPermission:!1}):n==="denied"?(localStorage.setItem("gyroscopePermissionDenied","true"),h(a)):h({hasGyroscope:!0,needsPermission:!0})}).catch(()=>{h({hasGyroscope:!0,needsPermission:!0})}):h({hasGyroscope:!0,needsPermission:!1}):h(a)},Ns=h=>{console.log("requestGyroscope",DeviceOrientationEvent.requestPermission),typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{console.log("permissionState:",e),h(e==="granted")}).catch(()=>{h(!1)}):h(!1)},Fs=({hasGyroscope:h,needsPermission:e})=>{if(h)if(e){const a=document.querySelector(".gyro-activate");a.classList.add("show"),a.addEventListener("click",l=>{if(a.classList.remove("show"),l){const n=document.elementFromPoint(l.clientX,l.clientY);if(n){const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,clientX:l.clientX,clientY:l.clientY});n.dispatchEvent(t)}}try{Ns(n=>{console.log(n),n?q.trigger({name:"deviceOrientationGranted"}):localStorage.setItem("gyroscopePermissionDenied","true")})}catch(n){console.error("Error requesting gyroscope permission:",n),localStorage.setItem("gyroscopePermissionDenied","true")}},{once:!0})}else q.trigger({name:"deviceOrientationGranted"})},xs=()=>{document.querySelector(".loading-logo").classList.add("show"),document.querySelector(".ll-video").classList.add("show"),document.querySelector("header").classList.add("show"),document.querySelector(".loading-cnt").classList.add("show"),Ms(Fs)},kt=(h,e="hover",a="menu_button",l=!0)=>{const{api:n}=ie();n.trigger({name:"triggerAnger"},{active:h}),l&&Us("cheetah_angry",e,a)};class Ds{constructor(){this.triggerAnger=this.triggerAnger.bind(this),this.releaseAnger=this.releaseAnger.bind(this),this.addEventListeners(),this.cooldown=150,this.angerDuration=350,this.canTriggerAnger=!0,this.angerActiveSince=null,this.cooldownTimeout=null,this.angerTimeout=null}triggerAnger(){const e=Date.now();this.canTriggerAnger&&(kt(!0),this.angerActiveSince=e,this.angerTimeout&&clearTimeout(this.angerTimeout),this.angerTimeout=setTimeout(()=>{this.canTriggerAnger=!0,this.angerActiveSince=null},this.angerDuration),this.canTriggerAnger=!1,this.cooldownTimeout&&clearTimeout(this.cooldownTimeout),this.cooldownTimeout=setTimeout(()=>{(!this.angerActiveSince||Date.now()-this.angerActiveSince>=this.angerDuration)&&(this.canTriggerAnger=!0)},this.cooldown))}releaseAnger(){kt(!1)}toggleListeners(e){e&&!this.cheetahEventAttached?this.addEventListeners():!e&&this.cheetahEventAttached&&this.cleanEventListeners()}addEventListeners(){document.body.addEventListener("mousedown",this.triggerAnger),document.body.addEventListener("touchstart",this.triggerAnger),document.body.addEventListener("mouseup",this.releaseAnger),document.body.addEventListener("touchend",this.releaseAnger),document.body.addEventListener("touchcancel",this.releaseAnger),document.body.addEventListener("mouseleave",this.releaseAnger),this.cheetahEventAttached=!0}cleanEventListeners(){document.body.removeEventListener("mousedown",this.triggerAnger),document.body.removeEventListener("touchstart",this.triggerAnger),document.body.removeEventListener("mouseup",this.releaseAnger),document.body.removeEventListener("touchend",this.releaseAnger),document.body.removeEventListener("touchcancel",this.releaseAnger),document.body.removeEventListener("mouseleave",this.releaseAnger),this.cheetahEventAttached=!1,this.releaseAnger()}destroy(){this.cleanEventListeners(),clearTimeout(this.angerTimeout),clearTimeout(this.cooldownTimeout)}}const ut=h=>{V.inSubpage=h;const{api:e}=ie();e&&e.trigger({name:"inSubPage"},{inSubpage:h})},he={MUTE_SOUND:"mute-sound",PLAY_SOUND:"play-sound",STOP_SOUND:"stop-sound",PLAY_TRANSITION:"play-transition",STOP_TRANSITION:"stop-transition",PLAY_MUSIC:"play-music",STOP_MUSIC:"stop-music",SCENE_4_PROGRESS:"scene-4-progress",PLAY_TRANSITION_ANCHOR:"play-transition-anchor"},Re=(h,e={})=>{document.dispatchEvent(new CustomEvent(h,{detail:e}))},fn=(h,e=!0)=>j[`INTERACTION_SCENE_${h==="section2"?2:4}_${e?"IN":"OUT"}`],Rs=(h,e=!0)=>{const a=fn(h,e);Re(he.PLAY_SOUND,{soundName:a})},Bs=(h,e=!0)=>{const a=fn(h,e);Re(he.STOP_SOUND,{soundName:a,fadeDuration:300})},lt=h=>{Re(he.PLAY_TRANSITION,{transition:h})},et=(h,e)=>{Re(he.STOP_TRANSITION,{transition:h,fadeDuration:e})},Gs=(h,e=!0,a=4600)=>{const n=j[`INTERACTION_SCENE_${h==="section2"?2:4}_LOOP`];Re(e?he.PLAY_TRANSITION:he.STOP_TRANSITION,{transition:n,fadeInDuration:a})},pn=h=>{Re(he.PLAY_TRANSITION_ANCHOR,{transition:h})},De=h=>{Re(he.PLAY_SOUND,{soundName:h})},Hs=h=>{Re(he.STOP_SOUND,{soundName:h})},qs=h=>{Re(he.MUTE_SOUND,{isOff:h})},Vs=(h,e=500)=>{Re(he.PLAY_MUSIC,{trackName:h,fadeDuration:e})},Qt=h=>{Re(he.SCENE_4_PROGRESS,{progress:h})},Xe={STARTED:"anchorScrollStarted",COMPLETED:"anchorScrollCompleted",UPDATE_PAGINATION:"updatePagination"},wt=3,mn=h=>{(h==="section2"?["section3"]:["section4","section5"]).forEach(a=>{const l=document.getElementById(`pgn-${a}`);l&&l.classList.add("active")})},Nt=(h,e)=>{const a=document.querySelector(".spgn-link.current");if(a&&a.id!==`pgn-${h}`)a.classList.remove("current","entered");else return;const l=document.getElementById(`pgn-${h}`);l&&(l.classList.add("current"),e||l.classList.add("entered"))},gn=(h,e,a,l,n)=>{ie().anchorScrolling&&q.trigger({name:"lenis:stop"}),Ae({anchorScrolling:!0});const t=e>window.scrollY?1:-1;document.dispatchEvent(new CustomEvent(Xe.STARTED,{detail:{section:h,direction:t}})),Ve(),q.trigger({name:"lenis:scrollTo"},{target:e,options:{immediate:!1,duration:wt,lock:!0,onComplete:()=>{Ae({anchorScrolling:!1}),document.dispatchEvent(new CustomEvent(Xe.COMPLETED,{detail:{progress:a,direction:t,passedSection2:l}}))},...n}})};class Ws{constructor(e,a){this.lenis=e,this.sections=a,this.links=[],this.handleLinkClick=this.handleLinkClick.bind(this),this.onTopEntered=this.onTopEntered.bind(this),this.onUpdatePagination=this.onUpdatePagination.bind(this),this.init(),this.paginationChapterSeen={section1:!1,section2:!1,section3:!1,section4:!1,section5:!1}}init(){this.setupSectionsEvents(),document.addEventListener("top-entered",this.onTopEntered),document.addEventListener(Xe.UPDATE_PAGINATION,this.onUpdatePagination)}onUpdatePagination(e){const{section:a}=e.detail,l=this.paginationChapterSeen[a];Nt(a,l),this.showLabelChapter()}setupSectionsEvents(){const e=this.lenis.progress,a=e>0;let l="section1";if(this.sections.slice(0,5).forEach(n=>{const t=n.id,s=document.getElementById(`pgn-${t}`);s&&(s.addEventListener("click",this.handleLinkClick),this.links.push(s),n.interactionCompleted&&mn(t),a&&n.from<=e&&(l=t))}),l!=="section1"){const n=this.paginationChapterSeen[l];Nt(l,n)}}onTopEntered(){this.sections=V.sectionsDom,this.setupSectionsEvents()}showLabelChapter(){const e=document.querySelector(".spgn-link.current");clearTimeout(this.showChapterLabelTimeout),this.showChapterLabelTimeout=setTimeout(()=>{if(e){e.classList.remove("entered");const a=e.id.replace("pgn-","");this.paginationChapterSeen[a]=!0}},2300)}getCurrenSectionLinkId(){const e=document.querySelector(".spgn-link.current");return e?Number(e.id.replace("pgn-section","")):null}handleLinkClick(e){e.preventDefault();const l=e.currentTarget.id.replace("pgn-",""),n=this.sections.find(o=>o.id===l),t=this.getCurrenSectionLinkId()||10;let s=1;if(n){const o=l==="section2";let i=0,r={};switch(l){case"section2":s=2,i=n.from+.15;break;case"section3":s=3,i=n.from+.02;break;case"section4":s=4,i=n.from+.05;break;case"section5":s=5,i=1;break}const c=Math.min(4,Math.abs(s-t)),u=Math.min(wt,c*(wt/3));r.duration=u,o&&window.scrollY<10?(pn(j.TRANSITION_SCENE_1_TO_2),r={duration:wt,easing:m=>m<.5?(1-Math.sqrt(1-Math.pow(2*m,2)))/2:(Math.sqrt(1-Math.pow(-2*m+2,2))+1)/2}):l==="section3"&&(r.easing=m=>m),Nt(l);const d=!o&&l!=="section1",p=(document.body.scrollHeight-window.innerHeight)*i;gn(l,p,i,d,r)}}dispose(){this.links.forEach(e=>{e.removeEventListener("click",this.handleLinkClick)}),this.links=[],document.removeEventListener("top-entered",this.onTopEntered),document.removeEventListener(Xe.UPDATE_PAGINATION,this.onUpdatePagination)}}class js{constructor(){this.main=document.querySelector("main"),this.header=document.querySelector("header"),this.element=document.querySelector(".htibtn"),this.interactArea=document.querySelector("main"),this.pagination=document.querySelector(".section-pag"),this.timeout=null,this.active=!1,this.throttleLimit=500,this.interactionArea=!1,this.interacting=!1,this.forceHide=!1,this.currentUserIndicator=null,this.body=document.querySelector("body"),this.clientX=0,this.clientY=0,this.touchDevice=st(),this.timeInteractionStarted=0,this.listenersAdded=!1,this.holdStartTime=null,this.holdTimeout=null,this.extendedInteractionTimeout=null,this.mouseReleased=!1,this.holdThreshold=150,this.extendedDuration=4e3,this.holdProgress=250,this.progressStartTime=null,this.progressCircle=this.element.querySelector(".progress-circle-fill"),this.progressCircleLocked=this.element.querySelector(".pcf-locked"),this.radius=this.progressCircle.r.baseVal.value,this.circumference=2*Math.PI*this.radius,this.progressCircle.style.strokeDasharray=`${this.circumference}`,this.progressCircle.style.strokeDashoffset=`${this.circumference}`,this.progressCircleLocked.style.strokeDasharray=`${this.circumference}`,this.progressCircleLocked.style.strokeDashoffset=`${this.circumference}`,this.inSubpage=!1,this.wasActiveOnEnteringTopPage=!1,this.handleInSubpage=this.handleInSubpage.bind(this),this.debounceTransitionSoundIn=null,this.debounceTransitionSoundOut=null,this.touchDevice?(this.closeButton=document.querySelector(".htibtn-close"),this.element.classList.add("mobile")):(this.centerOnScreen(),this.onMouseMove=this.onMouseMove.bind(this),this.throttledMouseMove=this.throttle(this.onMouseMove,this.throttleLimit),document.addEventListener("mousemove",this.throttledMouseMove)),document.addEventListener("top-entered",this.onTopEntered)}initMobileUI=()=>{document.querySelectorAll(".user-step").forEach(e=>{e.classList.add("mobile")})};onTopEntered=()=>{if(this.pagination=document.querySelector(".section-pag"),this.active&&(this.currentUserIndicator=document.querySelector(`.${this.interactionArea} .user-step`),setTimeout(()=>{this.showElement()},100)),this.touchDevice){const e=document.querySelector(".hold-tr"),a=document.querySelector(".tap-tr");e.classList.add("dnone"),e.setAttribute("aria-hidden","true"),a.classList.remove("dnone"),a.setAttribute("aria-hidden","false"),this.initMobileUI()}};init=e=>{this.active||(this.interactionArea=e,this.currentSectionCompleted=this.isSectionInteractionCompleted(),this.interactionStarted=!1,this.firstInteractionHoldTimingCompleted=!1,this.currentUserIndicator=document.querySelector(`.${this.interactionArea} .user-step`),this.active=!0,this.initListeners(),this.show())};show=()=>{this.timeout&&clearTimeout(this.timeout),this.showElement()};showElement=()=>{this.forceHide||(this.body.classList.add("interactive"),this.addHiddenClassTimeout&&clearTimeout(this.addHiddenClassTimeout),this.element.classList.remove("vhidden"),this.element.classList.add("show"),this.currentUserIndicator?.classList.add("show"),this.touchDevice?this.element.classList.remove("hide"):(this.updateThrottleLimit(30),this.onMouseMove()))};hide=()=>{this.active=!1,this.interacting&&this.stopIsInteracting(),this.body.classList.remove("interactive"),this.hideElement()};hideElement=e=>{this.element.classList.remove("show"),this.addHiddenClassTimeout=setTimeout(()=>{this.element.classList.add("vhidden")},400),e||this.currentUserIndicator?.classList.remove("show"),this.touchDevice||this.updateThrottleLimit(400)};initListeners=()=>{this.listenersAdded||(this.listenersAdded=!0,document.addEventListener("menuOpen",this.onMenuOpen),q.on("inSubPage",this.handleInSubpage),this.touchDevice?this.element.addEventListener("click",this.triggerIsInteracting,{passive:!0}):(document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mouseleave",this.onMouseLeave),document.addEventListener("mouseenter",this.onMouseEnter)))};stopListeners=()=>{this.listenersAdded=!1,document.removeEventListener("menuOpen",this.onMenuOpen),q.off(this.handleInSubpage),this.touchDevice?(this.element.removeEventListener("click",this.triggerIsInteracting),this.closeTouchInteraction()):(document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mouseleave",this.onMouseLeave),document.removeEventListener("mouseenter",this.onMouseEnter))};triggerSoundInteractions(e,a){if(!(e&&this.debounceTransitionSoundIn||!e&&this.debounceTransitionSoundOut)){if(Gs(this.interactionArea,e),!e&&a<.35){a<.2&&Bs(this.interactionArea,!0);return}Rs(this.interactionArea,e),e?this.debounceTransitionSoundIn=setTimeout(()=>{this.debounceTransitionSoundIn=null},400):this.debounceTransitionSoundOut=setTimeout(()=>{this.debounceTransitionSoundOut=null},400)}}handleInSubpage({inSubpage:e}){this.inSubpage=e,this.inSubpage&&this.active?(this.element.classList.add("hide"),this.body.classList.remove("interactive"),this.wasActiveOnEnteringTopPage=!0,this.active=!1):!this.inSubpage&&this.wasActiveOnEnteringTopPage&&(this.wasActiveOnEnteringTopPage=!1,this.active=!0,setTimeout(()=>{this.toggleVisibilityBasedOnPosition()},1),this.body.classList.add("interactive"))}onMouseDown=e=>{if(!(!this.active||this.touchDevice||this.isTriggeringOnOtherElement(e?.target))){if(this.timeInteractionStarted=Date.now(),this.progressStartTime=Date.now(),this.mouseReleased=!1,this.currentSectionCompleted||this.firstInteractionHoldTimingCompleted){this.triggerIsInteracting(e);return}this.firstInteractionHoldTimingCompleted=!1,this.initInteraction(),this.active=!0,this.holdStartTime=Date.now(),this.holdTimeout=setTimeout(()=>{this.firstInteractionHoldTimingCompleted=!0,this.mouseReleased||(this.triggerIsInteracting(e),this.startExtendedInteraction())},this.holdThreshold)}};onMouseUp=e=>{if(!(!this.active||this.touchDevice)){if(this.mouseReleased=!0,this.firstInteractionHoldTimingCompleted&&this.holdStartTime&&Date.now()-this.holdStartTime<this.holdThreshold){this.clearInteractionTimers();return}this.extendedInteractionTimeout||(clearTimeout(this.holdTimeout),this.stopIsInteracting(),this.resetProgress())}};updateProgress=()=>{if(this.mouseReleased||!this.progressStartTime){this.resetProgress();return}const e=Date.now()-this.progressStartTime,a=Math.min(e/this.holdProgress,1),l=this.circumference-a*this.circumference;this.progressCircle.style.strokeDashoffset=l,a<1&&(this.progressAnimationFrame=requestAnimationFrame(this.updateProgress))};resetProgress=()=>{this.progressCircle.style.strokeDashoffset=this.circumference,this.progressAnimationFrame&&(cancelAnimationFrame(this.progressAnimationFrame),this.progressAnimationFrame=null)};lockedCircleProgressStart=()=>{const e=Date.now()-this.lockStartTime,a=Math.min(e/this.extendedDuration,1),l=this.circumference-a*this.circumference;this.progressCircleLocked.style.strokeDashoffset=l,a<1&&(this.lockedProgressAnimationFrame=requestAnimationFrame(this.lockedCircleProgressStart))};resetLockedCircleProgress=()=>{this.progressCircleLocked.style.strokeDashoffset=this.circumference,this.lockedProgressAnimationFrame&&(cancelAnimationFrame(this.lockedProgressAnimationFrame),this.lockedProgressAnimationFrame=null)};startExtendedInteraction=()=>{this.lockStartTime=Date.now(),this.lockedCircleProgressStart(),this.extendedInteractionTimeout=setTimeout(()=>{this.extendedInteractionTimeout=null,setTimeout(()=>{this.resetLockedCircleProgress()},120),this.mouseReleased&&(this.stopIsInteracting(),this.resetProgress())},this.extendedDuration)};clearInteractionTimers=()=>{clearTimeout(this.holdTimeout),clearTimeout(this.extendedInteractionTimeout),this.holdTimeout=null,this.extendedInteractionTimeout=null,this.holdStartTime=null};isTriggeringOnOtherElement=e=>!!(!this.touchDevice&&e&&(e.closest(".right-header")||e.closest(".logomark-header")||e.closest(".logotext-header")||e.closest(".section-pag")));triggerIsInteracting=e=>{this.active&&(this.isTriggeringOnOtherElement(e?.target)||(this.extendedInteractionTimeout===null&&this.triggerSoundInteractions(!0),this.main.classList.add("interacting"),this.touchDevice?(this.header.classList.add("hide"),this.closeButton.addEventListener("click",this.stopIsInteracting,{once:!0}),this.showButtonCloseTimeout=setTimeout(()=>{this.closeButton.classList.add("show")},1500)):this.lockedProgressAnimationFrame||this.updateProgress(),this.initInteraction()))};initInteraction=()=>{const{api:e}=ie();this.interacting=!0,e.trigger({name:"isInteracting"},{value:!0,area:this.interactionArea}),this.interactionStarted=Date.now(),Yt(this.interactionArea,!0),this.element.classList.add("hide","interacting"),this.pagination?.classList.add("hide"),this.currentUserIndicator?.classList.remove("show"),it()};isSectionInteractionCompleted=()=>V.sectionsDom.find(a=>a.id===this.interactionArea)?.interactionCompleted||!1;interactionCompleted=()=>{if(this.currentSectionCompleted)return;const e=V.sectionsDom.find(a=>a.id===this.interactionArea);e&&(this.currentSectionCompleted=!0,e.interactionCompleted=!0,mn(this.interactionArea)),localStorage.setItem(`section-interaction-${this.interactionArea}`,!0),this.currentUserIndicator?.classList.add("completed"),document.dispatchEvent(new CustomEvent("interactionCompleted",{detail:{area:this.interactionArea}},{once:!0}))};stopIsInteracting=()=>{if(this.interactionStarted){const n=(Date.now()-this.interactionStarted)/1e3;n>1.1&&this.interactionCompleted(),Yt(this.interactionArea,!1,n)}const e=(Date.now()-this.timeInteractionStarted)/1e3;this.interactionStarted=!1;const{api:a,anchorScrolling:l}=ie();!l&&this.interacting&&this.extendedInteractionTimeout===null&&this.triggerSoundInteractions(!1,e),this.interacting=!1,a.trigger({name:"isInteracting"},{value:!1,area:this.interactionArea}),this.pagination?.classList.remove("hide"),this.currentUserIndicator?.classList.add("show"),this.main.classList.remove("interacting"),this.closeTouchInteraction(),this.shouldHideElement()||this.element.classList.remove("hide","interacting"),!this.body.classList.contains("autoscroll")&&this.active&&Ve()};closeTouchInteraction=()=>{this.touchDevice&&(this.header.classList.remove("hide"),clearTimeout(this.showButtonCloseTimeout),this.closeButton.classList.remove("show"),this.closeButton.removeEventListener("click",this.stopIsInteracting))};shouldHideElement=()=>{if(this.touchDevice)return!1;const e=window.innerWidth/2,a=this.clientX>e-150&&this.clientX<e+150,l=this.clientY>window.innerHeight-90,n=this.clientX>window.innerWidth-120;return this.clientY<115||this.interacting||l&&a||n};toggleVisibilityBasedOnPosition=()=>{this.element.classList.toggle("hide",this.shouldHideElement())};onMouseMove=e=>{if(e){const{clientX:a,clientY:l}=e;this.clientX=a,this.clientY=l}this.element.style.transform=`translate3d(${this.clientX}px, ${this.clientY-15}px, 0)`,this.active&&this.toggleVisibilityBasedOnPosition()};onMenuOpen=e=>{this.forceHide=e.detail.open,this.forceHide?this.hideElement():this.active&&this.showElement(),this.toggleVisibilityBasedOnPosition()};onMouseLeave=()=>{this.active&&this.hideElement(!0)};onMouseEnter=()=>{this.active&&this.showElement()};centerOnScreen=()=>{this.element.style.transform=`translate3d(${window.innerWidth/2}px, ${window.innerHeight/2}px, 0)`};kill=()=>{this.active&&(this.currentSectionCompleted=!1,this.active=!1,this.stopIsInteracting(),this.interactionArea=!1,this.hide(),this.timeout=setTimeout(this.stopListeners,200))};throttle=(e,a)=>{let l,n;return function(...t){const s=this;n?(clearTimeout(l),l=setTimeout(function(){Date.now()-n>=a&&(e.apply(s,t),n=Date.now())},Math.max(a-(Date.now()-n),0))):(e.apply(s,t),n=Date.now())}};dispose(){this.kill(),document.removeEventListener("mousemove",this.throttledMouseMove)}updateThrottleLimit=e=>{this.throttleLimit!==e&&(this.throttleLimit=e,document.removeEventListener("mousemove",this.throttledMouseMove),this.throttledMouseMove=this.throttle(this.onMouseMove,this.throttleLimit),document.addEventListener("mousemove",this.throttledMouseMove))}}class $s{constructor(){this.timerId=null,this.hasBeenShown=!1}init(e=2500){this.element=document.querySelector(".section1"),!(!this.element||this.timerId!==null||this.element.classList.contains("show"))&&(this.hasBeenShown=!1,this.timerId=setTimeout(()=>{this.hasBeenShown=!0,this.timerId=null,this.element?.classList.add("show")},e),this.timerHelper=setTimeout(()=>{this.element?.querySelector("p").classList.add("fadeinout")},e+5e3))}passedSection1(e){e&&clearTimeout(this.timerHelper),this.hasBeenShown?this.element?.classList.toggle("hide",e):e&&(this.stop(),this.element?.classList.add("show","hide"),this.hasBeenShown=!0)}stop(){this.timerId!==null&&(clearTimeout(this.timerId),this.timerId=null)}dispose(){this.hasBeenShown=!1,this.stop()}}class zs{constructor(e){this.parent=e,this.lenis=e.lenis,this.handleKeydown=this.handleKeydown.bind(this),this.scrollStep=1,this.disable=!1,this.body=document.body,this.init()}init(){window.addEventListener("keydown",this.handleKeydown)}scrollUp(){this.lenis.scrollTo(this.lenis.targetScroll-this.scrollStep)}scrollDown(){this.lenis.scrollTo(this.lenis.targetScroll+this.scrollStep)}handleKeydown(e){if(this.disable||this.body.hasAttribute("data-lenis-prevent"))return;const a=e?.key;a==="ArrowUp"||a==="PageUp"?this.scrollUp():a==="ArrowDown"||a==="PageDown"?this.scrollDown():a===" "&&(e.shiftKey?this.scrollUp():this.scrollDown())}}class Ys{constructor(){this.headlineDomsActive=st(),this.currentHeadline=null,this.headlineDomsActive&&(this.enteringFromSubPage=!1,this.updateSectionList(),this.updateDom())}updateDom(){this.headlinesContainer=document.querySelector(".sections-headlines")}enteredBackFromSubPage(){this.enteringFromSubPage=!0,setTimeout(()=>{this.enteringFromSubPage=!1,this.currentHeadline&&this.toggleHeadline(this.currentHeadline,!0)},500),this.headlinesContainer.querySelector(".headline-section1").classList.add("intro-completed")}enteredTopPage(e,a){this.currentHeadline=null,this.updateDom(),a&&this.enteredBackFromSubPage(),this.update(e)}updateSectionList(){this.headlinesSections=V.sectionsDom.filter(e=>e.dom)}toggleHeadline(e,a){if(a&&this.enteringFromSubPage)return;const l=this.headlinesContainer.querySelector(`.headline-${e}`);l&&l.classList.toggle("show",a)}update(e){if(!this.headlineDomsActive||!this.headlinesContainer)return;let a=null;for(const l of this.headlinesSections)if(l.headlineFrom<=e&&l.headlineTo>=e){a=l.id;break}this.currentHeadline!==a&&(a&&this.toggleHeadline(a,!0),this.currentHeadline&&this.toggleHeadline(this.currentHeadline,!1),this.currentHeadline=a)}}class Ks{constructor(e){this.currentSection=e,this.initSectionsTracking()}initSectionsTracking=()=>{this.intervalPushTracking=null,this.sectionTracking={},this.trackUpdateProgress=0,this.pauseTracking=!1,this.inSubpage=(document.querySelector(".contact")||document.querySelector(".about"))!==null,V.sectionsDom.filter(e=>e.analytics).forEach(e=>{this.sectionTracking[e.id]={current:!1,time_spent:0}}),this.checkToStartTrackingSection=this.checkToStartTrackingSection.bind(this),this.sectionTracking[this.currentSection].current=!0,this.addEventListeners()};checkToStartTrackingSection(){!this.intervalPushTracking&&V.websiteStarted&&(this.startTracking(),q.off("startWebsite",this.checkToStartTrackingSection))}addEventListeners=()=>{if(window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener("visibilitychange",this.handleVisibilityChange),document.addEventListener("menuOpen",this.onMenuOpen),q.on("startWebsite",this.checkToStartTrackingSection),document.addEventListener("subpage-entered",()=>{this.inSubpage=!0}),document.addEventListener("top-entered",()=>{this.checkToStartTrackingSection(),this.inSubpage=!1}),!this.inSubpage){const e=document.getElementById("loader"),a=new MutationObserver(l=>{l.forEach(n=>{n.attributeName==="class"&&e.classList.contains("hide")&&(this.startTracking(),a.disconnect())})});a.observe(e,{attributes:!0})}};startTracking=()=>{this.intervalPushTracking=setInterval(this.updateTracking,100)};changeCurrentSection=e=>{this.currentSection!==e&&(this.currentSection=e,_s(e))};updateTracking=()=>{this.pauseTracking||this.inSubpage||(this.sectionTracking[this.currentSection].time_spent+=.1,this.trackUpdateProgress+=1,this.trackUpdateProgress>=120&&(this.trackUpdateProgress=0,this.pushTracking()))};pushTracking=()=>{Object.keys(this.sectionTracking).filter(e=>this.sectionTracking[e].time_spent>0).forEach(e=>{Cs(e,this.sectionTracking[e].time_spent),this.sectionTracking[e].time_spent=0})};handleVisibilityChange=()=>{this.pauseTracking=document.visibilityState==="hidden"};handleBeforeUnload=()=>{this.pushTracking()};onMenuOpen=e=>{this.pauseTracking=e.detail.open}}class Xs{constructor(e){this.mainScroll=e}getDuration(e,a,l,n){const t=Math.abs(e-a),s=l/t,o=this.mainScroll.pixelsToProgress(window.scrollY);return Math.abs(o-n)*s}scrollTo=(e,a,l,n)=>{it();const{scrollEase:t="none",duration:s=1.5,from:o,scrollTo:i,backDuration:r=1.5}=n,c=e===-1?0:e,u=l===1?s:r,d=this.getDuration(o,i,u,a);this.mainScroll.lenis.scrollTo(this.mainScroll.progressToScrollPixels(this.mainScroll.previousProgress),{immediate:!0,lock:!0}),l===1&&n.transition&&pn(n.transition),Ye.to(window,{duration:d,scrollTo:{y:c,autoKill:!1},ease:t,onComplete:()=>{this.mainScroll.isDuringMagnet=!1,Ve(),this.mainScroll.keyboardScrollController.disable=!1,this.mainScroll.handleScroll({progress:a,direction:l})}})}}const it=h=>{document.body.setAttribute("data-lenis-prevent",""),document.body.style.overflow="hidden"},Ve=()=>{document.body.removeAttribute("data-lenis-prevent"),document.body.style.overflow="",document.body.classList.remove("autoscroll")};class Js{constructor(e,a){Ye.registerPlugin(Fn),this.lenis=e,this.previousProgress=0,this.frozeScroll=!1,this.autoscroll=a,this.autoscroll.lenis=e,this.isDuringMagnet=!1,this.scrollLockTimeout=null,this.passedSection2=!1,this.currentSection="section1",this.isTouchDevice=ft(),this.scrollHeadlineControler=new Ys,this.section1Helper=new $s,this.config=this.setupConfig(),this.magnetScroll=new Xs(this),this.lenis.on("scroll",l=>{this.scrollDimensions=l.dimensions?.scrollHeight,this.handleScroll(l),this.previousProgress=l.progress}),this.interactionButton=new js,this.cheetahAngerController=new Ds,this.paginationController=new Ws(this.lenis,V.sectionsDom),this.sectionsAnalytics=new Ks(this.currentSection),this.enterTop(),this.eventsStateListener(),document.addEventListener("top-entered",this.enterTop),this.keyboardScrollController=new zs(this),this.setupComplete=!0}menuToggled=e=>{const a=e.detail.open;this.frozeScroll=a,a?this.autoscroll.isStarted()&&(this.autoScrollWasStarted=!0,this.autoscroll.stop(!0)):this.autoScrollWasStarted&&(this.autoScrollWasStarted=!1,this.autoscroll.start(this.autoscroll.direction))};eventsStateListener=()=>{document.addEventListener("menuOpen",this.menuToggled),document.addEventListener(Xe.STARTED,e=>{const{section:a}=e.detail,l=this.autoscroll.isStarted();a!=="section3"?l&&this.autoscroll.stop():l||this.autoscroll.start()}),document.addEventListener(Xe.COMPLETED,e=>{const a=e.detail;this.passedSection2=a.passedSection2,V.scroll=a.progress,this.handleScroll(a)})};enterTop=()=>{this.sectionEnd=document.querySelector(".end"),this.sectionEnd?(this.sectionEnd.addEventListener("click",()=>{qe("last-section-about-btn","navigation","click")},{once:!0}),this.setupComplete&&(V.introCheetahSeen?(this.section1Helper.dispose(),this.section1Helper.init(10),this.scrollHeadlineControler.enteredTopPage(this.lenis.progress,!0),this.autoscroll.isStarted()||Ve()):this.websiteStarted?(this.scrollHeadlineControler.updateDom(),this.section1Helper.init()):q.on("startWebsite",()=>{this.websiteStarted=!0,this.section1Helper.init(),this.scrollHeadlineControler.enteredTopPage(this.lenis.progress,!1),q.off("startWebsite")}),this.handleScroll({progress:this.lenis.progress,direction:0},!0))):q.on("startWebsite",()=>{this.websiteStarted=!0})};setupConfig=()=>V.sectionsDom.filter(l=>l.magnet||l.autoScroll||l.interactionArea||l.main);showInteractButton=e=>{this.interactionButton.init(e)};hideInteractButton=()=>{this.interactionButton.kill()};progressToScrollPixels=e=>(this.scrollDimensions-window.innerHeight)*e;pixelsToProgress=e=>e/(this.scrollDimensions-window.innerHeight);checkMagnet=(e,a)=>{if(a.direction===0)return!1;const l=a.progress;if(l>e.from&&l<e.to){const n=a.direction===1?e.scrollTo:e.scrollFrom;if(Math.abs(l-n)<.01)return!1;this.isDuringMagnet=!0,this.keyboardScrollController.disable=!0;const t=e.transitions;return t&&a.direction===1&&t.in&&setTimeout(()=>{lt(t.in)},t.inDelay||0),this.magnetScroll.scrollTo(this.progressToScrollPixels(n),n,a.direction,e),!0}return!1};checkAutoScroll=(e,a)=>{const{id:l,from:n,to:t}=e,s=a.progress;return s>n&&s<=t?(this.autoscroll.isStarted()||this.autoscroll.start(),this.isTouchDevice||(l==="section3"?s<n+.02||s>t-.06?this.autoscroll.enableUserScroll=!1:this.autoscroll.enableUserScroll=!0:l==="section2End"?s>n+.3&&s<t?(this.autoscroll.enableUserScroll=!1,it()):(this.autoscroll.enableUserScroll=!0,Ve()):this.autoscroll.enableUserScroll=!0),!0):!1};updateCurrentSectionState(e,a){const l=e<.2,n=e>.8,t=this.currentSection==="section1",s=!l&&t?"section2":"section1";(this.currentSection!==this.previousSection||l&&!t||n&&this.currentSection!=="section5")&&(l?this.currentSection="section1":n&&(this.currentSection="section5"),document.dispatchEvent(new CustomEvent(Xe.UPDATE_PAGINATION,{detail:{section:this.currentSection}})),this.previousSection=this.currentSection,a||Vs(this.currentSection!=="section1"?this.currentSection:s))}handleScroll=(e,a)=>{if(this.frozeScroll&&!a)return;const l=ie().anchorScrolling,n=e.progress;let t=!1,s=!1;const o=this.autoscroll.isStarted(),i=n===0;let r="section1";n===this.previousProgress&&!a||(this.previousProgress=n,this.cheetahAngerController.toggleListeners(i),this.scrollHeadlineControler.update(n),this.config.forEach(c=>{this.sectionEnd&&this.sectionEnd.classList.toggle("show",n>.952);const u=n>=c.from&&n<=c.to;if(this.section1Helper.passedSection1(n>0),c.interactionArea&&!s&&n>=c.interactionFrom&&n<=c.interactionTo&&(s=c.id,c.id==="section2"&&document.dispatchEvent(new CustomEvent("section2InteractionArea"))),!this.isDuringMagnet&&!l){if(this.keyboardScrollController.disable=!1,c.analytics&&(u?r=c.id:n>.7&&(r="section5")),c.magnet&&!o){if(this.checkMagnet(c,e)){t=!0;return}}else if(c.autoScroll&&this.checkAutoScroll(c,e)){t=!0;return}}}),this.keyboardScrollController.scrollStep=this.currentSection==="section4"||this.currentSection==="section3"?60:1,s?this.showInteractButton(s):this.hideInteractButton(),!this.isDuringMagnet&&!l&&(t||this.autoscroll.isStarted()&&(Ve(),this.autoscroll.stop()),this.currentSection!==r&&(this.currentSection=r,this.sectionsAnalytics.changeCurrentSection(r),this.currentSection==="section2"&&this.previousSection!=="section2"&&(this.passedSection2=this.previousSection))),this.updateCurrentSectionState(n,l))}}const _t=h=>{h.classList.remove("show"),h.querySelectorAll(".mask-appear").forEach(a=>{a.style.setProperty("--apg-1",0),a.style.setProperty("--apg-2",0)})},nt=(h,e=.6)=>{const a=Ye.timeline(),l=h.querySelectorAll(".mask-l1"),n=h.querySelectorAll(".mask-l2"),t=[...l,...n];setTimeout(()=>{h.classList.add("show")},1);const s=.3;let o=e,i=0;const r=t.length/2;t.forEach((c,u)=>{u===r&&(i=0,o=o+.2),a.to(c,{duration:s,"--apg-1":1,ease:"power2.out",delay:o},.1+.15*i),a.to(c,{duration:s,"--apg-2":1,ease:"power2.out",delay:o+.1},.1+.15*i),i++}),a.play()},vn=()=>{const h=document.querySelector(".about");h&&(h.classList.remove("hide"),setTimeout(()=>{h.classList.add("enter-complete")},1200));const e=document.querySelector(".about-ttl");e&&(nt(e),document.querySelector(".about-txtc").classList.add("show"))},Sn=()=>{const h=document.querySelector(".contact-mail .tabcntitm-1");h&&(document.querySelector(".contact")?.classList.remove("hide"),h.querySelector(".anim-mask-grp").classList.add("show"),nt(h))};class Qs{constructor(e){this.navBtnLogo3d=document.querySelector(".nav-logo-link"),this.logoText=document.querySelector(".logotext-header"),this.logoMark=document.querySelector(".logomark-header"),this.menuButton=document.querySelector(".menu-btn"),this.langButton=document.querySelector(".lang-btn"),this.contactHeader=document.getElementById("contact-nav"),this.menu=document.querySelector("nav"),this.main=document.querySelector("main"),this.enableHover=!ft(),this.hoverTimeout=!1,this.isCooldown=!1,this.cleanMaskTimeout=null,this.closeMenu=this.closeMenu.bind(this),this.handleNavBtnHover=this.handleNavBtnHover.bind(this),this.handleLogoClick=this.handleLogoClick.bind(this),this.handleMenuButtonClick=this.handleMenuButtonClick.bind(this),this.playSoundSimpleHover=De.bind(this,le.SIMPLE_HOVER),this.playSoundSimpleOut=De.bind(this,le.SIMPLE_OUT),this.triggerSubpage=this.triggerSubpage.bind(this),this.api=e,this.initEvents()}initEvents(){this.menuButton.addEventListener("click",this.handleMenuButtonClick),document.querySelectorAll(".nav-btn").forEach(a=>{a.addEventListener("click",this.triggerSubpage),a.addEventListener("mouseenter",this.handleNavBtnHover)}),this.logoText.addEventListener("click",this.handleLogoClick),this.logoMark.addEventListener("click",this.handleLogoClick),this.navBtnLogo3d.addEventListener("click",this.handleLogoClick),this.enableHover&&(this.menuButton.addEventListener("mouseenter",()=>{De(le.MENU_BTN_HOVER),kt(!0)}),this.menuButton.addEventListener("mouseleave",()=>{De(le.MENU_BTN_OUT),kt(!1)}),this.contactHeader.addEventListener("mouseenter",this.playSoundSimpleHover),this.contactHeader.addEventListener("mouseleave",this.playSoundSimpleOut))}triggerSubpage(){ut(!0),this.toggleMenu(!1)}handleMenuButtonClick(){if(this.isCooldown)return;const e=this.menuButton.classList.contains("active");qe("menu","navigation","click",e?"close":"open"),this.toggleMenu(!e)}isMenuOpen(){return this.menuButton.classList.contains("active")}handleLogoClick(){const e=bi(),a=this.isMenuOpen();a&&!e&&ut(!1),!(a||window.scrollY===0)&&e&&(gn("section1",0,0),qe("logo","scroll","click","scrollToTop"))}initMenuCloseListeners(){this.logoText.addEventListener("click",this.closeMenu,{once:!0}),this.navBtnLogo3d.addEventListener("click",this.closeMenu,{once:!0}),this.logoMark.addEventListener("click",this.closeMenu,{once:!0}),this.contactHeader.addEventListener("click",this.triggerSubpage,{once:!0}),document.addEventListener("CHANGE_PAGE",this.closeMenu),this.langButton.addEventListener("click",this.closeMenu,{once:!0}),this.enableHover&&(this.langButton.addEventListener("mouseenter",this.playSoundSimpleHover),this.langButton.addEventListener("mouseleave",this.playSoundSimpleOut))}removeMenuCloseListeners(){this.logoText.removeEventListener("click",this.closeMenu),this.navBtnLogo3d.removeEventListener("click",this.closeMenu),this.logoMark.removeEventListener("click",this.closeMenu),this.contactHeader.removeEventListener("click",this.triggerSubpage),document.removeEventListener("CHANGE_PAGE",this.closeMenu),this.langButton.removeEventListener("click",this.closeMenu),this.enableHover&&(this.langButton.removeEventListener("mouseenter",this.playSoundSimpleHover),this.langButton.removeEventListener("mouseleave",this.playSoundSimpleOut))}toggleMenuEvents(e){this.api.trigger({name:"menuOpen"},{open:e}),document.dispatchEvent(new CustomEvent("menuOpen",{detail:{open:e}})),De(e?le.MENU_IN:le.MENU_OUT)}closeMenu(){Hs(le.LOGO_LOOP),this.menuButton.setAttribute("aria-label","Menu"),this.removeMenuCloseListeners(),this.menuButton.classList.remove("active"),this.menu.classList.remove("show"),this.main.classList.remove("menu-open"),this.cleanMaskTimeout=setTimeout(()=>{_t(this.menu)},500),Ae({menuOpen:!1}),document.querySelector(".contact")||document.querySelector(".about")||Ve(),De(le.MENU_OUT),this.toggleMenuEvents(!1),this.initiateCooldown()}toggleMenu(e){e?(clearTimeout(this.cleanMaskTimeout),Ae({menuOpen:!0}),this.initMenuCloseListeners(),De(le.LOGO_LOOP),this.menuButton.classList.add("active"),this.menuButton.setAttribute("aria-label","Close Menu"),this.menu.classList.add("show"),this.main.classList.add("menu-open"),nt(this.menu,.3),it(),this.toggleMenuEvents(!0)):this.closeMenu()}handleNavBtnHover(e){if(this.hoverTimeout)return;const a=e.currentTarget,l=a.id;De(l==="nav-contact"?le.CONTACT_HOVER:le.ABOUT_HOVER),this.hoverTimeout=!0,_t(a),nt(a,0),setTimeout(()=>{this.hoverTimeout=!1},100)}initiateCooldown(){this.isCooldown=!0,setTimeout(()=>{this.isCooldown=!1,this.menuButton.disabled=!1},500)}}class Zs{constructor(){this.soundButton=document.querySelector(".sound-button"),this.muteLabel=window.i18n?.mute||"Mute Sound",this.unmuteLabel=window.i18n?.unmute||"Unmute Sound",this.initListeners(),localStorage.getItem("isMuted")==="true"&&this.toggleSound(!1,!1)}initListeners(){this.soundButton.addEventListener("click",this.switchSound.bind(this))}switchSound(){const e=!this.soundButton.classList.contains("off");this.toggleSound(!e)}toggleSound(e,a=!0){const l=!e;this.soundButton.classList.toggle("off",l),this.soundButton.setAttribute("aria-label",l?this.unmuteLabel:this.muteLabel),a&&(qs(l),qe("sound_button","navigation","toggle",l?"off":"on"))}}class ei extends xn{onLeave({from:e,trigger:a,done:l}){document.querySelector(".top-container")?.classList.add("hide"),document.querySelector(".contact")?.classList.add("hide"),document.querySelector(".about")?.classList.add("hide"),document.querySelector(".sections-headlines")?.classList.add("hide");const{animMenu:n}=ie(),t=n.value===0,s=V.inSubpage===ie().navigateToSubPage,{api:o}=ie(),i=t&&!s&&V.websiteStarted;i&&(document.querySelector("main").classList.add("menu-open"),Ae({pageTransition:!0}),o.trigger({name:"pageTransition"},{pageTransition:!0}),o.trigger({name:"menuOpen"},{open:!0})),setTimeout(()=>{l()},i?1e3:600)}onEnter({to:e,trigger:a,done:l}){const{api:n}=ie();document.querySelector("main").classList.remove("menu-open"),n.trigger({name:"menuOpen"},{open:!1}),Is(window.location.pathname,document.title),n.trigger({name:"pageTransition"},{pageTransition:!1}),l(),setTimeout(()=>{document.querySelector(".top-container")?.classList.remove("hide"),V.websiteStarted&&(vn(),Sn())},10)}onEnterCompleted(){}}class ti{constructor(){this.mapLink=document.getElementById("map-link"),this.mapLink&&(this.snsLinks=document.querySelectorAll(".sns-item"),this.mails=document.querySelectorAll(".mail"),this.hoverTimeout=!1,this.enableHover=!ft(),this.trackMap=this.trackMap.bind(this),this.trackSns=this.trackSns.bind(this),this.trackMail=this.trackMail.bind(this),this.handleMailHover=this.handleMailHover.bind(this),this.init())}init(){this.mapLink.addEventListener("click",this.trackMap),this.snsLinks.forEach(e=>{e.addEventListener("click",this.trackSns)}),this.mails.forEach(e=>{e.addEventListener("click",this.trackMail),this.enableHover&&e.addEventListener("mouseenter",this.handleMailHover)})}trackMap(){this.trackAnalytics("address","map")}trackSns(e){const a=e.currentTarget;this.trackAnalytics(a.id,"sns")}trackMail(e){const a=e.currentTarget;this.trackAnalytics(a.id,"email")}trackAnalytics(e,a){qe(e,a)}handleMailHover(e){if(this.hoverTimeout)return;const a=e.currentTarget;_t(a),nt(a,0),this.hoverTimeout=!0,setTimeout(()=>{this.hoverTimeout=!1},100)}kill(){this.mapLink&&(this.mapLink.removeEventListener("click",this.trackMap),this.snsLinks.forEach(e=>{e.removeEventListener("click",this.trackSns)}),this.mails.forEach(e=>{e.removeEventListener("click",this.trackMail),e.removeEventListener("mouseenter",this.handleMailHover)}))}}class ni{constructor(){this.container=document.querySelector(".scroll-container"),this.onResizeBound=this.onResize.bind(this),window.addEventListener("resize",this.onResizeBound),this.onResize()}onResize(){if(!this.container)return;const e=this.container.clientHeight;this.container.firstElementChild.clientHeight>e?this.container.classList.add("align-start"):this.container.classList.remove("align-start")}kill(){window.removeEventListener("resize",this.onResizeBound)}}class si{constructor(){this.page=window.location.pathname==="/about"?"about":"contact",this.tabNavButtons=document.querySelectorAll(".tab-nav-item button"),this.tabContentItems=document.querySelectorAll(".tab-cnt-item"),this.currentTab=null,this.handlers=[],this.init()}init(){this.tabNavButtons.length!==0&&(this.currentTab=this.tabContentItems[0],this.tabNavButtons.forEach((e,a)=>{const l=()=>this.activateTab(e,a);e.addEventListener("click",l),this.handlers.push({button:e,handler:l})}))}activateTab(e,a){if(this.tabNavButtons.forEach(n=>n.classList.remove("active")),this.tabContentItems.forEach(n=>n.classList.remove("show","anim")),As(this.page,e.id),this.currentTab){const n=this.currentTab.querySelector(".mask-anim");if(n)this.currentTab.querySelector(".anim-mask-grp").classList.remove("show"),_t(n);else{const t=this.currentTab.querySelector(".tnv-anim");t&&t.classList.remove("show")}}e.blur(),e.classList.add("active");const l=document.querySelector(`.tabcntitm-${a+1}`);if(this.currentTab=l,l){l.classList.add("show"),requestAnimationFrame(()=>{l.classList.add("anim")});const n=l.querySelector(".mask-anim");if(n)nt(n,0);else{const t=l.querySelector(".tnv-anim");t&&setTimeout(()=>{t.classList.add("show")},1)}}}kill(){this.handlers.forEach(({button:e,handler:a})=>{e.removeEventListener("click",a)}),this.handlers=[]}}const ii=(h,e)=>{e==="ja"&&!h.classList.contains("en")?(h.textContent="English",h.classList.remove("ja"),h.classList.add("en")):e==="en"&&!h.classList.contains("ja")&&(h.textContent="日本語",h.classList.remove("en"),h.classList.add("ja"))},Tn=()=>{const h=window.location.pathname,e=h.startsWith("/ja")?"ja":"en",a=document.querySelector(".lang-btn"),l=document.querySelector(".nav-logo-link"),n=document.querySelector(".logotext-header"),t=document.querySelector(".logomark-header"),s=document.getElementById("nav-contact"),o=document.getElementById("nav-about"),i=document.getElementById("contact-nav"),r=e==="ja";if(i.classList.toggle("active",h.includes("/contact")),r){const u=h.replace("/ja","");a.href=`${u.length===0?"/":""}${u}`}else a.href=`/ja${h}`;const c=r?"/ja":"";i.href=s.href=`${c}/contact`,o.href=`${c}/about`,l.href=n.href=t.href=r?"/ja":"/",ii(a,e)};class yn{constructor(e){this.enableHover=!ft(),!(!this.enableHover||!e)&&(this.items=e,this.suppressionTimers=new Map,this.eventHandlers=new Map,this.init())}init(){this.items.forEach(e=>{const a=n=>this.handleMouseEnter(n),l=n=>this.handleMouseLeave(n);e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",l),this.eventHandlers.set(e,{mouseEnterHandler:a,mouseLeaveHandler:l})})}handleMouseEnter(e){const a=e.currentTarget;this.suppressionTimers.has(a)||De(le.SIMPLE_HOVER)}handleMouseLeave(e){const a=e.currentTarget;if(this.suppressionTimers.has(a))return;De(le.SIMPLE_OUT);const l=setTimeout(()=>{this.suppressionTimers.delete(a)},100);this.suppressionTimers.set(a,l)}dispose(){!this.enableHover||!this.items||(this.items.forEach(e=>{const a=this.eventHandlers.get(e);a&&(e.removeEventListener("mouseenter",a.mouseEnterHandler),e.removeEventListener("mouseleave",a.mouseLeaveHandler)),this.suppressionTimers.has(e)&&(clearTimeout(this.suppressionTimers.get(e)),this.suppressionTimers.delete(e))}),this.eventHandlers.clear(),this.suppressionTimers.clear(),this.items=null)}}class Zt extends rn{onEnter(){ut(!0)}onEnterCompleted(){this.tabs=new si,this.scroll=new ni,this.contact=new ti;const e=document.querySelectorAll(".sns-item"),a=[...document.querySelectorAll(".tab-nav-btn"),...e],l=document.getElementById("map-link");l&&a.push(l),this.sfxHoverController=new yn(a),document.querySelector("header").classList.remove("page-transition"),document.querySelector("main").classList.remove("interacting"),document.querySelector(".htibtn").classList.add("disable"),document.dispatchEvent(new CustomEvent("subpage-entered")),it(),Tn()}onLeave(){document.querySelector("header").classList.add("page-transition"),this.tabs&&this.tabs.kill(),this.scroll&&this.scroll.kill(),this.contact&&this.contact.kill(),this.sfxHoverController&&this.sfxHoverController.dispose(),document.dispatchEvent(new CustomEvent("CHANGE_PAGE"))}onLeaveCompleted(){}}const en=(h=1200)=>{setTimeout(()=>{const e=document.querySelector(".section-pag");e&&e.classList.add("show")},h)},bn=()=>{const{websiteStarted:h,introCheetahSeen:e,inSubpage:a}=V;if(h){if(e){en(10);return}}else return;!e&&!a&&(setTimeout(()=>{const l=document.querySelector(".headline-section1");l&&l.classList.add("intro-completed")},2200),en(),setTimeout(()=>{Ve()},2500))};class oi{constructor(){this.init()}init(){q.on("isInteracting",this.onIsInteracting)}onIsInteracting=({value:e,area:a})=>{e?this.show(a):this.hide(a),ie().api.trigger({name:"sectionInteraction"},{slowMo:e,zoomInteraction:e})};show=e=>{const a=e==="section2";clearTimeout(this.animTimeout);const l=document.querySelector(`.${e} .top-section-cont`);l&&(this.animTimeout=setTimeout(()=>{l.classList.add("show")},a?500:1200),l.classList.remove("hide"))};hide=e=>{const a=document.querySelector(`.${e} .top-section-cont`);clearTimeout(this.animTimeout),a&&(a.classList.add("hide"),a.classList.remove("show"))};kill=()=>{clearTimeout(this.animTimeout),q.off("isInteracting",this.onIsInteracting)}}const wn=()=>{const h=document.querySelectorAll(".headline"),e=[];return h.forEach(a=>{e.push(a.innerHTML)}),e},ri=()=>{const h=window.location.pathname.includes("/ja")?"ja":"en";if(V.currentLang!==h){const e=wn(),{api:a}=ie();a&&a.trigger({name:"feedLocalizationToCanvas"},{headlines:e}),V.currentLang=h}};class ai extends rn{onEnter(){ut(!1)}onEnterCompleted(){const{api:e}=ie();e&&V.websiteStarted&&e.trigger({name:"startWebsite"}),document.querySelector("header").classList.remove("page-transition"),this.interactionAreas=new oi,this.sfxHoverController=new yn([document.querySelector(".end-link")]),this.interactionButton=document.querySelector(".htibtn"),this.interactionButton.classList.remove("disable"),Lt.getSections().filter(l=>l.dom).forEach(l=>{const n=document.querySelector(`.headline-${l.id}`);n&&(n.style.height=`${l.screenHeight*100}vh`)}),setTimeout(()=>{document.dispatchEvent(new CustomEvent("top-entered"))},1),Tn(),bn(),ri()}onLeave(){this.interactionAreas&&this.interactionAreas.kill(),this.sfxHoverController&&this.sfxHoverController.dispose(),this.interactionButton.classList.add("disable"),document.querySelector("header").classList.add("page-transition"),document.dispatchEvent(new CustomEvent("CHANGE_PAGE"))}onLeaveCompleted(){}}const ci=()=>{const h=new Dn({renderers:{top:ai,about:Zt,contact:Zt},transitions:{default:ei}});h.on("NAVIGATE_OUT",()=>{const e=h.targetLocation.pathname,a=e.includes("contact")||e.includes("about");Ae({navigateToSubPage:a});const{menuOpen:l}=ie();l&&ut(a)})},li=()=>{const h=document.createElement("div");h.style.visibility="hidden",h.style.width="100px",h.style.height="100px",h.style.overflow="scroll",h.style.position="absolute";const e=document.createElement("div");e.style.width="100%",e.style.height="200px",h.appendChild(e),document.body.appendChild(h),h.scrollTop=0,h.scrollTop=.5;const a=h.scrollTop===.5;return document.body.removeChild(h),a},{lerp:hi}=Ke;class ui{constructor(){this.browserSupportFractionnalScroll=li(),this.direction=1,this.started=!1,this.lastTouchY=0,this.enableUserScroll=!0,this.scrollEnableSmooth=1,this.isTouchDevice=ft(),this.thresholdDirection=this.isTouchDevice?3:0,this.transition1ScrollIncrease=this.isTouchDevice?9:6,this.scrollAccumulator=0,this.speedBaseScroll=2,this.keyboardExtraSpeed=0,this.backSlowDownSection1=0,this.blockScrollTransition=!1,this.isSlowingDown=!1,this.scrollMultiplier=1,this.targetMultiplier=1,this.targetMultiplierSlow=.2,this.holdTimeout=null,this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.onRaf=this.onRaf.bind(this),this.isTouchDevice&&this.initTouchDeviceEvents()}initTouchDeviceEvents(){document.addEventListener("pointerdown",this.handleTouchStart)}start(e=1){this.started=!0,this.isSlowingDown=!1,this.scrollAccumulator=0,this.scrollMultiplier=1,this.targetMultiplier=1,this.direction=e,this.addDirectionEventListener(),window.scrollBy(0,this.direction)}addDirectionEventListener(){this.isTouchDevice?(document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchend",this.handleTouchEnd)):(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp))}removeDirectionEventListener(){this.isTouchDevice?(document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd)):(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp))}handleTouchStart(e){this.lastTouchY=e.clientY}handleTouchMove(e){const a=e.touches[0].clientY,l=this.lastTouchY-a;Math.abs(l)<this.thresholdDirection||this.updateDirection(l>0?1:-1)}releaseSpeed(){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isSlowingDown&&this.speedUp()}handleTouchEnd(){this.lastTouchY=0}handleMouseDown(){this.holdTimeout=setTimeout(()=>this.slowDown(),50)}handleMouseUp(){this.releaseSpeed()}handleKeyDown(e){(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key===" ")&&(this.updateDirection(e.key!=="ArrowUp"?1:-1),this.keyboardExtraSpeed=5)}handleKeyUp(e){(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key===" ")&&(this.keyboardExtraSpeed=0)}updateDirection(e){e&&(this.direction=e)}isStarted=()=>this.started;stop(){this.scrollAccumulator=0,this.started=!1,this.isSlowingDown=!1,this.scrollMultiplier=1,this.targetMultiplier=1,this.removeDirectionEventListener(),this.keyboardExtraSpeed=0,clearTimeout(this.holdTimeout)}slowDown(){this.isSlowingDown||(this.isSlowingDown=!0,this.targetMultiplier=this.targetMultiplierSlow)}speedUp(){this.isSlowingDown=!1,this.targetMultiplier=1}getScrollAmount(e){if(this.browserSupportFractionnalScroll)return e;if(Math.abs(e)>=1)return this.scrollAccumulator=0,e;this.scrollAccumulator+=e;const a=Math.trunc(this.scrollAccumulator);return this.scrollAccumulator+=-a,a}checkIfLockScroll(e=!1){e?this.blockScrollTransition||(it(),this.blockScrollTransition=!0):this.blockScrollTransition&&(Ve(),this.blockScrollTransition=!1)}onRaf({delta:e}){if(this.started&&!V.inSubpage){const a=150*Math.min(.1,e),{sections:l}=V,n=l.twoEndProgress.value,t=l.oneProgress.value,s=l.twoIntroProgress.value,o=l.twoEndProgress.value,i=l.threeProgress.value,r=Ps(t-s),c=1+r*(this.transition1ScrollIncrease-this.backSlowDownSection1);this.backSlowDownSection1=Ke.damp(this.backSlowDownSection1,this.direction===1?0:3,2,e),this.checkIfLockScroll(r>.05);const u=o===1?1:1+o*6,d=i>.7,f=i<.1?1:0;this.speedBaseScroll=i>0&&i<1?1:2;const p=.05+.5*n+Math.min(.45,i*1.3),m=n<1?1-n:d?(i-.7)*6:0;this.scrollEnableSmooth=Ke.damp(this.scrollEnableSmooth,this.enableUserScroll?1:0,4+m*40,e);const v=this.blockScrollTransition?0:V.virtualScroll*.6;v!==0&&!this.blockScrollTransition&&(this.isTouchDevice||this.updateDirection(v>0?1:-1),V.virtualScroll=0),this.blockScrollTransition&&(V.virtualScroll=0);const I=3;this.scrollMultiplier=hi(this.scrollMultiplier,this.targetMultiplier,e*I),this.scrollMultiplier=Math.max(0,Math.min(1,this.scrollMultiplier));const E=this.direction*(this.speedBaseScroll+f)*this.scrollMultiplier*c*u*a,b=this.direction*this.keyboardExtraSpeed*this.scrollMultiplier,S=v*p*this.scrollMultiplier,T=this.getScrollAmount(this.isTouchDevice?E:E+(b+S)*this.scrollEnableSmooth);if(T===0)return;let k={target:window.scrollY+T,options:{lock:!1,immediate:!0}};if(this.isTouchDevice)if(Math.abs(this.lenis.velocity)<1||this.blockScrollTransition)k.lock=!0;else return;q.trigger({name:"lenis:scrollTo"},k)}}}class tn{constructor(e=[]){this.audioCtx=_e.Howler.ctx,this.sounds=new Set,this.effects=e,this.groupGainNode=this.audioCtx.createGain(),this.groupGainNode.gain.value=1,this.buildEffectChain(),this.outputNode.connect(_e.Howler.masterGain)}buildEffectChain(){let e=this.groupGainNode;this.effectNodes=[];for(const a of this.effects){const l=a.createNode(this.audioCtx);l&&(e.connect(l),e=l,this.effectNodes.push(l))}this.outputNode=e}addSound(e){if(!(e instanceof _e.Howl)){console.error("Only Howl instances can be added to the AudioGroup.");return}this.sounds.has(e)||(this.sounds.add(e),e.on("play",this.onSoundPlay.bind(this,e)),e.on("stop",this.onSoundStop.bind(this,e)),e.on("end",this.onSoundStop.bind(this,e)))}onSoundPlay(e){e._sounds.forEach(a=>{const l=a._node;if(!l){console.warn("Source node not found for:",e);return}try{l.disconnect(),l.connect(this.groupGainNode),a._connectedToGroup=!0}catch(n){console.error("Error connecting sound to group:",n)}})}onSoundStop(e){e._sounds.forEach(a=>{const l=a._node;if(!(!l||!a._connectedToGroup))try{l.disconnect(),l.connect(_e.Howler.masterGain),delete a._connectedToGroup}catch(n){console.error("Error disconnecting sound from group:",n)}})}removeSound(e){this.sounds.has(e)&&(this.sounds.delete(e),e.off("play",this.onSoundPlay.bind(this,e)),e.off("stop",this.onSoundStop.bind(this,e)),e.off("end",this.onSoundStop.bind(this,e)),this.onSoundStop(e))}dispose(){this.sounds.forEach(e=>{this.removeSound(e)}),this.sounds.clear();for(const e of this.effectNodes)e.disconnect();this.effectNodes=[],this.groupGainNode&&(this.groupGainNode.disconnect(),this.groupGainNode=null),this.outputNode=null}}class di{constructor(e){this.lowPassGroupLoop=e,this.logoElement=document.querySelector(".nav-logo-link"),this.menuIsOpen=!1,this.lastMouseX=null,this.lastMouseY=null,this.lastTimestamp=null,this.cursorSpeed=0,this.normalFrequency=100,this.minFrequency=100,this.maxFrequency=3e3,this.movementTimeout=null,this.movementDelay=10,this.handleMenuOpen=this.handleMenuOpen.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.resetFrequency=this.resetFrequency.bind(this),document.addEventListener("menuOpen",this.handleMenuOpen)}handleMenuOpen(e){const{open:a}=e.detail;this.menuIsOpen!==a&&(this.menuIsOpen=a,a?this.onMenuOpen():this.onMenuClose())}onMenuOpen(){this.logoElement.addEventListener("mousemove",this.handleMouseMove)}onMenuClose(){this.logoElement.removeEventListener("mousemove",this.handleMouseMove),this.resetFrequency(),this.lastTimestamp=null,clearTimeout(this.movementTimeout)}handleMouseMove(e){const a=performance.now(),l=e.clientX,n=e.clientY;if(this.lastTimestamp!==null){const t=(a-this.lastTimestamp)/1e3,s=l-this.lastMouseX,o=n-this.lastMouseY,r=Math.sqrt(s**2+o**2)/t;this.cursorSpeed=r;const c=this.mapSpeedToFrequency(this.cursorSpeed);this.lowPassGroupLoop.updateFrequency(c)}this.lastMouseX=l,this.lastMouseY=n,this.lastTimestamp=a,this.movementTimeout&&clearTimeout(this.movementTimeout),this.movementTimeout=setTimeout(this.resetFrequency,this.movementDelay)}mapSpeedToFrequency(e){const t=(Math.min(Math.max(e,100),2e3)-100)/1900;return this.minFrequency+t*(this.maxFrequency-this.minFrequency)}resetFrequency(){const a=_e.Howler.ctx.currentTime,l=.5;this.lowPassGroupLoop.lowPassFilter1&&this.lowPassGroupLoop.lowPassFilter2&&(this.lowPassGroupLoop.lowPassFilter1.frequency.linearRampToValueAtTime(this.normalFrequency,a+l),this.lowPassGroupLoop.lowPassFilter2.frequency.linearRampToValueAtTime(this.normalFrequency,a+l))}}class fi{constructor(e){this.audioContext=_e.Howler.ctx,this.musicHowl=e,this.lowPassFilter=null,this.gainNode=null}updateCurrentHowl(e){this.musicHowl=e}getSourceNode=()=>this.musicHowl._sounds&&this.musicHowl._sounds.length>0?this.musicHowl._sounds[0]._node:null;applyNightClubEffect(e=100,a=500){this.pendingReset&&(clearTimeout(this.pendingReset),this.pendingReset=null),this.applyAudioEffect({frequency:e,gain:.5},a)}removeNightClubEffect(e=18e3,a=500){this.applyAudioEffect({frequency:e,gain:1},a),this.pendingReset=setTimeout(()=>{this.removeAudioEffect(),this.pendingReset=null},a)}applyAudioEffect({frequency:e,gain:a},l=500){const n=this.getSourceNode();if(!n)return;const t=this.audioContext.currentTime,s=t+l/1e3,o=24e3;if(this.lowPassFilter&&this.gainNode){this.lowPassFilter.frequency.cancelScheduledValues(t),this.gainNode.gain.cancelScheduledValues(t),this.lowPassFilter.frequency.setValueAtTime(Math.min(o,this.lowPassFilter.frequency.value),t),this.gainNode.gain.setValueAtTime(this.gainNode.gain.value,t),this.lowPassFilter.frequency.linearRampToValueAtTime(e,s),this.gainNode.gain.linearRampToValueAtTime(a,s);return}this.lowPassFilter=this.audioContext.createBiquadFilter(),this.lowPassFilter.type="lowpass",this.gainNode=this.audioContext.createGain(),this.lowPassFilter.frequency.setValueAtTime(Math.min(o,this.audioContext.sampleRate),t),this.gainNode.gain.setValueAtTime(1,t),this.lowPassFilter.frequency.linearRampToValueAtTime(e,s),this.gainNode.gain.linearRampToValueAtTime(a,s),n.disconnect(),n.connect(this.lowPassFilter),this.lowPassFilter.connect(this.gainNode),this.gainNode.connect(_e.Howler.masterGain)}removeAudioEffect(){const e=this.getSourceNode();e&&(this.lowPassFilter&&(this.lowPassFilter.disconnect(),this.lowPassFilter=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),e.disconnect(),e.connect(_e.Howler.masterGain))}dispose(){const e=this.getSourceNode();e&&(e.disconnect(),e.connect(this.audioContext.destination)),this.lowPassFilter=null,this.gainNode=null}}const ze={NONE:0,FADING_IN:1,FADING_OUT:2};class pi{constructor(e,a,l=!1){this.howl=e,this.trackName=a,this.currentVolume=0,this.fadeDuration=500,this.fadingStatus=ze.NONE,this.isCurrentTrack=l,this.effectController=new fi(this.howl),this.playWhileSilent=!1}updateCurrentTrackStatus(e){this.isCurrentTrack=e,e&&this.play(this.currentVolume)}play(e){(e>0||this.playWhileSilent)&&!this.howl.playing()&&this.howl.play()}isPlaying(){return this.howl.playing()}setVolume(e,a=this.fadeDuration){if(!this.isCurrentTrack){this.currentVolume=e,this.howl.volume(e);return}e===0&&this.fadingStatus===ze.FADING_OUT||e===1&&this.fadingStatus===ze.FADING_IN||(clearTimeout(this.onFadeComplete),this.fadingStatus=e===0?ze.FADING_OUT:ze.FADING_IN,this.play(e),this.howl.fade(this.howl.volume(),e,a),this.onFadeComplete=setTimeout(()=>{this.fadingStatus===ze.FADING_OUT?(this.playWhileSilent||this.howl.stop(),this.currentVolume=0):this.currentVolume=1,this.fadingStatus=ze.NONE},a))}applyNightClubEffect(e=300,a=500){this.effectController.applyNightClubEffect(e,a)}removeNightClubEffect(e=18e3,a=500){this.effectController.removeNightClubEffect(e,a)}stop(){this.howl.stop(),this.fadingStatus=ze.NONE}dispose(){this.howl.stop(),this.howl.unload(),this.effectController.dispose()}}class mi{constructor(e){const a=me.SECTION1;this.trackControllers=new Map;for(const[l,n]of Object.entries(e))n instanceof _e.Howl&&this.trackControllers.set(l,new pi(n,l,l===a));this.inSubpage=!1,this.isMuted=!1,this.maxVolumeMusic=1,this.globalVolume=1,this.isInteracting=!1,this.setCurrentTrack(a),this.kickTrack=null,this.nightClubEffectApplied=!1,this.handleMenuOpen=this.handleMenuOpen.bind(this),this.handleInSubPage=this.handleInSubPage.bind(this),this.handleIsInteracting=this.handleIsInteracting.bind(this),this.updateScene4Kick=this.updateScene4Kick.bind(this),this.initEvents()}initEvents(){document.addEventListener("menuOpen",this.handleMenuOpen),document.addEventListener(he.SCENE_4_PROGRESS,this.updateScene4Kick),q.on("isInteracting",this.handleIsInteracting),q.on("inSubPage",this.handleInSubPage)}start(e){this.setVolumeTrack(e,this.maxVolumeMusic,6e3)}getTrackByName(e){return this.trackControllers.get(e)}setVolumeTrack(e,a,l){this.trackControllers.get(e).setVolume(a,l)}setCurrentTrack(e){this.currentTrackName=e,this.currentTrack=this.getTrackByName(e),this.currentTrack.updateCurrentTrackStatus(!0)}setKickTrack(e){e===me.SECTION4&&(this.kickTrack=this.getTrackByName(`${e}_kick`))}switchTrack(e,a=500){this.currentTrackName===e||!V.websiteStarted||(this.setVolumeTrack(this.currentTrackName,0,a),this.currentTrack.updateCurrentTrackStatus(!1),this.setCurrentTrack(e),this.setVolumeTrack(e,this.maxVolumeMusic*this.globalVolume,a),e===me.SECTION4&&(this.initKickScene4(),this.kickTrack.play(0)))}fadeInTrack(e,a=500){this.setVolumeTrack(e,this.maxVolumeMusic*this.globalVolume,a)}fadeOutTrack(e,a=500){this.setVolumeTrack(e,0,a),this.currentTrackName===e&&(this.currentTrackName=null)}setGlobalVolume(e,a=0){this.globalVolume=e,this.currentTrackName&&this.setVolumeTrack(this.currentTrackName,this.maxVolumeMusic*this.globalVolume,a)}applyNightClubEffect(e=300,a=500){this.currentTrack.applyNightClubEffect(e,a),this.kickTrack&&this.kickTrack.applyNightClubEffect(e,a)}removeNightClubEffect(e=18e3,a=500){this.currentTrack.removeNightClubEffect(e,a),this.kickTrack&&this.kickTrack.removeNightClubEffect(e,a)}toggleNightClubEffect(e){this.nightClubEffectApplied!==e&&(e?this.applyNightClubEffect():this.removeNightClubEffect(),this.nightClubEffectApplied=e)}handleMenuOpen(e){this.inSubpage||this.toggleNightClubEffect(e.detail.open)}handleInSubPage({inSubpage:e}){this.inSubpage=e,this.toggleNightClubEffect(e)}initKickScene4(){this.kickTrack||(this.kickTrack=this.getTrackByName(me.SECTION4_KICK),this.kickTrack.isPlaying()||this.kickTrack.howl.seek(this.currentTrack.howl.seek())),this.kickTrack.playWhileSilent=!0}updateScene4Kick(e){const{progress:a}=e.detail;if(!this.kickTrack)return;if(a===-1){this.kickTrack.playWhileSilent=!1,this.kickTrack.setVolume(0,300),this.kickTrack.updateCurrentTrackStatus(!1),this.kickTrack=null;return}const l=Math.max(0,Math.min(1,-.23+a*1.3));this.kickTrack.updateCurrentTrackStatus(!0),this.kickTrack.setVolume(l,5)}handleIsInteracting({value:e}){this.isInteracting!==e&&(this.toggleNightClubEffect(e),this.isInteracting=e)}dispose(){document.removeEventListener("menuOpen",this.handleMenuOpen),q.off("isInteracting",this.handleIsInteracting),document.removeEventListener(he.SCENE_4_PROGRESS,this.updateScene4Kick),this.trackControllers.forEach(e=>e.dispose()),this.trackControllers.clear(),this.currentTrackName=null,this.currentTrack=null}}class gi{constructor(e={}){this.initialFrequency=e.initialFrequency||1e3,this.filterQ=e.filterQ||1}createNode(e){return this.lowPassFilter1=e.createBiquadFilter(),this.lowPassFilter1.type="lowpass",this.lowPassFilter1.frequency.value=this.initialFrequency,this.lowPassFilter1.Q.value=this.filterQ,this.lowPassFilter2=e.createBiquadFilter(),this.lowPassFilter2.type="lowpass",this.lowPassFilter2.frequency.value=this.initialFrequency,this.lowPassFilter2.Q.value=this.filterQ,this.lowPassFilter1.connect(this.lowPassFilter2),this.lowPassFilter1}updateFrequency(e){const a=this.lowPassFilter1.context.currentTime,l=.1;this.lowPassFilter1.frequency.linearRampToValueAtTime(e,a+l),this.lowPassFilter2.frequency.linearRampToValueAtTime(e,a+l)}disconnect(){this.lowPassFilter2&&this.lowPassFilter2.disconnect(),this.lowPassFilter1&&this.lowPassFilter1.disconnect()}}class vi{constructor(e={}){this.options=e}createNode(e){this.audioCtx=e,this.convolver=e.createConvolver(),this.wetGain=e.createGain(),this.dryGain=e.createGain();const{mix:a=.25,decay:l=2,predelay:n=15,irUrl:t=null,irArrayBuffer:s=null,irAudioBuffer:o=null}=this.options;return this.wetGain.gain.value=a,this.dryGain.gain.value=1-a,o&&(this.convolver.buffer=o),this.inputNode=e.createGain(),this.inputNode.connect(this.dryGain),this.inputNode.connect(this.convolver),this.convolver.connect(this.wetGain),this.outputNode=e.createGain(),this.wetGain.connect(this.outputNode),this.dryGain.connect(this.outputNode),this.inputNode}disconnect(){this.outputNode&&this.outputNode.disconnect(),this.wetGain&&this.wetGain.disconnect(),this.dryGain&&this.dryGain.disconnect(),this.convolver&&this.convolver.disconnect(),this.inputNode&&this.inputNode.disconnect()}}async function Si(h,e){const l=await(await fetch(e)).arrayBuffer();return await h.decodeAudioData(l)}class Ti{constructor(){this.transitionScene3To4Played=!1,this.isInSection3=!1,this.isInSection4=!1,this.preventSpamTransitionScene3To4=!1,this.isPlayingTransition2=!1,this.isPlayingTransition1=!1,this.timeoutSpamScene1To2=null,this.listenProgress=this.listenProgress.bind(this),q.on("scroll",this.listenProgress),this.enteredSection2InteractionArea=this.enteredSection2InteractionArea.bind(this),this.playTransitionAnchor=this.playTransitionAnchor.bind(this),document.addEventListener("section2InteractionArea",this.enteredSection2InteractionArea),document.addEventListener(he.PLAY_TRANSITION_ANCHOR,this.playTransitionAnchor)}enteredSection2InteractionArea(){this.checkUserBackOnSection2||(this.isPlayingTransition2=!1)}section2To3Transition(e){!this.isPlayingTransition2&&this.progress2End>.01&&e&&!this.timeoutSpamScene2To3&&(this.isPlayingTransition2=!0,lt(j.TRANSITION_SCENE_2_TO_3),this.timeoutSpamScene2To3=setTimeout(()=>{this.timeoutSpamScene2To3=null},700),this.checkUserBackOnSection2=setTimeout(()=>{this.checkUserBackOnSection2=null,this.progress2End<.01+.5&&et(j.TRANSITION_SCENE_2_TO_3,300)},600),this.checkUserBackOnSection2DoubleCheck=setTimeout(()=>{this.checkUserBackOnSection2DoubleCheck=null,this.progress2End<.01+.8&&et(j.TRANSITION_SCENE_2_TO_3,300)},900)),this.progress2End===0&&this.isPlayingTransition2&&(this.isPlayingTransition2=!1,et(j.TRANSITION_SCENE_2_TO_3,200),clearTimeout(this.checkUserBackOnSection2),clearTimeout(this.checkUserBackOnSection2DoubleCheck))}section3To4Transition(e){!this.preventSpamTransitionScene3To4&&!this.transitionScene3To4Played&&this.isInSection3&&this.progress3>.7&&e&&(this.preventSpamTransitionScene3To4=!0,lt(j.TRANSITION_SCENE_3_TO_4),this.transitionScene3To4Played=!0,this.timeoutSpamScene3To4=setTimeout(()=>{this.preventSpamTransitionScene3To4=!1},700),this.checkUserBackOnSection3=setTimeout(()=>{this.progress3<.7+.02&&et(j.TRANSITION_SCENE_3_TO_4,700)},500)),this.transitionScene3To4Played&&this.progress3<.7-.05&&(this.transitionScene3To4Played=!1,et(j.TRANSITION_SCENE_3_TO_4,200),clearTimeout(this.checkUserBackOnSection3))}section1To2Transition(e,a=!1){this.progress1>.02&&this.progress1<.1&&e&&!this.isPlayingTransition1&&this.timeoutSpamScene1To2===null?(lt(j.TRANSITION_SCENE_1_TO_2),this.isPlayingTransition1=!0,this.timeoutSpamScene1To2=setTimeout(()=>{this.timeoutSpamScene1To2=null},700)):this.progress2>.4&&(this.isPlayingTransition1=!1),this.isPlayingTransition1&&!a&&(this.checkUserBackOnSection1=setTimeout(()=>{this.checkUserBackOnSection1=null,this.progress1<.1&&(et(j.TRANSITION_SCENE_1_TO_2,400),this.isPlayingTransition1=!1)},400))}playTransitionAnchor(e){const{transition:a}=e.detail;a===j.TRANSITION_SCENE_1_TO_2?this.section1To2Transition(1,!0):a===j.TRANSITION_SCENE_4_TO_5&&this.playTransitionFinal()}playTransitionFinal(){this.isPlayingTransitionFinal||(this.isPlayingTransitionFinal=!0,lt(j.TRANSITION_SCENE_4_TO_5),setTimeout(()=>{this.isPlayingTransitionFinal=!1},700))}listenProgress({progress:e,direction:a}){const{sections:l}=V;this.anchorScrolling=ie().anchorScrolling,this.progress1=l.oneProgress.value,this.progress2End=l.twoEndProgress.value,this.progress2=l.twoProgress.value,this.progress3=l.threeProgress.value;const n=l.fourthProgress.value,t=l.fiveProgress.value;if(this.isInSection1=e<.2,this.isInSection3=this.progress3>0&&n===0,this.isInSection4=n>0&&t===0,this.progress<.2&&(this.transitionScene3To4Played=!1,this.isPlayingTransition2=!1,this.checkUserBackOnSection2=null),this.anchorScrolling)this.progress3>0&&(this.isPlayingTransition2=!0);else{const s=a===1;this.section1To2Transition(s),this.section2To3Transition(s),this.section3To4Transition(s)}this.isInSection4?(this.wasInScen4=!0,Qt(dn(.1,.5,n))):this.wasInScen4&&(this.wasInScen4=!1,Qt(-1))}dispose(){q.off("scroll",this.listenProgress)}}class yi{constructor(){this.sounds={},this.isMuted=!1,this.globalVolume=1;const e=!st();localStorage.getItem("isMuted")==="true"&&(_e.Howler.volume(0),this.isMuted=!0),Kt.forEach(l=>{(e||!l.desktop)&&(this.sounds[l.name]=new _e.Howl({src:this.getAudioPaths(l.path,Mt.sfx),volume:1,preload:!0,html5:!1,...l}))});const a={};Xt.forEach(l=>{this.sounds[l.name]=new _e.Howl({src:this.getAudioPaths(l.path,Mt.music),volume:0,preload:!1,html5:!1,loop:!0,...l}),a[l.name]=this.sounds[l.name]}),Jt.forEach(l=>{(e||!l.desktop)&&(this.sounds[l.name]=new _e.Howl({src:this.getAudioPaths(l.path,Mt.transitions),volume:1,preload:!1,html5:!1,...l}))}),this.preloadOtherSounds=this.preloadOtherSounds.bind(this),this.toggleMute=this.toggleMute.bind(this),this.playSound=this.playSound.bind(this),this.stopSound=this.stopSound.bind(this),this.playSoundTransition=this.playSoundTransition.bind(this),this.stopSoundTransition=this.stopSoundTransition.bind(this),this.playMusic=this.playMusic.bind(this),this.stopMusic=this.stopMusic.bind(this),this.initListeners(),this.setupMusicManager(a),this.transitionsController=new Ti(this.sounds),e&&(this.addSfxReverbGroup(),this.addLowPassLogoAudioGroup())}initListeners(){document.addEventListener(he.MUTE_SOUND,this.toggleMute),document.addEventListener(he.PLAY_SOUND,this.playSound),document.addEventListener(he.STOP_SOUND,this.stopSound),document.addEventListener(he.PLAY_TRANSITION,this.playSoundTransition),document.addEventListener(he.STOP_TRANSITION,this.stopSoundTransition),document.addEventListener(he.PLAY_MUSIC,this.playMusic),document.addEventListener(he.STOP_MUSIC,this.stopMusic),q.on("renderedReady",this.preloadOtherSounds)}setupMusicManager(e){this.musicManager=new mi(e),_e.Howler.ctx.state==="suspended"?this.sounds[me.SECTION1].once("unlock",()=>{this.musicManager.start(me.SECTION1)}):this.musicManager.start(me.SECTION1),document.addEventListener(Xe.STARTED,a=>{const{section:l}=a.detail;this.musicManager.switchTrack(l,1500)})}async addSfxReverbGroup(){const e=_e.Howler.ctx,a=await Si(e,"/audio/sfx/mp3/impulse_response.mp3"),l=new vi({mix:.25,decay:2,predelay:15,irAudioBuffer:a});this.reverbGroupSfx=new tn([l]),Kt.filter(n=>n.reverb).forEach(n=>{this.reverbGroupSfx.addSound(this.sounds[n.name])})}addLowPassLogoAudioGroup(){const e=new gi({initialFrequency:100});this.lowPassGroupLoop=new tn([e]),this.lowPassGroupLoop.addSound(this.sounds[le.LOGO_LOOP]),this.menuSoundController=new di(e)}preloadOtherSounds(){q.off("renderedReady",this.preloadOtherSounds),Jt.forEach(e=>{this.sounds[e.name]&&this.sounds[e.name].load()}),Xt.forEach(e=>{this.sounds[e.name]&&this.sounds[e.name].load()})}getAudioPaths(e,a){return[`${a}opus/${e}.opus`,`${a}mp3/${e}.mp3`]}play(e,a=0,l=1){const n=this.sounds[e];if(n){if(a===0){n.volume(l),n.play();return}n.play(),n.fade(0,l,a)}}stop(e,a=0){const l=this.sounds[e];if(l&&l.playing()){const n=l.volume();if(a===0){l.stop();return}l.fade(n,0,a),l.once("fade",()=>{l.stop()})}}playSound(e){e?.detail&&this.play(e.detail.soundName)}stopSound(e){e?.detail&&this.stop(e.detail.soundName,e.detail.fadeDuration||0)}playSoundTransition(e){if(e?.detail){const{transition:a,fadeInDuration:l}=e.detail;this.play(a,l)}}stopSoundTransition(e){if(e?.detail){const{transition:a,fadeDuration:l}=e.detail;this.stop(a,l)}}playMusic(e){const{trackName:a,volume:l,duration:n}=e.detail;a&&this.switchMusicTrack(a,n||500)}stopMusic(e){e?.detail&&this.stop(e.detail.musicName)}toggleMute(e){this.isMuted=e.detail.isOff;const a=this.isMuted?0:1;localStorage.setItem("isMuted",this.isMuted),Ye.to(this,{globalVolume:a,duration:1,onUpdate:()=>{_e.Howler.volume(this.globalVolume)}}),this.musicManager.setGlobalVolume(a,1e4)}switchMusicTrack(e,a=800){this.musicManager.switchTrack(e,a)}}const bi=()=>{const h=window.location.pathname;return h==="/"||h==="/ja"},nn=h=>{ci(),xs(),new yi,new Qs(h),new Zs(h),st()&&document.querySelector("body").classList.add("sp-txt");const e=new Lt;e.addToStore(),e.updateDomHeight(),V.autoscroll=new ui,new Js(V.lenis,V.autoscroll),document.addEventListener("lenis:scroll",({detail:a})=>{e.updateProgress(a)}),document.querySelector(".logomark-header").addEventListener("click",()=>{qe("logo","navigation","click","home")}),document.querySelector(".logotext-header").addEventListener("click",()=>{qe("logo-text","navigation","click","home")}),document.getElementById("contact-nav").addEventListener("click",()=>{qe("contact-nav","navigation","click","contact")}),document.querySelectorAll(".nav-btn").forEach(a=>{a.addEventListener("click",l=>{qe(l.currentTarget.id,"navigation","click")})})},wi=h=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",nn):nn(h)},Ei=(h,e)=>{let a=!1,l=null;const n=()=>{const t=window.outerWidth-window.innerWidth>150,s=window.outerHeight-window.innerHeight>150;t||s?a||(a=!0,clearInterval(l),console.log(`
                  ....    
      ..          ....... 
      ......      ........
      ........    ........
      ........    ........
      ........    ........
      ........    ........
      .........   ........
      ....................
      ............. ......
        ...........     ..
          ........       
              ...        

                    %cウツボ%c
          MADE BY UTSUBO

----------------------------------

Hello, Bonjour, こんにちは、 
Fellow Developer! 👋

----------------------------------

You are currently using:

${h?`Thread Type: ${h} 🧵`:""}
${e?`Render Backend: ${e} 🚀`:""}

----------------------------------

Check out our projects on GitHub:
https://github.com/utsuboco
  `,"font-size: 8px; color: #888;","")):a=!1};l=setInterval(n,5e3),n()},ki=async()=>{const h=window.location.search.includes("debug"),e=Date.now();let a=0;const l=await Es({record:!1,debug:h,offscreen:!h,smoothScroll:!0});wi(l),q.on("introCheetahSeen",()=>{V.introCheetahSeen=!0,q.off("introCheetahSeen")}),q.on("debugInfos",({threadType:u,renderBackend:d,hardwareInfo:f})=>{ks({threadType:u,renderBackend:d,launchTime:a,hardwareInfo:f}),Ei(u,d),q.off("debugInfos")});const n=document.getElementById("loading"),t=document.getElementById("start"),s=document.getElementById("loader"),o=document.querySelector(".loading-logo"),i=document.querySelector(".ll-video");let r=0,c=!1;q.on("loadProgress",({progress:u})=>{n.innerHTML=`${Math.round(u)}%`,u===100&&q.off("loadProgress")}),q.on("collectFps",({fps:u})=>{r!==u&&(Ls(u),r=u)}),q.on("renderedReady",()=>{if(c)return;a=Date.now()-e,q.off("renderedReady"),q.off("loadProgress"),c=!0,l.trigger({name:"feedLocalizationToCanvas"},{headlines:wn()}),t.style.display="block",s?.classList.add("complete"),o?.classList.add("hide"),i?.classList.add("hide"),setTimeout(()=>{i?.classList.add("disable")},1e3),window.dataLayer&&window.dataLayer.push({event:"page_fully_loaded"});const u=()=>{window.dataLayer&&window.dataLayer.push({event:"enter_button_click"}),De(le.OPEN_WEBSITE),document.querySelector(".htibtn_cont_pulsar")?.classList.add("loaded"),V.websiteStarted=!0,l.trigger({name:"startWebsite"},{initial:!0}),bn(),s?.classList.add("close"),document.getElementById("head")?.classList.add("active"),setTimeout(()=>{s?.classList.add("hide")},700),vn(),Sn()};window.innerWidth<767?u():t.addEventListener("click",()=>{u()},{once:!0})})};ki();export{ie as a,Li as b,Ii as c,q as d,Pi as e,Ni as f,V as g,Mi as h,Fi as i,Ai as j,Ps as k,dn as l,Ui as m,xi as n,Oi as o,Xn as r,Ae as s};
